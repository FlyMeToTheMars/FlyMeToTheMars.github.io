<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/xingqiushangcheng.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/xingqiushangcheng.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-mac-osx.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="keywords" content="Tips4Scala">
<meta property="og:type" content="article">
<meta property="og:title" content="Dawn Dew-light Collected at Dusk 4 Scala">
<meta property="og:url" content="http://yoursite.com/2020/12/16/Dawn-Dew-light-Collected-at-Dusk-4-Scala/index.html">
<meta property="og:site_name" content="Mars">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1glptqgll6ej2098048a9w.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gls6d1a89cj20of0gtta1.jpg">
<meta property="og:updated_time" content="2021-01-28T08:54:18.645Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Dawn Dew-light Collected at Dusk 4 Scala">
<meta name="twitter:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1glptqgll6ej2098048a9w.jpg">

<link rel="canonical" href="http://yoursite.com/2020/12/16/Dawn-Dew-light-Collected-at-Dusk-4-Scala/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Dawn Dew-light Collected at Dusk 4 Scala | Mars</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Mars" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Mars</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/16/Dawn-Dew-light-Collected-at-Dusk-4-Scala/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Fly Hugh">
      <meta itemprop="description" content="WE CHOOSE TO  GO TO THE MARS">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mars">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Dawn Dew-light Collected at Dusk 4 Scala
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-16 17:24:43" itemprop="dateCreated datePublished" datetime="2020-12-16T17:24:43+08:00">2020-12-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-28 16:54:18" itemprop="dateModified" datetime="2021-01-28T16:54:18+08:00">2021-01-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <img src="http://ww1.sinaimg.cn/large/bec9bff2gy1glptqgll6ej2098048a9w.jpg" alt="undefined" style="zoom: 150%;">

<a id="more"></a> 

<h1 id="Scala-类型"><a href="#Scala-类型" class="headerlink" title="Scala 类型"></a>Scala 类型</h1><p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gls6d1a89cj20of0gtta1.jpg" alt="1.png"></p>
<p>Scala中，所有的值都是类对象，而所有的类，包括值类型，都最终继承自一个统一的根类型Any。统一类型，是Scala的又一大特点。更特别的是，Scala中还定义了几个底层类（Bottom Class），比如Null和Nothing。</p>
<ol>
<li><p>Null是所有引用类型的子类型，而Nothing是所有类型的子类型。Null类只有一个实例对象，null，类似于Java中的null引用。null可以赋值给任意引用类型，但是不能赋值给值类型。</p>
</li>
<li><p>Nothing，可以作为没有正常返回值的方法的返回类型，非常直观的告诉你这个方法不会正常返回，而且由于Nothing是其他任意类型的子类，他还能跟要求返回值的方法兼容。</p>
</li>
<li><p>Unit类型用来标识过程，也就是没有明确返回值的函数。 由此可见，Unit类似于Java里的void。Unit只有一个实例，()，这个实例也没有实质的意义。</p>
</li>
</ol>
<h1 id="Option-Some-None"><a href="#Option-Some-None" class="headerlink" title="Option Some None"></a>Option Some None</h1><p><strong>设计目的</strong>：避免使用null</p>
<p>大多数语言都有一个特殊的关键字或者对象来表示一个对象引用的是“无”，在Java，它是null。在Java 里，null 是一个关键字，不是一个对象，所以对它调用任何方法都是非法的。但是这对语言设计者来说是一件令人疑惑的选择。为什么要在程序员希望返回一个对象的时候返回一个关键字呢？</p>
<p><strong>Scala鼓励在变量和函数返回值可能不会引用任何值的时候使用Option类型。在没有值的时候，使用None，这是Option的一个子类。如果有值可以引用，就使用Some来包含这个值。Some也是Option的子类。</strong><br> None被声明为一个对象，而不是一个类，因为我们只需要它的一个实例。这样，它多少有点像null关键字，但它却是一个实实在在的，有方法的对象。</p>
<p>Option类型的值通常作为Scala集合类型（List,Map等）操作的返回类型。比如Map的get方法：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> capitals = <span class="type">Map</span>(<span class="string">"France"</span>-&gt;<span class="string">"Paris"</span>, <span class="string">"Japan"</span>-&gt;<span class="string">"Tokyo"</span>, <span class="string">"China"</span>-&gt;<span class="string">"Beijing"</span>)</span><br><span class="line">capitals: scala.collection.immutable.<span class="type">Map</span>[<span class="type">String</span>,<span class="type">String</span>] = <span class="type">Map</span>(<span class="type">France</span> -&gt; <span class="type">Paris</span>, <span class="type">Japan</span> -&gt; <span class="type">Tokyo</span>, <span class="type">China</span> -&gt; <span class="type">Beijing</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; capitals get <span class="string">"France"</span></span><br><span class="line">res0: <span class="type">Option</span>[<span class="type">String</span>] = <span class="type">Some</span>(<span class="type">Paris</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; capitals get <span class="string">"North Pole"</span></span><br><span class="line">res1: <span class="type">Option</span>[<span class="type">String</span>] = <span class="type">None</span></span><br></pre></td></tr></table></figure>

<p>Option有两个子类别，Some和None。当程序回传Some的时候，代表这个函式成功地给了你一个String，而你可以透过get()函数拿到那个String，如果程序返回的是None，则代表没有字符串可以给你。</p>
<p>在返回None，也就是没有String给你的时候，如果你还硬要调用get()来取得 String 的话，Scala一样是会抛出一个<code>NoSuchElementException</code>异常给你的。</p>
<p>我们也可以选用另外一个方法，<code>getOrElse</code>。这个方法在这个Option是Some的实例时返回对应的值，而在是None的实例时返回传入的参数。换句话说，传入<code>getOrElse</code>的参数实际上是默认返回值。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; capitals get <span class="string">"North Pole"</span> get</span><br><span class="line">warning: there was one feature warning; re-run <span class="keyword">with</span> -feature <span class="keyword">for</span> details</span><br><span class="line">java.util.<span class="type">NoSuchElementException</span>: <span class="type">None</span>.get</span><br><span class="line">  at scala.<span class="type">None</span>$.get(<span class="type">Option</span>.scala:<span class="number">347</span>)</span><br><span class="line">  at scala.<span class="type">None</span>$.get(<span class="type">Option</span>.scala:<span class="number">345</span>)</span><br><span class="line">  ... <span class="number">33</span> elided</span><br><span class="line"></span><br><span class="line">scala&gt; capitals get <span class="string">"France"</span> get</span><br><span class="line">warning: there was one feature warning; re-run <span class="keyword">with</span> -feature <span class="keyword">for</span> details</span><br><span class="line">res3: <span class="type">String</span> = <span class="type">Paris</span></span><br><span class="line"></span><br><span class="line">scala&gt; (capitals get <span class="string">"North Pole"</span>) getOrElse <span class="string">"Oops"</span></span><br><span class="line">res7: <span class="type">String</span> = <span class="type">Oops</span></span><br><span class="line"></span><br><span class="line">scala&gt; capitals get <span class="string">"France"</span> getOrElse <span class="string">"Oops"</span></span><br><span class="line">res8: <span class="type">String</span> = <span class="type">Paris</span></span><br></pre></td></tr></table></figure>

<p>通过模式匹配分离可选值，如果匹配的值是Some的话，将Some里的值抽出赋给x变量：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">showCapital</span></span>(x: <span class="type">Option</span>[<span class="type">String</span>]) = x <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Some</span>(s) =&gt; s</span><br><span class="line">    <span class="keyword">case</span> <span class="type">None</span> =&gt; <span class="string">"?"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在Scala里Option[T]实际上是一个容器，就像数组或是List一样，你可以把他看成是一个可能有零到一个元素的List。<br> 当你的Option里面有东西的时候，这个List的长度是1（也就是 Some），而当你的Option里没有东西的时候，它的长度是0（也就是 None）。</p>
<h2 id="Tips4For-循环"><a href="#Tips4For-循环" class="headerlink" title="Tips4For 循环"></a>Tips4For 循环</h2><p>如果我们把Option当成一般的List来用，并且用一个for循环来走访这个Option的时候，如果Option是None，那这个for循环里的程序代码自然不会执行，于是我们就达到了<strong>不用检查Option是否为None这件事</strong>。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> map1 = <span class="type">Map</span>(<span class="string">"key1"</span> -&gt; <span class="string">"value1"</span>)</span><br><span class="line">map1: scala.collection.immutable.<span class="type">Map</span>[<span class="type">String</span>,<span class="type">String</span>] = <span class="type">Map</span>(key1 -&gt; value1)</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> value1 = map1.get(<span class="string">"key1"</span>)</span><br><span class="line">value1: <span class="type">Option</span>[<span class="type">String</span>] = <span class="type">Some</span>(value1)</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> value2 = map1.get(<span class="string">"key2"</span>)</span><br><span class="line">value2: <span class="type">Option</span>[<span class="type">String</span>] = <span class="type">None</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="function"><span class="keyword">def</span> <span class="title">printContentLength</span></span>(x: <span class="type">Option</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">     |   <span class="keyword">for</span> (c &lt;- x)&#123;</span><br><span class="line">     |     println(c.length)</span><br><span class="line">     |   &#125;</span><br><span class="line">     | &#125;</span><br><span class="line">printContentLength: (x: <span class="type">Option</span>[<span class="type">String</span>])<span class="type">Unit</span></span><br><span class="line"></span><br><span class="line">scala&gt; printContentLength(value1)</span><br><span class="line"><span class="number">6</span></span><br><span class="line"></span><br><span class="line">scala&gt; printContentLength(value2)</span><br></pre></td></tr></table></figure>

<h2 id="Tips4map操作"><a href="#Tips4map操作" class="headerlink" title="Tips4map操作"></a>Tips4map操作</h2><p>在函数式编程中有一个核心的概念之一是转换，所以大部份支持函数式编程语言，都支持一种叫map()的动作，这个动作是可以帮你把某个容器的内容，套上一些动作之后，变成另一个新的容器。<br> 现在我们考虑如何用Option的map方法实现<code>length: xxx</code>的输出形式：</p>
<blockquote>
<p>先算出 Option 容器内字符串的长度<br> 然后在长度前面加上 “length: “ 字样<br> 最后把容器走访一次，印出容器内的东西</p>
</blockquote>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; value1.map(_.length).map(<span class="string">"length: "</span> + _).foreach(println)</span><br><span class="line">length: <span class="number">6</span></span><br><span class="line"></span><br><span class="line">scala&gt; value1.map(<span class="string">"length: "</span> + _.length).foreach(println)</span><br><span class="line">length: <span class="number">6</span></span><br></pre></td></tr></table></figure>

<p>透过这样「转换」的方法，我们一样可以达成想要的效果，而且同样不用去做「是否为 None」的判断。</p>
<h1 id="Scala-Java-Map"><a href="#Scala-Java-Map" class="headerlink" title="Scala Java Map"></a>Scala Java Map</h1><h2 id="Scala内部Map转换："><a href="#Scala内部Map转换：" class="headerlink" title="Scala内部Map转换："></a>Scala内部Map转换：</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> im: <span class="type">Map</span>[<span class="type">Int</span>, <span class="type">String</span>] = scala.collection.immutable.<span class="type">Map</span>(<span class="number">1</span>-&gt;<span class="string">"one"</span>,<span class="number">2</span>-&gt;<span class="string">"two"</span>) <span class="comment">//不可变map</span></span><br><span class="line">  <span class="keyword">val</span> imh: <span class="type">HashMap</span>[<span class="type">Int</span>, <span class="type">String</span>] = scala.collection.immutable.<span class="type">HashMap</span>(<span class="number">1</span>-&gt;<span class="string">"one"</span>,<span class="number">2</span>-&gt;<span class="string">"two"</span>) <span class="comment">//不可变hashmap</span></span><br><span class="line">  <span class="keyword">val</span> mu: mutable.<span class="type">Map</span>[<span class="type">Int</span>, <span class="type">String</span>] = scala.collection.mutable.<span class="type">Map</span>(<span class="number">1</span>-&gt;<span class="string">"one"</span>,<span class="number">2</span>-&gt;<span class="string">"two"</span>) <span class="comment">//可变map</span></span><br><span class="line">  println(im,manOf(im))</span><br><span class="line">  println(imh,manOf(imh))</span><br><span class="line">  println(mu,manOf(mu))</span><br><span class="line"></span><br><span class="line">  <span class="comment">// mutable.Map 2 immutable.Map</span></span><br><span class="line">  <span class="keyword">val</span> mui: <span class="type">Map</span>[<span class="type">Int</span>, <span class="type">String</span>] = mu.toMap</span><br><span class="line">  println(mui,manOf(mui))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// immutable.Map 2 mutable.Map</span></span><br><span class="line">  <span class="keyword">val</span> immu: mutable.<span class="type">Map</span>[<span class="type">Int</span>, <span class="type">String</span>] = scala.collection.mutable.<span class="type">Map</span>(im.toSeq: _*)</span><br><span class="line">  println(immu,manOf(immu))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> imhmu: mutable.<span class="type">Map</span>[<span class="type">Int</span>, <span class="type">String</span>] = scala.collection.mutable.<span class="type">Map</span>(imh.toSeq: _*)</span><br><span class="line">  println(imhmu,manOf(imhmu))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(Map(1 -&gt; one, 2 -&gt; two),scala.collection.immutable.Map[Int, java.lang.String])</span><br><span class="line">(Map(1 -&gt; one, 2 -&gt; two),scala.collection.immutable.HashMap[Int, java.lang.String])</span><br><span class="line">(Map(2 -&gt; two, 1 -&gt; one),scala.collection.mutable.Map[Int, java.lang.String])</span><br><span class="line"></span><br><span class="line">(Map(2 -&gt; two, 1 -&gt; one),scala.collection.immutable.Map[Int, java.lang.String])</span><br><span class="line"></span><br><span class="line">(Map(2 -&gt; two, 1 -&gt; one),scala.collection.mutable.Map[Int, java.lang.String])</span><br><span class="line">(Map(2 -&gt; two, 1 -&gt; one),scala.collection.mutable.Map[Int, java.lang.String])</span><br></pre></td></tr></table></figure>

<h2 id="Java中-把Java-Map-转化成-Scala-Map"><a href="#Java中-把Java-Map-转化成-Scala-Map" class="headerlink" title="Java中 把Java Map 转化成 Scala Map"></a>Java中 把Java Map 转化成 Scala Map</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    HashMap&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;String, String&gt;() &#123;</span><br><span class="line">        &#123;</span><br><span class="line">            put(<span class="string">"1"</span>, <span class="string">"2"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    scala.collection.mutable.Map&lt;String,String&gt; mapTest = JavaConverters.mapAsScalaMapConverter(map).asScala();</span><br><span class="line">    Object objTest = Map$.MODULE$.&lt;String,String&gt;newBuilder().$plus$plus$eq(mapTest.toSeq());</span><br><span class="line">    Object resultTest = ((scala.collection.mutable.Builder) objTest).result();</span><br><span class="line">    scala.collection.immutable.Map&lt;String,String&gt; resultTest2 = (scala.collection.immutable.Map)resultTest;</span><br><span class="line">    System.out.println(resultTest2.keySet());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>稍微有点鸡肋，代码看不懂，笑</p>
<h2 id="Scala中的双向转换"><a href="#Scala中的双向转换" class="headerlink" title="Scala中的双向转换"></a>Scala中的双向转换</h2><p>Scala提供了大量的方法来隐式转换所有主要的Java和Scala容器类型。其中提供了如下的双向类型转换：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Iterator               &lt;=&gt;     java.util.Iterator</span><br><span class="line">Iterator               &lt;=&gt;     java.util.Enumeration</span><br><span class="line">Iterable               &lt;=&gt;     java.lang.Iterable</span><br><span class="line">Iterable               &lt;=&gt;     java.util.Collection</span><br><span class="line">mutable.Buffer         &lt;=&gt;     java.util.List</span><br><span class="line">mutable.Set            &lt;=&gt;     java.util.Set</span><br><span class="line">mutable.Map            &lt;=&gt;     java.util.Map</span><br><span class="line">mutable.ConcurrentMap  &lt;=&gt;     java.util.concurrent.ConcurrentMap</span><br></pre></td></tr></table></figure>

<p>使用这些转换很简单，只需从JavaConverters对象中import它们即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; import collection.JavaConverters._</span><br><span class="line">import collection.JavaConverters._</span><br></pre></td></tr></table></figure>

<p>import之后，通过扩展方法 asScala 和 asJava 就可以在Scala容器和与之对应的Java容器之间进行隐式转换了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; import collection.mutable._</span><br><span class="line">import collection.mutable._</span><br><span class="line"></span><br><span class="line">scala&gt; val jul: java.util.List[Int] = ArrayBuffer(1, 2, 3).asJava</span><br><span class="line">jul: java.util.List[Int] = [1, 2, 3]</span><br><span class="line"></span><br><span class="line">scala&gt; val buf: Seq[Int] = jul.asScala</span><br><span class="line">buf: scala.collection.mutable.Seq[Int] = ArrayBuffer(1, 2, 3)</span><br><span class="line"></span><br><span class="line">scala&gt; val m: java.util.Map[String, Int] = HashMap(&quot;abc&quot; -&gt; 1, &quot;hello&quot; -&gt; 2).asJava</span><br><span class="line">m: java.util.Map[String,Int] = &#123;abc=1, hello=2&#125;</span><br></pre></td></tr></table></figure>

<p>还有一些Scala容器类型可以转换成对应的Java类型，但是并没有将相应的Java类型转换成Scala类型的能力，它们是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Seq           =&gt;    java.util.List</span><br><span class="line">mutable.Seq   =&gt;    java.util.List</span><br><span class="line">Set           =&gt;    java.util.Set</span><br><span class="line">Map           =&gt;    java.util.Map</span><br></pre></td></tr></table></figure>

<p>因为Java并未区分可变容器不可变容器类型，所以，虽然能将<code>scala.immutable.List</code>转换成<code>java.util.List</code>，但所有的修改操作都会抛出“UnsupportedOperationException”。参见下例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; val jul = List(1, 2, 3).asJava</span><br><span class="line">jul: java.util.List[Int] = [1, 2, 3]</span><br><span class="line"></span><br><span class="line">scala&gt; jul.add(7)</span><br><span class="line">java.lang.UnsupportedOperationException</span><br><span class="line">  at java.util.AbstractList.add(AbstractList.java:148)</span><br></pre></td></tr></table></figure>

<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>完整的Java Map =&gt; Scala mutbale Map =&gt; Scala Immutable Map =&gt; Option =&gt; 模式匹配得到结果</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// Java Map =&gt; mutable.Map =&gt; Scala Map</span></span><br><span class="line">  <span class="keyword">import</span> scala.collection.<span class="type">JavaConversions</span>._</span><br><span class="line">  <span class="keyword">val</span> javaMap: util.<span class="type">Map</span>[<span class="type">String</span>, <span class="type">String</span>] = <span class="keyword">new</span> util.<span class="type">HashMap</span>[<span class="type">String</span>, <span class="type">String</span>]()</span><br><span class="line">  javaMap.put(<span class="string">"1"</span>,<span class="string">"2"</span>)</span><br><span class="line">  <span class="keyword">for</span> (m &lt;- javaMap) &#123;</span><br><span class="line">    println(m)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> scalaMuMap: mutable.<span class="type">Map</span>[<span class="type">String</span>, <span class="type">String</span>] = javaMap.asScala</span><br><span class="line">  <span class="comment">// Predef里定义的map类型是一个类型别名，实际类型是immutable.Map</span></span><br><span class="line">  <span class="keyword">val</span> scalaImmuMap: <span class="type">Predef</span>.<span class="type">Map</span>[<span class="type">String</span>, <span class="type">String</span>] = scalaMuMap.toMap</span><br><span class="line">  <span class="keyword">val</span> maybeString: <span class="type">Option</span>[<span class="type">String</span>] = scalaImmuMap.get(<span class="string">"1"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> show = (x: <span class="type">Option</span>[<span class="type">String</span>]) =&gt; x <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Some</span>(str) =&gt; str</span><br><span class="line">    <span class="keyword">case</span> <span class="type">None</span> =&gt; <span class="string">"?"</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> str: <span class="type">String</span> = show(maybeString)</span><br><span class="line"></span><br><span class="line">  println(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Scala-mutable-Map-Test"><a href="#Scala-mutable-Map-Test" class="headerlink" title="Scala mutable Map Test"></a>Scala mutable Map Test</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 测试可变Map返回值类型 确认是Option</span></span><br><span class="line"><span class="keyword">val</span> muMapTest: mutable.<span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = mutable.<span class="type">Map</span>(<span class="string">"Alice"</span> -&gt; <span class="number">10</span>, <span class="string">"Bob"</span> -&gt; <span class="number">20</span>, <span class="string">"Kotlin"</span> -&gt; <span class="number">30</span>)</span><br><span class="line">muMapTest(<span class="string">"Alice"</span>) = <span class="number">99</span></span><br><span class="line">println(muMapTest(<span class="string">"Alice"</span>))</span><br><span class="line">muMapTest += (<span class="string">"Bob"</span> -&gt; <span class="number">98</span>)</span><br><span class="line">println(muMapTest) <span class="comment">// Map(Bob -&gt; 98, Kotlin -&gt; 30, Alice -&gt; 99)</span></span><br><span class="line">muMapTest -= (<span class="string">"Alice"</span>, <span class="string">"Kotlin"</span>)</span><br><span class="line">println(muMapTest) <span class="comment">// Map(Bob -&gt; 98)</span></span><br><span class="line">println(muMapTest.get(<span class="string">"Bob"</span>)) <span class="comment">// Some(98)</span></span><br></pre></td></tr></table></figure>

<h2 id="More-4-Scala-Map-Action"><a href="#More-4-Scala-Map-Action" class="headerlink" title="More 4 Scala Map Action"></a>More 4 Scala Map Action</h2><p>map1 ++ map2 (类似于Java Map的 putAll)</p>
<h1 id="Scala-的-Seq"><a href="#Scala-的-Seq" class="headerlink" title="Scala 的 Seq"></a>Scala 的 Seq</h1><p>Scala的 Seq将是Java的List，Scala 的 List将是Java的 LinkedList。</p>
<p>Seq是一个trait，它相当于Java的接口，但相当于即将到来的防御者方法。 </p>
<p>Scala的List是一个抽象类，由Nil和::扩展，这是List的具体实现。</p>
<p>所以，在Java的List是一个接口，Scala的List是一个实现。</p>
<p>除此之外，Scala的List是不可变的，这不是LinkedList的情况。事实上，Java没有等价的不可变集合(只读的东西只保证新的对象不能改变，但你仍然可以改变旧的，因此，“只读”一个)。<br>Scala的List是由编译器和库高度优化的，它是函数式编程中的基本数据类型。然而，它有限制，它不足以并行编程。这些天，Vector是一个比List更好的选择，但习惯是很难打破。<br>Seq是一个很好的泛化序列，所以如果你编程到接口，你应该使用它。注意，实际上有三个：collection.Seq，collection.mutable.Seq和collection.immutable.Seq，它是后一个是“默认”导入到范围。<br>还有GenSeq和ParSeq。后面的方法在可能的情况下并行运行，前者是Seq和ParSeq的父代，这是当代码的并行性无关紧要的合适的泛化。它们都是相对新引入的，因此人们不会使用它们。</p>
<h1 id="Scala-match"><a href="#Scala-match" class="headerlink" title="Scala match"></a>Scala match</h1><h2 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h2><p>模式匹配语法中，采用 match 关键字声明，每个分支采用 case 关键字进行声明，当需要匹配时， 会从第一个 case 分支开始，如果匹配成功，那么执行对应的逻辑代码，如果匹配不成功，继续执行下 一个分支进行判断。如果所有 case 都不匹配，那么会执行 case _ 分支，类似于 Java 中 default 语句。</p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ol>
<li><p>如果所有 case 都不匹配，那么会执行 case _ 分支，类似于 Java 中 default 语句 </p>
</li>
<li><p>如果所有 case 都不匹配，又没有写 case _ 分支，那么会抛出 MatchError </p>
</li>
<li><p>每个 case 中，不用 break 语句，自动中断 case </p>
</li>
<li><p>可以在 match 中使用其它类型，而不仅仅是字符 </p>
</li>
<li><p>=&gt; 等价于 java swtich 的 : </p>
</li>
<li><p>=&gt; 后面的代码块到下一个 case， 是作为一个整体执行，可以使用{} 扩起来，也可以不扩</p>
</li>
</ol>
<h2 id="守卫"><a href="#守卫" class="headerlink" title="守卫"></a>守卫</h2><p>如果想要表达匹配某个范围的数据，那么就需要在模式匹配中增加守卫条件</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">MatchIfDemo01</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">for</span> (ch &lt;- <span class="string">"+-3!"</span>) &#123; <span class="comment">//是对"+-3!" 遍历</span></span><br><span class="line">      <span class="keyword">var</span> sign = <span class="number">0</span></span><br><span class="line">      <span class="keyword">var</span> digit = <span class="number">0</span></span><br><span class="line">      ch <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> '+' <span class="keyword">if</span> ch.toString.equals(<span class="string">"3"</span>) =&gt; sign = <span class="number">1</span></span><br><span class="line">        <span class="keyword">case</span> '-' =&gt; sign = <span class="number">-1</span></span><br><span class="line">        <span class="comment">// 说明..</span></span><br><span class="line">        <span class="comment">// 如果 case 后有 条件守卫即 if ,那么这时的 _ 不是表示默认匹配</span></span><br><span class="line">        <span class="comment">// 表示忽略 传入 的 ch</span></span><br><span class="line">        <span class="keyword">case</span> _ <span class="keyword">if</span> ch.toString.equals(<span class="string">"3"</span>) =&gt; digit = <span class="number">3</span></span><br><span class="line">        <span class="keyword">case</span> _ <span class="keyword">if</span> (ch &gt; <span class="number">1110</span> || ch &lt; <span class="number">120</span>) =&gt; println(<span class="string">"ch &gt; 10"</span>)</span><br><span class="line">        <span class="keyword">case</span> _ =&gt; sign = <span class="number">2</span></span><br><span class="line">      &#125;</span><br><span class="line">      println(ch + <span class="string">" "</span> + sign + <span class="string">" "</span> + digit)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面这段代码值得一提的是ch是<code>‘+’</code>的时候，第一次匹配会匹配上 第一个判断，因为没有匹配上，所以接下来会匹配第三个，没有匹配上，匹配第四个，匹配上了，直接跳出。</p>
<h2 id="变量名"><a href="#变量名" class="headerlink" title="变量名"></a>变量名</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> ch = '<span class="type">U</span>'</span><br><span class="line">ch <span class="keyword">match</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> '+' =&gt; println(<span class="string">"ok~"</span>)</span><br><span class="line">  <span class="comment">// 下面 case mychar 含义是 mychar = ch   下面这个case就啥都可以匹配上.这样不好</span></span><br><span class="line">  <span class="keyword">case</span> mychar =&gt; println(<span class="string">"ok~"</span> + mychar)</span><br><span class="line">  <span class="keyword">case</span> _ =&gt; println (<span class="string">"ok~~"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">val</span> ch1 = '+'</span><br><span class="line"><span class="comment">//match 是一个表达式，因此可以有返回值</span></span><br><span class="line"><span class="comment">//返回值就是匹配到的代码块的最后一句话的值</span></span><br><span class="line"><span class="keyword">val</span> res1 = ch1 <span class="keyword">match</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> '+' =&gt; &#123;</span><br><span class="line">    print(<span class="string">"使用这种方式,case里的最后一行就会返回结果给变量res,这种方式好,"</span>)</span><br><span class="line">    ch1 + <span class="string">" hello "</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 下面 case mychar 含义是 mychar = ch</span></span><br><span class="line">  <span class="keyword">case</span> _ =&gt; println (<span class="string">"ok~~"</span>)</span><br><span class="line">&#125;</span><br><span class="line">println(<span class="string">"res="</span> + res1)</span><br></pre></td></tr></table></figure>

<h2 id="类型匹配"><a href="#类型匹配" class="headerlink" title="类型匹配"></a>类型匹配</h2><p>可以匹配 对象的任意类型，这样做避免了使用 isInstanceOf 和 asInstanceOf 方法</p>
<p>类型匹配注意事项 </p>
<ol>
<li><p>Map[String, Int] 和 Map[Int, String]是两种不同的类型，其它类推。 </p>
</li>
<li><p>在进行类型匹配时，编译器会预先检测是否有可能的匹配，如果没有则报错.</p>
</li>
</ol>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> obj = <span class="number">10</span></span><br><span class="line">    obj <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> a:<span class="type">Int</span> =&gt; a</span><br><span class="line"><span class="comment">//        编译报错</span></span><br><span class="line"><span class="comment">//      case b:Map[String, Int] =&gt; "map集合"</span></span><br><span class="line">      <span class="keyword">case</span> _ =&gt; <span class="string">"啥也不是"</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>如果 case _ 出现在 match 中间，则表示隐藏变量名，即不使用,而不是表示默认匹配</li>
</ol>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> a = <span class="number">1</span></span><br><span class="line"><span class="comment">//说明 obj 实例的类型 根据 a 的值来返回</span></span><br><span class="line"><span class="keyword">val</span> obj1: <span class="type">Any</span> = <span class="keyword">if</span> (a == <span class="number">1</span>) <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">2</span>) <span class="string">"2"</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">3</span>) <span class="type">BigInt</span>(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">4</span>) <span class="type">Map</span>(<span class="string">"aa"</span> -&gt; <span class="number">1</span>)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">5</span>) <span class="type">Map</span>(<span class="number">1</span> -&gt; <span class="string">"aa"</span>)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">6</span>)<span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">7</span>)<span class="type">Array</span>(<span class="string">"aa"</span>, <span class="number">1</span>)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">8</span>)<span class="type">Array</span>(<span class="string">"aa"</span>)</span><br><span class="line"><span class="comment">//说明</span></span><br><span class="line"><span class="comment">//1. 根据 obj 的类型来匹配</span></span><br><span class="line"><span class="comment">// 返回值</span></span><br><span class="line"><span class="keyword">val</span> result = obj1 <span class="keyword">match</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> a: <span class="type">Int</span> =&gt; a</span><br><span class="line">  <span class="keyword">case</span> b: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] =&gt; <span class="string">"对象是一个字符串-数字的 Map 集合"</span></span><br><span class="line">  <span class="keyword">case</span> c: <span class="type">Map</span>[<span class="type">Int</span>, <span class="type">String</span>] =&gt; <span class="string">"对象是一个数字-字符串的 Map 集合"</span></span><br><span class="line">  <span class="keyword">case</span> d: <span class="type">Array</span>[<span class="type">String</span>] =&gt; d <span class="comment">//"对象是一个字符串数组"</span></span><br><span class="line">  <span class="keyword">case</span> e: <span class="type">Array</span>[<span class="type">Int</span>] =&gt; <span class="string">"对象是一个数字数组"</span></span><br><span class="line">  <span class="keyword">case</span> _: <span class="type">BigInt</span> =&gt; <span class="type">Int</span>.<span class="type">MaxValue</span> <span class="comment">// 隐藏了变量名</span></span><br><span class="line">  <span class="keyword">case</span> _ =&gt; <span class="string">"啥也不是"</span></span><br><span class="line">&#125;</span><br><span class="line">println(result)</span><br></pre></td></tr></table></figure>

<h2 id="匹配数组"><a href="#匹配数组" class="headerlink" title="匹配数组"></a>匹配数组</h2><ol>
<li>Array(0) 匹配只有一个元素且为 0 的数组。</li>
<li>Array(x,y) 匹配数组有两个元素，并将两个元素赋值为 x 和 y。当然可以依次类推 Array(x,y,z) 匹配数组有 3 个元素的等等….</li>
<li>Array(0,_*) 匹配数组以 0 开始</li>
</ol>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> arrs: <span class="type">Array</span>[<span class="type">Array</span>[<span class="type">Int</span>]] =<span class="type">Array</span>(<span class="type">Array</span>(<span class="number">0</span>), <span class="type">Array</span>(<span class="number">1</span>, <span class="number">0</span>), <span class="type">Array</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>),</span><br><span class="line">  <span class="type">Array</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>), <span class="type">Array</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (arr &lt;- arrs ) &#123;</span><br><span class="line">  <span class="keyword">val</span> result = arr <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Array</span>(<span class="number">0</span>) =&gt; <span class="string">"0"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Array</span>(x, y) =&gt; x + <span class="string">"="</span> + y</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Array</span>(<span class="number">0</span>, _*) =&gt; <span class="string">"以 0 开头和数组"</span></span><br><span class="line">    <span class="keyword">case</span> _ =&gt; <span class="string">"什么集合都不是"</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// result = 0</span></span><br><span class="line">  <span class="comment">// result = 1 = 0</span></span><br><span class="line">  <span class="comment">// result = 以 0 开头和数组</span></span><br><span class="line">  <span class="comment">// result = 什么集合都不是</span></span><br><span class="line">  <span class="comment">// result = 什么集合都不是</span></span><br><span class="line">  println(<span class="string">"result = "</span> + result)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//给你一个数组集合，如果该数组时 Array(10,20) , 请使用默认匹配，返回 Array(20,10)</span></span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable.<span class="type">ArrayBuffer</span></span><br><span class="line"><span class="keyword">val</span> arrs2 = <span class="type">Array</span>(<span class="type">Array</span>(<span class="number">0</span>),<span class="type">Array</span>(<span class="number">1</span>, <span class="number">0</span>), <span class="type">Array</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>),</span><br><span class="line">  <span class="type">Array</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>), <span class="type">Array</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line"><span class="keyword">for</span> (arr &lt;- arrs2 ) &#123;</span><br><span class="line">  <span class="keyword">val</span> result = arr <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="comment">//caseArray(0) =&gt; "0"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Array</span>(x,y)=&gt;<span class="type">ArrayBuffer</span>(y,x) <span class="comment">//?ArrayB(y,x)</span></span><br><span class="line">    <span class="comment">//caseArray(0, _*) =&gt; "以 0 开头和数组"</span></span><br><span class="line">    <span class="keyword">case</span> _ =&gt; <span class="string">"不处理~~"</span></span><br><span class="line">  &#125;</span><br><span class="line">  println(result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="匹配列表"><a href="#匹配列表" class="headerlink" title="匹配列表"></a>匹配列表</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//  Nil 表示空列表  0 :: 连接上一个空列表 表示List中只有0</span></span><br><span class="line">    <span class="comment">//  println(s"x : $x  y: $y ")  拼接字符串,必须以s 开头, $ 取值</span></span><br><span class="line">    <span class="keyword">for</span> (list &lt;-<span class="type">Array</span>(<span class="type">List</span>(<span class="number">0</span>), <span class="type">List</span>(<span class="number">1</span>, <span class="number">0</span>), <span class="type">List</span>(<span class="number">88</span>), <span class="type">List</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="type">List</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>))) &#123;</span><br><span class="line">      <span class="keyword">val</span> result = list <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span> :: <span class="type">Nil</span> =&gt; <span class="string">"0"</span> <span class="comment">//</span></span><br><span class="line">        <span class="keyword">case</span> x :: y :: <span class="type">Nil</span> =&gt; x + <span class="string">" "</span> + y <span class="comment">//</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span> :: tail =&gt; <span class="string">"0 ..."</span> <span class="comment">//</span></span><br><span class="line">        <span class="keyword">case</span> x :: <span class="type">Nil</span> =&gt; x</span><br><span class="line">        <span class="keyword">case</span> _ =&gt; <span class="string">"something else"</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="comment">//      0</span></span><br><span class="line"><span class="comment">//      1 0</span></span><br><span class="line"><span class="comment">//      88</span></span><br><span class="line"><span class="comment">//      0 ...</span></span><br><span class="line"><span class="comment">//      something else</span></span><br><span class="line">      println(result)</span><br><span class="line"></span><br><span class="line">      println(<span class="string">"=================================="</span>)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">val</span> site: immutable.<span class="type">Seq</span>[<span class="type">String</span>] = <span class="string">"Runoob"</span> :: (<span class="string">"Google"</span> :: (<span class="string">"Baidu"</span> :: <span class="type">Nil</span>))</span><br><span class="line">      <span class="keyword">val</span> site2 = site</span><br><span class="line">      site.foreach(println)</span><br><span class="line">      <span class="keyword">val</span> nums = <span class="number">1</span> :: (<span class="number">2</span> :: (<span class="number">3</span> :: (<span class="number">4</span> :: <span class="type">Nil</span>)))</span><br><span class="line">      <span class="keyword">val</span> nums2: <span class="type">List</span>[<span class="type">Int</span>] = nums</span><br><span class="line">      nums.foreach(println)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 二维列表</span></span><br><span class="line">      <span class="keyword">val</span> dim = (<span class="number">1</span> :: (<span class="number">0</span> :: (<span class="number">0</span> :: <span class="type">Nil</span>))) ::</span><br><span class="line">        (<span class="number">0</span> :: (<span class="number">1</span> :: (<span class="number">0</span> :: <span class="type">Nil</span>))) ::</span><br><span class="line">        (<span class="number">0</span> :: (<span class="number">0</span> :: (<span class="number">1</span> :: <span class="type">Nil</span>))) :: <span class="type">Nil</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">val</span> dim2: <span class="type">List</span>[<span class="type">List</span>[<span class="type">Int</span>]] = dim</span><br><span class="line">      dim.foreach(println)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>补充一部分列表操作：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> reslist0: <span class="type">List</span>[<span class="type">String</span>] = <span class="string">"A"</span>::<span class="string">"B"</span>::<span class="type">Nil</span>  <span class="comment">// List(A, B)</span></span><br><span class="line"><span class="keyword">val</span> reslist1: <span class="type">List</span>[<span class="type">String</span>] = <span class="string">"C"</span>+:<span class="string">"D"</span>+:<span class="type">Nil</span>  <span class="comment">// List(C, D)</span></span><br><span class="line"><span class="keyword">val</span> reslist2: <span class="type">List</span>[<span class="type">String</span>] = <span class="type">Nil</span>:+<span class="string">"E"</span>:+<span class="string">"F"</span>  <span class="comment">// List(E, F)</span></span><br><span class="line">println(reslist0)</span><br><span class="line">println(reslist1)</span><br><span class="line">println(reslist2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> reslist3 = reslist0 ++ reslist1 <span class="comment">// List(A, B, C, D)</span></span><br><span class="line">println(reslist3)</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> reslist4 = reslist0 ::: reslist1 <span class="comment">// List(A, B, C, D)</span></span><br><span class="line">println(reslist4)</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> reslist5 = reslist0 :: reslist1 <span class="comment">// List(List(A, B), C, D)</span></span><br><span class="line">println(reslist5)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>::</code> 该方法被称为cons，意为构造，向队列的头部追加数据，创造新的列表。用法为 <code>x::list</code>,其中<code>x</code>为加入到头部的元素，无论<code>x</code>是列表与否，它都只将成为新生成列表的第一个元素，也就是说新生成的列表长度为list的长度＋1(btw, <code>x::list</code>等价于<code>list.::(x)</code>)</li>
<li><code>:+</code>和<code>+:</code> 两者的区别在于<code>:+</code>方法用于在尾部追加元素，<code>+:</code>方法用于在头部追加元素，和<code>::</code>很类似，但是<code>::</code>可以用于pattern match ，而<code>+:</code>则不行. 关于<code>+:</code>和<code>:+</code>,只要记住冒号永远靠近集合类型就OK了。</li>
<li><code>++</code> 该方法用于连接两个集合，<code>list1++list2</code></li>
<li><code>:::</code> 该方法只能用于连接两个List类型的集合</li>
</ul>
<h2 id="匹配元组"><a href="#匹配元组" class="headerlink" title="匹配元组"></a>匹配元组</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">for</span> (pair &lt;- <span class="type">Array</span>((<span class="number">0</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">10</span>, <span class="number">30</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>))) &#123;</span><br><span class="line">      <span class="keyword">val</span> result = pair <span class="keyword">match</span> &#123; <span class="comment">//</span></span><br><span class="line">        <span class="keyword">case</span> (<span class="number">0</span>, _) =&gt; <span class="string">"0 ..."</span> <span class="comment">//</span></span><br><span class="line">        <span class="keyword">case</span> (y, <span class="number">0</span>) =&gt; y <span class="comment">//</span></span><br><span class="line">        <span class="keyword">case</span> (x, y) =&gt; (y, x) <span class="comment">//"匹配到(x,y)" + x + " " + y</span></span><br><span class="line">        <span class="keyword">case</span> _ =&gt; <span class="string">"other"</span> <span class="comment">//.</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="comment">//      0 ...</span></span><br><span class="line"><span class="comment">//      1</span></span><br><span class="line"><span class="comment">//      (30,10)</span></span><br><span class="line"><span class="comment">//      (1,1)</span></span><br><span class="line"><span class="comment">//      other</span></span><br><span class="line">      println(result)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="对象匹配"><a href="#对象匹配" class="headerlink" title="对象匹配"></a>对象匹配</h2><p>基本介绍 对象匹配，什么才算是匹配呢？，规则如下: 1) case 中对象的 unapply 方法(对象提取器)返回 Some 集合则为匹配成功 2) 返回 None 集合则为匹配失败</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 对象匹配</span></span><br><span class="line">  <span class="keyword">val</span> number: <span class="type">Double</span> = <span class="type">Square</span>(<span class="number">5.0</span>)</span><br><span class="line">  number <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Square</span>(n) =&gt; println(<span class="string">"匹配成功 n="</span> + n)</span><br><span class="line">    <span class="keyword">case</span> _ =&gt; println(<span class="string">"nothing matched"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="type">Object</span> <span class="type">Square</span>&#123;</span><br><span class="line">  <span class="comment">// 说明</span></span><br><span class="line">  <span class="comment">// unapply 是对象提取器</span></span><br><span class="line">  <span class="comment">// 接受 z:Double 类型</span></span><br><span class="line">  <span class="comment">// 返回类型是 Optionp[Double]</span></span><br><span class="line">  <span class="comment">// 返回值是 Some(math.sqrt(z)) 返回 z 的开平方的值，并放到Some(x)</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">unapply</span></span>(z:<span class="type">Double</span>): <span class="type">Option</span>[<span class="type">Double</span>] = &#123;</span><br><span class="line">    println(<span class="string">"unapple 被调用 z 是="</span> + z)</span><br><span class="line">    <span class="comment">//Some(z)  unapple 被调用 z 是=25.0 匹配成功 n=25.0</span></span><br><span class="line">    <span class="type">Some</span>(<span class="type">Math</span>.sqrt(z))</span><br><span class="line">    <span class="comment">// None</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(z:<span class="type">Double</span>):<span class="type">Double</span> = z * z</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面代码中的unapply方法就是模式匹配中调用的方法。这个例子可以深刻的理解模式匹配和unapply的关系。</p>
<h3 id="对象匹配的特殊情况"><a href="#对象匹配的特殊情况" class="headerlink" title="对象匹配的特殊情况"></a>对象匹配的特殊情况</h3><ol>
<li><p>当 case 后面的对象提取器方法的参数为多个，则会默认调用 def unapplySeq() 方法 </p>
</li>
<li><p>如果 unapplySeq 返回是 Some，获取其中的值,判断得到的 sequence 中的元素的个数是否是三个 如果是三个，则把三个元素分别取出，赋值给 first，second 和 third </p>
</li>
<li><p>其它的规则不变.</p>
</li>
</ol>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">MatchObjectDemo2</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> namesString = <span class="string">"Alice,Bob,Thomas"</span> <span class="comment">//字符串</span></span><br><span class="line">    <span class="comment">//说明</span></span><br><span class="line">    namesString <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="comment">// 当 执行 case Names(first, second, third)</span></span><br><span class="line">      <span class="comment">// 1. 会调用 unapplySeq（str）,把 "Alice,Bob,Thomas" 传入给 str</span></span><br><span class="line">      <span class="comment">// 2. 如果 返回的是 Some("Alice","Bob","Thomas"),分别给 （first, second, third）</span></span><br><span class="line">      <span class="comment">// 注意，这里的返回的值unapplySeq的个数需要和 case（first, second, third）要一样</span></span><br><span class="line">      <span class="comment">// 3. 如果返回的 None ,表示匹配失败</span></span><br><span class="line">      <span class="keyword">case</span> <span class="type">Names</span>(first, second, third) =&gt; &#123;</span><br><span class="line">          println(<span class="string">"the string contains three people's names"</span>)</span><br><span class="line">        <span class="comment">// 打印字符串</span></span><br><span class="line">        println(<span class="string">s"<span class="subst">$first</span> <span class="subst">$second</span> <span class="subst">$third</span>"</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">case</span> _ =&gt; println(<span class="string">"nothing matched"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//object</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Names</span> </span>&#123;</span><br><span class="line">  <span class="comment">//当构造器是多个参数时，就会触发这个对象提取器</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">unapplySeq</span></span>(str: <span class="type">String</span>): <span class="type">Option</span>[<span class="type">Seq</span>[<span class="type">String</span>]] = &#123;</span><br><span class="line">    <span class="keyword">if</span> (str.contains(<span class="string">","</span>)) <span class="type">Some</span>(str.split(<span class="string">","</span>))</span><br><span class="line">    <span class="keyword">else</span> <span class="type">None</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="变量声明中的模式"><a href="#变量声明中的模式" class="headerlink" title="变量声明中的模式"></a>变量声明中的模式</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 变量声明中的模式匹配</span></span><br><span class="line"><span class="keyword">val</span> (x,y,z) = (<span class="number">1</span>,<span class="number">2</span>,<span class="string">"hello"</span>)</span><br><span class="line">println(<span class="string">"x="</span> + x)</span><br><span class="line"><span class="keyword">val</span> (q,r) = <span class="type">BigInt</span>(<span class="number">10</span>) /% <span class="number">3</span> <span class="comment">// 说明 q = BigInt(10) / 3 r = BigInt(10) % 3</span></span><br><span class="line">println(q,r)</span><br><span class="line"><span class="keyword">val</span> arr = <span class="type">Array</span>(<span class="number">1</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">9</span>)</span><br><span class="line"><span class="keyword">val</span> <span class="type">Array</span>(first,second, _*) = arr <span class="comment">// 提取出arr的其哪两个元素</span></span><br><span class="line">println(first,second)</span><br></pre></td></tr></table></figure>

<h2 id="for表达式中的模式"><a href="#for表达式中的模式" class="headerlink" title="for表达式中的模式"></a>for表达式中的模式</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> map = <span class="type">Map</span>(<span class="string">"A"</span> -&gt; <span class="number">1</span>, <span class="string">"B"</span> -&gt; <span class="number">0</span>, <span class="string">"C"</span> -&gt; <span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> ((k, v) &lt;- map) &#123;</span><br><span class="line">  println(k + <span class="string">" -&gt; "</span> + v) <span class="comment">// 出来三个 key-value ("A"-&gt;1), ("B"-&gt;0), ("C"-&gt;3)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//说明 : 只遍历出 value =0 的 key-value ,其它的过滤掉</span></span><br><span class="line">println(<span class="string">"--------------(k, 0) &lt;- map-------------------"</span>)</span><br><span class="line"><span class="keyword">for</span> ((k, <span class="number">0</span>) &lt;- map) &#123;</span><br><span class="line">  println(k + <span class="string">" --&gt; "</span> + <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//说明, 这个就是上面代码的另外写法, 只是下面的用法灵活和强大</span></span><br><span class="line">println(<span class="string">"--------------(k, v) &lt;- map if v == 0-------------------"</span>)</span><br><span class="line"><span class="keyword">for</span> ((k, v) &lt;- map <span class="keyword">if</span> v &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">  println(k + <span class="string">" ---&gt; "</span> + v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="样例类"><a href="#样例类" class="headerlink" title="样例类"></a>样例类</h2><ol>
<li>样例类仍然是类 </li>
</ol>
<ol start="2">
<li><p>样例类用 case 关键字进行声明。 </p>
</li>
<li><p>样例类是为 模式匹配而优化的类 </p>
</li>
<li><p>构造器中的每一个参数都成为 val——除非它被显式地声明为 var（不建议这样做） </p>
</li>
<li><p>在样例类对应的伴生对象中提供 apply 方法让你不用 new 关键字就能构造出相应的对象 </p>
</li>
<li><p>提供 unapply 方法让模式匹配可以工作 </p>
</li>
<li><p>将自动生成 toString 、equals 、hashCode 和 和 copy 方法(有点类似模板类，直接给生成，供程序员使用) 8) 除上述外，样例类和其他类完全一样。你可以添加方法和字段，扩展它们</p>
</li>
</ol>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">CaseClassDemo02</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//该案例的作用就是体验使用样例类方式进行对象匹配简洁性</span></span><br><span class="line">    <span class="keyword">for</span> (amt &lt;- <span class="type">Array</span>(<span class="type">Dollar2</span>(<span class="number">1000.0</span>), <span class="type">Currency2</span>(<span class="number">1000.0</span>, <span class="string">"RMB"</span>), <span class="type">NoAmount2</span>)) &#123;</span><br><span class="line">      <span class="keyword">val</span> result = amt <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="comment">//说明</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">Dollar2</span>(v) =&gt; <span class="string">"$"</span> + v <span class="comment">// $1000.0</span></span><br><span class="line">        <span class="comment">//说明</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">Currency2</span>(v, u) =&gt; v + <span class="string">" "</span> + u <span class="comment">// 1000.0 RMB</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">NoAmount2</span> =&gt; <span class="string">""</span> <span class="comment">// ""</span></span><br><span class="line">      &#125;</span><br><span class="line">      println(amt + <span class="string">": "</span> + result)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Amount2</span></span></span><br><span class="line"><span class="class"><span class="title">case</span> <span class="title">class</span> <span class="title">Dollar2</span>(<span class="params">value: <span class="type">Double</span></span>) <span class="keyword">extends</span> <span class="title">Amount2</span> <span class="title">//样例类</span></span></span><br><span class="line"><span class="class"><span class="title">case</span> <span class="title">class</span> <span class="title">Currency2</span>(<span class="params">value: <span class="type">Double</span>, unit: <span class="type">String</span></span>) <span class="keyword">extends</span> <span class="title">Amount2</span> <span class="title">//样例类</span></span></span><br><span class="line"><span class="class"><span class="title">case</span> <span class="title">object</span> <span class="title">NoAmount2</span> <span class="keyword">extends</span> <span class="title">Amount2</span> <span class="title">//样例类</span></span></span><br></pre></td></tr></table></figure>

<p>语句的中置表达式</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span>(<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">9</span>) <span class="keyword">match</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> first :: second :: rest =&gt; println(first + <span class="string">" "</span> + second + <span class="string">" "</span> + rest.length + <span class="string">" "</span> + rest)</span><br><span class="line">  <span class="keyword">case</span> _ =&gt; println(<span class="string">"匹配不到..."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：1 3 2 List(5, 9)</p>
<p>什么是中置表达式？1 + 2，这就是一个中置表达式。如果 unapply 方法产出一个元组，你可以在 case 语句中使用中置表示法。比如可以匹配一个 List 序列 </p>
<h2 id="密封类"><a href="#密封类" class="headerlink" title="密封类"></a>密封类</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    密封类</span></span><br><span class="line"><span class="comment">    1.可以避免滥用继承</span></span><br><span class="line"><span class="comment">    2.用在模式匹配</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">sealed</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span>  <span class="title">Furniture</span></span></span><br><span class="line"><span class="class"><span class="title">case</span> <span class="title">class</span>  <span class="title">Couch</span>(<span class="params"></span>) <span class="keyword">extends</span>  <span class="title">Furniture</span></span></span><br><span class="line"><span class="class"><span class="title">case</span> <span class="title">class</span>  <span class="title">Chair</span>(<span class="params"></span>) <span class="keyword">extends</span>  <span class="title">Furniture</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">SealedDemo</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">findPlaceTosit</span></span>(furniture: <span class="type">Furniture</span>):<span class="type">String</span>=furniture <span class="keyword">match</span>&#123;</span><br><span class="line">    <span class="keyword">case</span> a:<span class="type">Couch</span>=&gt;<span class="string">"lie on the couch"</span></span><br><span class="line">    <span class="keyword">case</span> b:<span class="type">Chair</span>=&gt;<span class="string">"site on the chair"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">  <span class="class"><span class="keyword">object</span> <span class="title">test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">      <span class="keyword">val</span> chair=<span class="type">Chair</span>()</span><br><span class="line">      <span class="keyword">val</span> sea=<span class="keyword">new</span> <span class="type">SealedDemo</span>()</span><br><span class="line">      println(sea.findPlaceTosit(chair))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h2 id="Match-Example"><a href="#Match-Example" class="headerlink" title="Match Example"></a>Match Example</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">// Example 商品捆绑打折出售</span></span><br><span class="line"><span class="comment">//    1) 商品捆绑可以是单个商品，也可以是多个商品</span></span><br><span class="line"><span class="comment">//    2) 打折时按照折扣 x 元进行设计</span></span><br><span class="line"><span class="comment">//    3) 能够统计出所有捆绑商品打折后的最终价格</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//设计的样例类</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> <span class="title">//</span> <span class="title">项</span></span></span><br><span class="line"><span class="class">    <span class="title">case</span> <span class="title">class</span> <span class="title">Book</span>(<span class="params">description: <span class="type">String</span>, price: <span class="type">Double</span></span>) <span class="keyword">extends</span> <span class="title">Item</span></span></span><br><span class="line"><span class="class">    <span class="title">//Bundle</span> <span class="title">捆</span> <span class="title">，</span> <span class="title">discount</span></span>: <span class="type">Double</span> 折扣 ， item: <span class="type">Item</span>* ,可变参数</span><br><span class="line">    <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Bundle</span>(<span class="params">description: <span class="type">String</span>, discount: <span class="type">Double</span>, item: <span class="type">Item</span>*</span>) <span class="keyword">extends</span> <span class="title">Item</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">//</span> <span class="title">打折案例</span> 120</span></span><br><span class="line"><span class="class">    <span class="title">val</span> <span class="title">sale</span> </span>= <span class="type">Bundle</span>(<span class="string">"书籍"</span>,<span class="number">10</span>,<span class="type">Book</span>(<span class="string">"漫画"</span>,<span class="number">40</span>),<span class="type">Bundle</span>(<span class="string">"文学作品"</span>, <span class="number">20</span>, <span class="type">Book</span>(<span class="string">"《阳关》"</span>, <span class="number">80</span>), <span class="type">Book</span>(<span class="string">"《围城》"</span>, <span class="number">30</span>)))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1- 使用case语句，得到"漫画"</span></span><br><span class="line">    <span class="keyword">val</span> demo = sale <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="type">Bundle</span>(_, _, <span class="type">Book</span>(desc, _), _*) =&gt; desc</span><br><span class="line">    &#125;</span><br><span class="line">    println(demo)<span class="comment">// 漫画</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2- 通过@表示法将嵌套的值绑定到变量。 _* 绑定剩余 Item 到 rest</span></span><br><span class="line">    <span class="keyword">val</span> demo2 = sale <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="comment">//  如果我们进行对象匹配时，不想接受某些值，则使用_忽略即可， _* 代表所有</span></span><br><span class="line">      <span class="keyword">case</span> <span class="type">Bundle</span>(_, _, art @ <span class="type">Book</span>(_,_),rest @ _*) =&gt; (art, rest)</span><br><span class="line">    &#125;</span><br><span class="line">    println(demo2) <span class="comment">//(Book(漫画,40.0),WrappedArray(Bundle(文学作品,20.0,WrappedArray(Book(《阳关》,80.0), Book(《围城》,30.0)))))</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> demo3 = sale <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="type">Bundle</span>(_,_,art3 @ <span class="type">Book</span>(_, _),rest3) =&gt; (art3, rest3)</span><br><span class="line">    &#125;</span><br><span class="line">    println(demo3) <span class="comment">//(Book(漫画,40.0),Bundle(文学作品,20.0,WrappedArray(Book(《阳关》,80.0), Book(《围城》,30.0))))</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span></span>(it:<span class="type">Item</span>):<span class="type">Double</span> = &#123;</span><br><span class="line">      it <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="type">Book</span>(_,p) =&gt; p</span><br><span class="line">        <span class="keyword">case</span> <span class="type">Bundle</span>(_,disc,its @ _*) =&gt; its.map(price).sum - disc</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(<span class="string">"price="</span> + price(sale)) <span class="comment">// 120.0</span></span><br></pre></td></tr></table></figure>

<h2 id="模式匹配和if-else-的区别"><a href="#模式匹配和if-else-的区别" class="headerlink" title="模式匹配和if else 的区别"></a>模式匹配和if else 的区别</h2><p>模式匹配其实本质上是提供一个方便的解构 (Destructuring) 数据结构的方式，以 scala 为例， pattern matching 其实用到了 scala 中提取器的功能， 提取器其实就是类中的 unapply () 方法。</p>
<p>其实 if else 只是 pattern matching 中的一个典型的用法，但并非它的全部。</p>
<p>同时， pattern matching 允许你解耦两个并不真正属于彼此的东西，也使得你的代码更易于测试。</p>
<h2 id="apply-amp-unapply"><a href="#apply-amp-unapply" class="headerlink" title="apply() &amp; unapply()"></a>apply() &amp; unapply()</h2><ul>
<li><p>apply方法被称作注入方法，在类的伴生对象中做一个初始化操作</p>
</li>
<li><p>apply方法的参数列表不需要跟构造器的参数列表统一</p>
</li>
<li><p>apply方法是定义在伴生对象中的</p>
</li>
</ul>
<p>当Scala中类或者对象有一个主要用途的时候，apply方法就是很好的语法糖。</p>
<p>apply方法 =&gt; 类似 constructor4Java</p>
<p>unapply方法完全相反，unapply接受一个对象，从对象中提取出相应的值。</p>
<p>unapply方法主要用于模式匹配中。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Money</span>(<span class="params">val value: <span class="type">Double</span>, val country: <span class="type">String</span></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Money</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(value: <span class="type">Double</span>, country: <span class="type">String</span>) : <span class="type">Money</span> = <span class="keyword">new</span> <span class="type">Money</span>(value, country)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">unapply</span></span>(money: <span class="type">Money</span>): <span class="type">Option</span>[(<span class="type">Double</span>, <span class="type">String</span>)] = &#123;</span><br><span class="line">        <span class="keyword">if</span>(money == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">None</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">Some</span>(money.value, money.country)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testUnapply</span></span>() = &#123;</span><br><span class="line">    <span class="keyword">val</span> money = <span class="type">Money</span>(<span class="number">10.1</span>, <span class="string">"RMB"</span>)</span><br><span class="line">    money <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="type">Money</span>(num, <span class="string">"RMB"</span>) =&gt;  println(<span class="string">"RMB: "</span> + num)</span><br><span class="line">        <span class="keyword">case</span> _ =&gt; println(<span class="string">"Not RMB!"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="为什么只能在object对象定义main方法才能作为入口？"><a href="#为什么只能在object对象定义main方法才能作为入口？" class="headerlink" title="为什么只能在object对象定义main方法才能作为入口？"></a>为什么只能在object对象定义main方法才能作为入口？</h2><p>类比java中的main方法的修饰词public static得知main方法是static（静态的），在scala中静态方法或者属性是在object修改的对象中的，object修饰的对象是singleton，用于保存静态成员等。</p>
<h1 id="break-amp-continue"><a href="#break-amp-continue" class="headerlink" title="break &amp; continue"></a>break &amp; continue</h1><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.util.control.<span class="type">Breaks</span>.&#123;<span class="keyword">break</span>, breakable&#125;</span><br></pre></td></tr></table></figure>

<p>break:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">breakable(</span><br><span class="line">    <span class="keyword">for</span>(i&lt;<span class="number">-0</span> until <span class="number">10</span>) &#123;</span><br><span class="line">      println(i)</span><br><span class="line">      <span class="keyword">if</span>(i==<span class="number">5</span>)&#123;</span><br><span class="line">        <span class="keyword">break</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line"> <span class="comment">// 0,1,2,3,4,5</span></span><br></pre></td></tr></table></figure>

<p>continue:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i&lt;<span class="number">-0</span> until <span class="number">10</span>)&#123;</span><br><span class="line">      breakable&#123;</span><br><span class="line">      <span class="keyword">if</span>(i==<span class="number">3</span>||i==<span class="number">6</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">      println(i)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//0,1,2,3,5,7,8,9</span></span><br></pre></td></tr></table></figure>


    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Tips4Scala/" rel="tag"># Tips4Scala</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/10/31/Dawn-Dew-light-Collected-at-Dusk-4-Java/" rel="prev" title="Dawn Dew-light Collected at Dusk 4 Java">
      <i class="fa fa-chevron-left"></i> Dawn Dew-light Collected at Dusk 4 Java
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/01/14/Dawn-Dew-light-Collected-at-Dusk-4-Python/" rel="next" title="Dawn Dew-light Collected at Dusk 4 Python">
      Dawn Dew-light Collected at Dusk 4 Python <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC80Mzk4NC8yMDUyMA=="></div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Scala-类型"><span class="nav-number">1.</span> <span class="nav-text">Scala 类型</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Option-Some-None"><span class="nav-number">2.</span> <span class="nav-text">Option Some None</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Tips4For-循环"><span class="nav-number">2.1.</span> <span class="nav-text">Tips4For 循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tips4map操作"><span class="nav-number">2.2.</span> <span class="nav-text">Tips4map操作</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Scala-Java-Map"><span class="nav-number">3.</span> <span class="nav-text">Scala Java Map</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Scala内部Map转换："><span class="nav-number">3.1.</span> <span class="nav-text">Scala内部Map转换：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java中-把Java-Map-转化成-Scala-Map"><span class="nav-number">3.2.</span> <span class="nav-text">Java中 把Java Map 转化成 Scala Map</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Scala中的双向转换"><span class="nav-number">3.3.</span> <span class="nav-text">Scala中的双向转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example"><span class="nav-number">3.4.</span> <span class="nav-text">Example</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Scala-mutable-Map-Test"><span class="nav-number">3.5.</span> <span class="nav-text">Scala mutable Map Test</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#More-4-Scala-Map-Action"><span class="nav-number">3.6.</span> <span class="nav-text">More 4 Scala Map Action</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Scala-的-Seq"><span class="nav-number">4.</span> <span class="nav-text">Scala 的 Seq</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Scala-match"><span class="nav-number">5.</span> <span class="nav-text">Scala match</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本介绍"><span class="nav-number">5.1.</span> <span class="nav-text">基本介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tips"><span class="nav-number">5.2.</span> <span class="nav-text">Tips</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#守卫"><span class="nav-number">5.3.</span> <span class="nav-text">守卫</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量名"><span class="nav-number">5.4.</span> <span class="nav-text">变量名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类型匹配"><span class="nav-number">5.5.</span> <span class="nav-text">类型匹配</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#匹配数组"><span class="nav-number">5.6.</span> <span class="nav-text">匹配数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#匹配列表"><span class="nav-number">5.7.</span> <span class="nav-text">匹配列表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#匹配元组"><span class="nav-number">5.8.</span> <span class="nav-text">匹配元组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象匹配"><span class="nav-number">5.9.</span> <span class="nav-text">对象匹配</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#对象匹配的特殊情况"><span class="nav-number">5.9.1.</span> <span class="nav-text">对象匹配的特殊情况</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量声明中的模式"><span class="nav-number">5.10.</span> <span class="nav-text">变量声明中的模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for表达式中的模式"><span class="nav-number">5.11.</span> <span class="nav-text">for表达式中的模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#样例类"><span class="nav-number">5.12.</span> <span class="nav-text">样例类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#密封类"><span class="nav-number">5.13.</span> <span class="nav-text">密封类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Match-Example"><span class="nav-number">5.14.</span> <span class="nav-text">Match Example</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模式匹配和if-else-的区别"><span class="nav-number">5.15.</span> <span class="nav-text">模式匹配和if else 的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#apply-amp-unapply"><span class="nav-number">5.16.</span> <span class="nav-text">apply() &amp; unapply()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为什么只能在object对象定义main方法才能作为入口？"><span class="nav-number">5.17.</span> <span class="nav-text">为什么只能在object对象定义main方法才能作为入口？</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#break-amp-continue"><span class="nav-number">6.</span> <span class="nav-text">break &amp; continue</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Fly Hugh"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Fly Hugh</p>
  <div class="site-description" itemprop="description">WE CHOOSE TO  GO TO THE MARS</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">70</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">60</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/FlyMeToTheMars" title="GitHub → https://github.com/FlyMeToTheMars" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/flyhobo@live.com" title="E-Mail → flyhobo@live.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/3200892914" title="Weibo → https://weibo.com/u/3200892914" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/Fly__HoBo" title="Twitter → https://twitter.com/Fly__HoBo" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fly Hugh</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

<script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script>

</body>
</html>

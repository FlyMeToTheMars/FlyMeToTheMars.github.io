<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/xingqiushangcheng.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/xingqiushangcheng.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-mac-osx.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="笨猫不如烂笔头">
<meta name="keywords" content="PICKS">
<meta property="og:type" content="article">
<meta property="og:title" content="朝花夕拾">
<meta property="og:url" content="http://yoursite.com/2050/10/14/朝花夕拾/index.html">
<meta property="og:site_name" content="Mars">
<meta property="og:description" content="笨猫不如烂笔头">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gdnjra9kkrj20sk0c6myf.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gdnkbsp9sij20pp0gy75i.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gg3fk4uvm2j20j50b1wgo.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gg3floj82tj20go0bw0v5.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gghbc3d8shj20le0jvtab.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gidwsbcl2aj20jn0k1ab1.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gihww4dllgj20zl0kldkg.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gilaolon3sj20n603n0wj.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1giynphltjjj20jx0acdfu.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1giynqh3y5rj20st0btmxe.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mlhtnkhj201f01f08k.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mm3cj3lj201f01f0fv.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mn9522pj201f01f0n7.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mntnasfj201f01fa9t.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mo9flxyj201f01f0b1.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mo9flxyj201f01f0b1.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mqer9ahj201f01f0ge.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mqyv5g1j201f01f0sh.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mr4qybmj201f01fa9t.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mtf7wtcj20i502sjrb.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gj76dp6ma8j21jb0r2ab4.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gj79tlhudbg20yc0eeqsg.gif">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gjq4vv1ur3j20lr0afmyg.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gjq4vuyywpj209b06sjro.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gjq4vv0bgvj20jh092gm0.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gjq4vv15apj20m209z3zk.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gjq4vv5fk0j20nl0d1afi.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gjq4vv5hsqj20rn0i80w9.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20210507190945.png">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gk86kqo1adj20fa09kq5t.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvnmhkz89j20lj0hpmx9.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvnn72zvnj20lq097jrc.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvnu0iuf9j20u20if0sm.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvnuq702mj210w0dqweg.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvnv4pghhj20jw0jvwed.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvnwwojz8j20qq0emdg0.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvo2jc2z0j20hb0d5q38.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvo3097w9j20ha0d3dfx.jpg">
<meta property="og:image" content="c:/Users/liu.gaoming/AppData/Roaming/Typora/typora-user-images/image-20201120152806907.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/640">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230094755.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230095256.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230095337.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230095416.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230095750.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230095825.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230100453.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230100533.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230102906.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230103446.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230103618.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230103652.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230103754.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230103843.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230104329.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230104612.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230104908.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230104939.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230105021.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230105309.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207282238360.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272251191.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272255356.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272257907.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272258043.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272304641.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272315756.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272318518.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272318059.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160538009.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160538657.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160539058.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160539164.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208161155310.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208161156642.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160424300.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160428119.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160429727.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160431060.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208170956321.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208181015479.png">
<meta property="og:image" content="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208191115526.png">
<meta property="og:updated_time" content="2025-07-31T14:42:11.820Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="朝花夕拾">
<meta name="twitter:description" content="笨猫不如烂笔头">
<meta name="twitter:image" content="http://ww1.sinaimg.cn/large/bec9bff2gy1gdnjra9kkrj20sk0c6myf.jpg">

<link rel="canonical" href="http://yoursite.com/2050/10/14/朝花夕拾/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>朝花夕拾 | Mars</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Mars" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Mars</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2050/10/14/朝花夕拾/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Fly Hugh">
      <meta itemprop="description" content="WE CHOOSE TO  GO TO THE MARS">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mars">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          朝花夕拾
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2050-10-14 06:31:42" itemprop="dateCreated datePublished" datetime="2050-10-14T06:31:42+08:00">2050-10-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-07-31 22:42:11" itemprop="dateModified" datetime="2025-07-31T22:42:11+08:00">2025-07-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Interview/" itemprop="url" rel="index"><span itemprop="name">Interview</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>笨猫不如烂笔头</p>
</blockquote>
<a id="more"></a> 

<h3 id="更友好的创建对象方式"><a href="#更友好的创建对象方式" class="headerlink" title="更友好的创建对象方式"></a>更友好的创建对象方式</h3><p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gdnjra9kkrj20sk0c6myf.jpg" alt="3d5024b55687373af54fcb9ef4e0eb4.png"></p>
<p>上面的方式，对JVM来说是更友好的，因为堆内存的调用无法避免，所以从栈内存这边入手解决内存问题是一个不错的解决的方式</p>
<hr>
<h3 id="下面代码是否线程安全"><a href="#下面代码是否线程安全" class="headerlink" title="下面代码是否线程安全"></a>下面代码是否线程安全</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> Singleton instance; </span><br><span class="line">    <span class="function"><span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123; </span><br><span class="line">    <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(Singleton<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">            &#125; </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> instance; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>乍一看类似饿汉式的单例，线程安全，其实是有问题的</p>
<p>虽然只有一个线程能够获得锁，并且这个锁还是类锁，所有对象共享的</p>
<p>关键在于 jvm 对 new 的优化，这个变量没有声明 volatile，new 不是一个线程安全的操作，</p>
<p>对于 new 这个指令，一般的顺序是申请内存空间，初始化内存空间，然后把内存地址赋给 instance 对象，但是 jvm 会对这段指令进行优化，优化之后变成 申请内存空间，内存地址赋给 instance 对象，初始化内存空间，这就导致 第二层检查可能会出错，标准写法只需要在变量前声明 volatile 即可。</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gdnkbsp9sij20pp0gy75i.jpg" alt="677701574e4f69f35e226ed6bc9a380.png"></p>
<hr>
<h3 id="volatile利用了什么协议来实现可见性"><a href="#volatile利用了什么协议来实现可见性" class="headerlink" title="volatile利用了什么协议来实现可见性"></a>volatile利用了什么协议来实现可见性</h3><p>volatile 是通过内存屏障实现的，MESI协议，缓存一致性协议</p>
<p>JVM推荐书《The Java Language Specification》<br>volatile 修饰的变量如果值发生变化 发现线程的高速缓存与主存数据不一致时候 由于缓存一致性协议 则总线将高速缓存中的值清空 其他线程只能通过访问主存来获取最新的值 并缓存到告诉缓存上。</p>
<hr>
<h3 id="Java-Trainsient-关键字"><a href="#Java-Trainsient-关键字" class="headerlink" title="Java Trainsient 关键字"></a>Java Trainsient 关键字</h3><p>1.一旦变量被transient修饰，变量将不再是对象持久化的一部分，该变量内容在序列化后无法获得访问。 </p>
<p>2.transient关键字只能修饰变量，而不能修饰方法和类。注意，本地变量是不能被transient关键字修饰的。变量如果是用户自定义类变量，则该类需要实现Serializable接口。 </p>
<p>3.一个静态变量不管是否被transient修饰，均不能被序列化。 </p>
<p>使用总结和场景：某个类的有些属性需要序列化，其他属性不需要被序列化，比如：敏感信息（如密码，银行卡号等），java 的transient关键字为我们提供了便利，你只需要实现Serilizable接口，将不需要序列化的属性前添加关键字transient，序列化对象的时候，这个属性就不会序列化到指定的目的地中。</p>
<h3 id="多线程中Random的使用"><a href="#多线程中Random的使用" class="headerlink" title="多线程中Random的使用"></a>多线程中Random的使用</h3><p>1.不要在多个线程间共享一个java.util.Random实例，而该把它放入ThreadLocal之中。</p>
<p>2.Java7以上我们更推荐使用java.util.concurrent.ThreadLocalRandom。</p>
<p>下面两条建议是 IDEA给的:</p>
<p>1.不要将将随机数放大10的若干倍然后取整，直接使用Random对象的nextInt或者nextLong方法</p>
<p>2.Math.random()应避免在多线程环境下使用</p>
<h3 id="为什么阿里禁止使用Executor创建线程池"><a href="#为什么阿里禁止使用Executor创建线程池" class="headerlink" title="为什么阿里禁止使用Executor创建线程池"></a>为什么阿里禁止使用Executor创建线程池</h3><p>阿里规约之所以强制要求手动创建线程池，也是和这些参数有关。具体为什么不允许，规约是这么说的：</p>
<p>线程池不允许使用Executors去创建，而是通过ThreadPoolExecutor的方式，这样的处理方式让写的同学更加明确线程池的运行规则，规避资源耗尽的风险。</p>
<p>Executor提供的四个静态方法创建线程池，但是阿里规约却并不建议使用它。</p>
<p>Executors各个方法的弊端：<br>1）newFixedThreadPool和newSingleThreadExecutor:<br>  主要问题是堆积的请求处理队列可能会耗费非常大的内存，甚至OOM。<br>2）newCachedThreadPool和newScheduledThreadPool:<br>  主要问题是线程数最大数是Integer.MAX_VALUE，可能会创建数量非常多的线程，甚至OOM。</p>
<p>看一下这两种弊端怎么导致的。</p>
<p>第一种，newFixedThreadPool和newSingleThreadExecutor分别获得 FixedThreadPool 类型的线程池 和  SingleThreadExecutor 类型的线程池。　</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newFixedThreadPool</span><span class="params">(<span class="keyword">int</span> nThreads)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolExecutor(nThreads, nThreads,</span><br><span class="line">                                     <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                     <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;());</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public static ExecutorService newSingleThreadExecutor() &#123;</span><br><span class="line">       return new FinalizableDelegatedExecutorService</span><br><span class="line">           (new ThreadPoolExecutor(1, 1,</span><br><span class="line">                                   0L, TimeUnit.MILLISECONDS,</span><br><span class="line">                                   new LinkedBlockingQueue&lt;Runnable&gt;()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为，创建了一个无界队列LinkedBlockingQueuesize，是一个最大值为Integer.MAX_VALUE的线程阻塞队列，当添加任务的速度大于线程池处理任务的速度，可能会在队列堆积大量的请求，消耗很大的内存，甚至导致OOM。</p>
<h3 id="阿里开发手册上不推荐（禁止）使用Double的根本原因"><a href="#阿里开发手册上不推荐（禁止）使用Double的根本原因" class="headerlink" title="阿里开发手册上不推荐（禁止）使用Double的根本原因"></a>阿里开发手册上不推荐（禁止）使用Double的根本原因</h3><p>精度丢失就不谈了，稍微深入一下为什么精度会丢失，分为一些不同情况</p>
<p><strong>典型现象（一）：条件判断超预期</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">System.out.println( <span class="number">1f</span> == <span class="number">0.9999999f</span> );   <span class="comment">// 打印：false</span></span><br><span class="line">System.out.println( <span class="number">1f</span> == <span class="number">0.99999999f</span> );  <span class="comment">// 打印：true    纳尼？</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.0</span>（十进制）</span><br><span class="line">    ↓</span><br><span class="line"><span class="number">00111111</span> <span class="number">10000000</span> <span class="number">00000000</span> <span class="number">00000000</span>（二进制）</span><br><span class="line">    ↓</span><br><span class="line"><span class="number">0x3F800000</span>（十六进制）</span><br><span class="line">    </span><br><span class="line"><span class="number">0.99999999</span>（十进制）</span><br><span class="line">    ↓</span><br><span class="line"><span class="number">00111111</span> <span class="number">10000000</span> <span class="number">00000000</span> <span class="number">00000000</span>（二进制）</span><br><span class="line">    ↓</span><br><span class="line"><span class="number">0x3F800000</span>（十六进制）</span><br><span class="line">    </span><br><span class="line">果不其然，这两个十进制浮点数的底层二进制表示是一毛一样的，怪不得==的判断结果返回<span class="keyword">true</span>！</span><br><span class="line"></span><br><span class="line">浮点数的精度问题。</span><br><span class="line">    </span><br><span class="line">浮点数在计算机中的存储方式遵循IEEE <span class="number">754</span> 浮点数计数标准，可以用科学计数法表示为：</span><br><span class="line">    				<span class="number">1</span> + <span class="number">2</span> + <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>、符号部分（S）</span><br><span class="line"></span><br><span class="line"><span class="number">0</span>-正  <span class="number">1</span>-负</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、阶码部分（E）（指数部分）：</span><br><span class="line"></span><br><span class="line">对于<span class="keyword">float</span>型浮点数，指数部分<span class="number">8</span>位，考虑可正可负，因此可以表示的指数范围为-<span class="number">127</span> ~ <span class="number">128</span></span><br><span class="line">对于<span class="keyword">double</span>型浮点数，指数部分<span class="number">11</span>位，考虑可正可负，因此可以表示的指数范围为-<span class="number">1023</span> ~ <span class="number">1024</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、尾数部分（M）：</span><br><span class="line"></span><br><span class="line">浮点数的精度是由尾数的位数来决定的：</span><br><span class="line"></span><br><span class="line">对于<span class="keyword">float</span>型浮点数，尾数部分<span class="number">23</span>位，换算成十进制就是 <span class="number">2</span>^<span class="number">23</span>=<span class="number">8388608</span>，所以十进制精度只有<span class="number">6</span> ~ <span class="number">7</span>位；</span><br><span class="line">对于<span class="keyword">double</span>型浮点数，尾数部分<span class="number">52</span>位，换算成十进制就是 <span class="number">2</span>^<span class="number">52</span> = <span class="number">4503599627370496</span>，所以十进制精度只有<span class="number">15</span> ~ <span class="number">16</span>位</span><br><span class="line"></span><br><span class="line">所以对于上面的数值<span class="number">0.99999999f</span>，很明显已经超过了<span class="keyword">float</span>型浮点数据的精度范围，出问题也是在所难免的。</span><br></pre></td></tr></table></figure>

<p><strong>典型现象（二）：数据转换超预期</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> f = <span class="number">1.1f</span>;</span><br><span class="line"><span class="keyword">double</span> d = (<span class="keyword">double</span>) f;</span><br><span class="line">System.out.println(f);  <span class="comment">// 打印：1.1</span></span><br><span class="line">System.out.println(d);  <span class="comment">// 打印：1.100000023841858  纳尼？</span></span><br></pre></td></tr></table></figure>

<p><strong>典型现象（三）：基本运算超预期</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.out.println( <span class="number">0.2</span> + <span class="number">0.7</span> );  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印：0.8999999999999999   纳尼？</span></span><br></pre></td></tr></table></figure>

<p><strong>典型现象（四）：数据自增超预期</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> f1 = <span class="number">8455263f</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    System.out.println(f1);</span><br><span class="line">    f1++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印：8455263.0</span></span><br><span class="line"><span class="comment">// 打印：8455264.0</span></span><br><span class="line"><span class="comment">// 打印：8455265.0</span></span><br><span class="line"><span class="comment">// 打印：8455266.0</span></span><br><span class="line"><span class="comment">// 打印：8455267.0</span></span><br><span class="line"><span class="comment">// 打印：8455268.0</span></span><br><span class="line"><span class="comment">// 打印：8455269.0</span></span><br><span class="line"><span class="comment">// 打印：8455270.0</span></span><br><span class="line"><span class="comment">// 打印：8455271.0</span></span><br><span class="line"><span class="comment">// 打印：8455272.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> f2 = <span class="number">84552631f</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    System.out.println(f2);</span><br><span class="line">    f2++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//    打印：8.4552632E7   纳尼？不是 +1了吗？</span></span><br><span class="line"><span class="comment">//    打印：8.4552632E7   纳尼？不是 +1了吗？</span></span><br><span class="line"><span class="comment">//    打印：8.4552632E7   纳尼？不是 +1了吗？</span></span><br><span class="line"><span class="comment">//    打印：8.4552632E7   纳尼？不是 +1了吗？</span></span><br><span class="line"><span class="comment">//    打印：8.4552632E7   纳尼？不是 +1了吗？</span></span><br><span class="line"><span class="comment">//    打印：8.4552632E7   纳尼？不是 +1了吗？</span></span><br><span class="line"><span class="comment">//    打印：8.4552632E7   纳尼？不是 +1了吗？</span></span><br><span class="line"><span class="comment">//    打印：8.4552632E7   纳尼？不是 +1了吗？</span></span><br><span class="line"><span class="comment">//    打印：8.4552632E7   纳尼？不是 +1了吗？</span></span><br><span class="line"><span class="comment">//    打印：8.4552632E7   纳尼？不是 +1了吗？</span></span><br></pre></td></tr></table></figure>

<p>解决办法：</p>
<p>1.我们我们可以用字符串或者数组来表示这种大数，然后按照四则运算的规则来手动模拟出具体计算过程，中间还需要考虑各种诸如：<strong>进位、借位、符号</strong>等等问题的处理，有点复杂。</p>
<ol start="2">
<li>JDK早已为我们考虑到了浮点数的计算精度问题，因此提供了专用于高精度数值计算的<strong>大数类</strong>来方便我们使用。</li>
</ol>
<h3 id="mac-清理maven仓库的脚本"><a href="#mac-清理maven仓库的脚本" class="headerlink" title="mac 清理maven仓库的脚本"></a>mac 清理maven仓库的脚本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 这里写你的仓库路径</span><br><span class="line">REPOSITORY_PATH=~/Documents/tools/apache-maven-3.0.3/repository</span><br><span class="line">echo 正在搜索...</span><br><span class="line">find $REPOSITORY_PATH -name &quot;*lastUpdated*&quot; | xargs rm -fr</span><br><span class="line">echo 删除完毕</span><br><span class="line"></span><br><span class="line">mac（linux）系统-创建.sh文件脚本执行（mac用.command终端也可以）</span><br></pre></td></tr></table></figure>

<h3 id="idea目录较多，文件名较长产生的错误"><a href="#idea目录较多，文件名较长产生的错误" class="headerlink" title="idea目录较多，文件名较长产生的错误"></a>idea目录较多，文件名较长产生的错误</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Error running &apos;ServiceStarter&apos;: Command line is too long. Shorten command line for ServiceStarter or also for Application default configuration.</span><br><span class="line"></span><br><span class="line">修改项目下 .idea\workspace.xml，找到标签 &lt;component name=&quot;PropertiesComponent&quot;&gt; ， 在标签里加一行 &lt;property name=&quot;dynamic.classpath&quot; value=&quot;true&quot; /&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Log4J-指定屏蔽某些特定报警信息"><a href="#Log4J-指定屏蔽某些特定报警信息" class="headerlink" title="Log4J 指定屏蔽某些特定报警信息"></a>Log4J 指定屏蔽某些特定报警信息</h3><p>Logger.getLogger(“org.apache.library”).setLevel(Level.OFF)</p>
<h3 id="Flink-Source并行度为1的意义"><a href="#Flink-Source并行度为1的意义" class="headerlink" title="Flink Source并行度为1的意义"></a>Flink Source并行度为1的意义</h3><p>对于需要设置EventTime的流来说，我们的TimestampAssigner应该在Source之后立即调用，原因是时间戳分配器看到的元素的顺序应该和source操作符产生数据的顺序是一样的，否则就乱了，也就是说，任何分区操作都会将元素的顺序打乱，例如：改变并行度 keyBy操作等等。，所以最佳实践是：</p>
<p>在尽量接近数据源source操作符的地方分配时间戳和产生水位线，甚至最好在SourceFunction中分配时间戳和产生水位线。当然在分配时间戳和产生水位线之前可以对流进行map和filter操作是没问题的，也就是说必须是窄依赖。</p>
<h3 id="JB套件的一个实用功能"><a href="#JB套件的一个实用功能" class="headerlink" title="JB套件的一个实用功能"></a>JB套件的一个实用功能</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">之前没注意，更改变量名字的时候直接使用refactor就可以了，真的实用</span><br></pre></td></tr></table></figure>

<h3 id="zk使用的分布式协议并不是paxos"><a href="#zk使用的分布式协议并不是paxos" class="headerlink" title="zk使用的分布式协议并不是paxos"></a>zk使用的分布式协议并不是paxos</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">而是zab协议</span><br></pre></td></tr></table></figure>

<h3 id="为什么说NULL是计算机科学中最大的错误，至少值十亿美金"><a href="#为什么说NULL是计算机科学中最大的错误，至少值十亿美金" class="headerlink" title="为什么说NULL是计算机科学中最大的错误，至少值十亿美金"></a>为什么说NULL是计算机科学中最大的错误，至少值十亿美金</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.覆类型</span><br><span class="line">2.是凌乱的</span><br><span class="line">3.是一个特例</span><br><span class="line">4.使 API 变得糟糕</span><br><span class="line">5.使错误的语言决策更加恶化</span><br><span class="line">6.难以调试</span><br><span class="line">7.是不可组合的</span><br></pre></td></tr></table></figure>

<h4 id="1-NULL-颠覆类型"><a href="#1-NULL-颠覆类型" class="headerlink" title="1. NULL 颠覆类型"></a>1. NULL 颠覆类型</h4><p>静态类型语言不需要实际去执行程序，就可以检查程序中类型的使用，并且提供一定的程序行为保证。</p>
<p>例如，在 Java 中，如果我编写 <code>x.toUppercase()</code>，编译器会检查 <code>x</code> 的类型。如果 <code>x</code> 是一个 <code>String</code>，那么类型检查成功；如果 <code>x</code> 是一个 <code>Socket</code>，那么类型检查失败。</p>
<p>在编写庞大的、复杂的软件时，静态类型检查是一个强大的工具。但是对于 Java，这些很棒的编译时检查存在一个致命缺陷：任何引用都可以是 null，而调用一个 null 对象的方法会产生一个 <code>NullPointerException</code>。所以，</p>
<ul>
<li><code>toUppercase()</code> 可以被任意 <code>String</code> 对象调用。除非 <code>String</code> 是 null。</li>
<li><code>read()</code> 可以被任意 <code>InputStream</code> 对象调用。除非 <code>InputStream</code> 是 null。</li>
<li><code>toString()</code> 可以被任意 <code>Object</code> 对象调用。除非 <code>Object</code> 是 null。</li>
</ul>
<p>Java 不是唯一引起这个问题的语言；很多其它的类型系统也有同样的缺点，当然包括 AGOL W 语言。</p>
<p>在这些语言中，NULL 超出了类型检查的范围。它悄悄地越过类型检查，等待运行时，最后一下子释放出一大批错误。NULL 什么也不是，同时又什么都是。</p>
<h4 id="2-NULL-是凌乱的"><a href="#2-NULL-是凌乱的" class="headerlink" title="2. NULL 是凌乱的"></a>2. NULL 是凌乱的</h4><p>在很多情况下 null 是没有意义的。不幸的是，如果一种语言允许任何东西为 null，好吧，那么任何东西都可以是 null。</p>
<p>Java 程序员冒着患腕管综合症的风险写下</p>
<p>Java</p>
<p> <code>if (str == null 丨丨 str.equals(&quot;&quot;)) {}</code> </p>
<p>而在 C# 中添加 <code>String.IsNullOrEmpty</code> 是一个常见的语法</p>
<p>C#</p>
<p> <code>if (string.IsNullOrEmpty(str)) {}</code> </p>
<p>真可恶！</p>
<p>每次你写代码，将 null 字符串和空字符串混为一谈时，Guava 团队都要哭了。– <a href="https://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained" target="_blank" rel="noopener">Google Guava</a></p>
<p>说得好。但是当你的类型系统（例如，Java 或者 C#）到处都允许 NULL 时，你就不能可靠地排除 NULL 的可能性，并且不可避免的会在某个地方混淆。</p>
<p>null 无处不在的可能性造成了这样一个问题，Java 8 添加了 <code>@NonNull</code> 标注，尝试着在它的类型系统中以追溯方式解决这个缺陷。</p>
<h4 id="3-NULL-是一个特例"><a href="#3-NULL-是一个特例" class="headerlink" title="3. NULL 是一个特例"></a>3. NULL 是一个特例</h4><p>考虑到 NULL 不是一个值却又起到一个值的作用，NULL 自然地成为各种特别处理方法的课题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">char c = &apos;A&apos;;</span><br><span class="line">char *myChar = &amp;c;</span><br><span class="line">std::cout &lt;&lt; *myChar &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>单个 NUL 字符的例外已经导致无数的错误：API 的怪异行为、安全漏洞和缓冲区溢出。</p>
<p>NULL 是 C 字符串中最糟糕的错误；更确切地说，以 NUL 结尾的字符串是<a href="http://queue.acm.org/detail.cfm?id=2010365" target="_blank" rel="noopener">最昂贵的<strong>一字节</strong>错误</a>。</p>
<h4 id="4-NULL-使-API-变得糟糕"><a href="#4-NULL-使-API-变得糟糕" class="headerlink" title="4.NULL 使 API 变得糟糕"></a>4.NULL 使 API 变得糟糕</h4><p>我们可以想象在很多语言中类似的类（Python、JavaScript、Java、C# 等）。</p>
<p>现在假设我们的程序有一个慢的或者占用大量资源的方法，来找到某个人的电话号码——可能通过连通一个网络服务。</p>
<p>为了提高性能，我们将会使用本地存储作为缓存，将一个人名映射到他的电话号码上。</p>
<p>然而，一些人没有电话号码（即他们的电话号码是 nil）。我们仍然会缓存那些信息，所以我们不需要在后面重新填充那些信息。</p>
<p>但是现在意味着我们的结果模棱两可！它可能表示：</p>
<ol>
<li>这个人不存在于缓存中（Alice）</li>
<li>这个人存在于缓存中，但是没有电话号码（Tom）</li>
</ol>
<p>一种情形要求昂贵的重新计算，另一种需要即时的答复。但是我们的代码不够精密来区分这两种情况。</p>
<p>在实际的代码中，像这样的情况经常会以复杂且不易察觉的方式出现。因此，简单通用的 API 可以马上变成特例，迷惑了 null 凌乱行为的来源。</p>
<p>用一个 <code>contains()</code> 方法来修补 <code>Store</code> 类可能会有帮助。但是这引入重复的查找，导致降低性能和竞争条件。</p>
<h4 id="5-NULL-使错误的语言决策更加恶化"><a href="#5-NULL-使错误的语言决策更加恶化" class="headerlink" title="5.NULL 使错误的语言决策更加恶化"></a>5.NULL 使错误的语言决策更加恶化</h4><h4 id="6-NULL-难以调试"><a href="#6-NULL-难以调试" class="headerlink" title="6.NULL 难以调试"></a>6.NULL 难以调试</h4><p>来解释 NULL 是多么的麻烦，C++ 是一个很好的例子。调用成员函数指向一个 NULL 指针不一定会导致程序崩溃。更糟糕的是：它可能会导致程序崩溃。</p>
<h4 id="7-NULL不可组合"><a href="#7-NULL不可组合" class="headerlink" title="7.NULL不可组合"></a>7.NULL不可组合</h4><h3 id="IDEA-maven修改pom文件，导致jdk版本重置问题"><a href="#IDEA-maven修改pom文件，导致jdk版本重置问题" class="headerlink" title="IDEA maven修改pom文件，导致jdk版本重置问题"></a>IDEA maven修改pom文件，导致jdk版本重置问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;properties&gt;</span><br><span class="line">    &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;</span><br><span class="line">    &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;</span><br><span class="line">&lt;/properties&gt;</span><br></pre></td></tr></table></figure>

<h3 id="MAVEN的scope"><a href="#MAVEN的scope" class="headerlink" title="MAVEN的scope"></a>MAVEN的scope</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">compile</span><br><span class="line">默认就是compile，什么都不配置也就是意味着compile。compile表示被依赖项目需要参与当前项目的编译，当然后续的测试，运行周期也参与其中，是一个比较强的依赖。打包的时候通常需要包含进去。</span><br><span class="line"></span><br><span class="line">test</span><br><span class="line">scope为test表示依赖项目仅仅参与测试相关的工作，包括测试代码的编译，执行。比较典型的如junit。</span><br><span class="line"></span><br><span class="line">runntime</span><br><span class="line">runntime表示被依赖项目无需参与项目的编译，不过后期的测试和运行周期需要其参与。与compile相比，跳过编译而已，说实话在终端的项目（非开源，企业内部系统）中，和compile区别不是很大。比较常见的如JSR×××的实现，对应的API jar是compile的，具体实现是runtime的，compile只需要知道接口就足够了。oracle jdbc驱动架包就是一个很好的例子，一般scope为runntime。另外runntime的依赖通常和optional搭配使用，optional为true。我可以用A实现，也可以用B实现。</span><br><span class="line"></span><br><span class="line">provided</span><br><span class="line">provided意味着打包的时候可以不用包进去，别的设施(Web Container)会提供。事实上该依赖理论上可以参与编译，测试，运行等周期。相当于compile，但是在打包阶段做了exclude的动作。</span><br><span class="line"></span><br><span class="line">system</span><br><span class="line">从参与度来说，也provided相同，不过被依赖项不会从maven仓库抓，而是从本地文件系统拿，一定需要配合systemPath属性使用。</span><br><span class="line"></span><br><span class="line">scope的依赖传递</span><br><span class="line">A–&gt;B–&gt;C。当前项目为A，A依赖于B，B依赖于C。知道B在A项目中的scope，那么怎么知道C在A中的scope呢？</span><br><span class="line">答案是：</span><br><span class="line">当C是test或者provided时，C直接被丢弃，A不依赖C；</span><br><span class="line">否则A依赖C，C的scope继承于B的scope。</span><br></pre></td></tr></table></figure>

<h3 id="EXCEL一点小技巧"><a href="#EXCEL一点小技巧" class="headerlink" title="EXCEL一点小技巧"></a>EXCEL一点小技巧</h3><p>正好最近用来有点小用处</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.从固定的单元格里随机取一个值</span><br><span class="line">=INDEX($G$2:$M$2, RANDBETWEEN(1,7))</span><br><span class="line">$G$2：下拉的时候不会自动延伸</span><br><span class="line"></span><br><span class="line">2.从固定列取值用在本单元格里</span><br><span class="line">=&quot;INSERT INTO `event_mapping` VALUES (&apos;&quot;&amp;B2&amp;&quot;&apos;,&quot;&amp;C2&amp;&quot;,&quot;&amp;D2&amp;&quot;);&quot;</span><br><span class="line"></span><br><span class="line">3.下拉到某行</span><br><span class="line">在有第一行的情况下，直接双击右下角小箭头即可</span><br></pre></td></tr></table></figure>

<h3 id="Flink-On-Zeppelin上传Jar包的位置"><a href="#Flink-On-Zeppelin上传Jar包的位置" class="headerlink" title="Flink On Zeppelin上传Jar包的位置"></a>Flink On Zeppelin上传Jar包的位置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/opt/flink-1.10/flink-1.10.0/lib</span><br><span class="line"></span><br><span class="line">目前看来应该是放在flink包里面的，会稳定上传，已经确定</span><br><span class="line"></span><br><span class="line">在interpreter 依赖里面设置了路劲</span><br><span class="line">/opt/flink-1.10/flink-1.10.0/lib/jimipojo-1.0.jar</span><br></pre></td></tr></table></figure>

<h3 id="Flink系列深度好文，等待细读"><a href="#Flink系列深度好文，等待细读" class="headerlink" title="Flink系列深度好文，等待细读"></a>Flink系列深度好文，等待细读</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/c/b6089c70072f</span><br><span class="line">flink的apply和process方法有什么区别呢</span><br></pre></td></tr></table></figure>

<h3 id="FastJson直接解析"><a href="#FastJson直接解析" class="headerlink" title="FastJson直接解析"></a>FastJson直接解析</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.map(</span><br><span class="line">a -&gt; JSON</span><br><span class="line">	.parseObject(</span><br><span class="line">		a,</span><br><span class="line">		Pojo.class)</span><br><span class="line">	).returns(</span><br><span class="line">		Pojo.class</span><br><span class="line">	)</span><br></pre></td></tr></table></figure>

<p>具体的还要试一下，我故意写的很难看来督促自己。。。</p>
<h3 id="FastJson很多坑-准备放弃"><a href="#FastJson很多坑-准备放弃" class="headerlink" title="FastJson很多坑 准备放弃"></a>FastJson很多坑 准备放弃</h3><h3 id="配置框架无法访问的问题"><a href="#配置框架无法访问的问题" class="headerlink" title="配置框架无法访问的问题"></a>配置框架无法访问的问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">有点脑残了，今天在mac上配置了zeppelin win无法访问，其原因是配置文件中的网络地址写死了 172.0.0.1, 如果想要别尔德位置能够访问的话，必须改变配置为其局域网id</span><br><span class="line"></span><br><span class="line">更好的选择是更改为0.0.0.0</span><br></pre></td></tr></table></figure>

<h3 id="解决GitHub提交历史头像不显示问题-以及首页没有绿色方块的问题"><a href="#解决GitHub提交历史头像不显示问题-以及首页没有绿色方块的问题" class="headerlink" title="解决GitHub提交历史头像不显示问题,以及首页没有绿色方块的问题"></a>解决GitHub提交历史头像不显示问题,以及首页没有绿色方块的问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">最近把本地的一个项目提交推送到GitHub的时候发现有两个问题, </span><br><span class="line">1.在commit提交历史里面</span><br><span class="line"></span><br><span class="line">提交内容的旁边,显示的不是原本github主页的头像,而是默认的灰色章鱼头像</span><br><span class="line"></span><br><span class="line">2.我的contributions里面提交的历史(绿色方块)也没有了</span><br><span class="line"></span><br><span class="line">怎么解决呢？</span><br><span class="line"></span><br><span class="line">1.首先在终端里切到项目所在目录</span><br><span class="line"></span><br><span class="line">2.输入git show命令,你会发现 有一行写着Author: Apple &lt;邮箱&gt;,这个邮箱肯定不是你绑定到github的邮箱</span><br><span class="line"></span><br><span class="line">3.输入git config user.email &quot;你的邮箱地址&quot;,修改邮箱</span><br><span class="line"></span><br><span class="line">4.修改完以后输入git config user.email 检查是否修改成了你的邮箱</span><br><span class="line"></span><br><span class="line">5.到目前为止现在只是修改这个项目的邮箱,重新推送一个新的改动,在查看该项目的提交历史和contributions里面提交的历史(绿色方块),问题已经解决了(之前的依旧不显示)</span><br><span class="line"></span><br><span class="line">6.如果你想其他项目提交时,也避免此类情况,把上面的两条命令改成 （1） git config --global user.email &quot;your_email@example.com&quot;</span><br><span class="line"></span><br><span class="line">（2）git config --global user.email 就可以了</span><br></pre></td></tr></table></figure>

<h3 id="解决anaconda无法连接的问题"><a href="#解决anaconda无法连接的问题" class="headerlink" title="解决anaconda无法连接的问题"></a>解决anaconda无法连接的问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">win10下更换清华镜像后无法连接 是因为win10里面无法解析https协议，修改‪~\.condarc文件，把https换成http</span><br></pre></td></tr></table></figure>

<h3 id="排查挖矿程序中会用到的一些追踪某个进程的命令"><a href="#排查挖矿程序中会用到的一些追踪某个进程的命令" class="headerlink" title="排查挖矿程序中会用到的一些追踪某个进程的命令"></a>排查挖矿程序中会用到的一些追踪某个进程的命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>查看PID启动文件的路径</span><br><span class="line">ls -l /proc/$PID/exe</span><br><span class="line"><span class="meta">#</span>查看PID执行目录的路径</span><br><span class="line">ls -l /proc/$PID/cwd</span><br><span class="line"><span class="meta">#</span>在定时器配置目录查看是否存在异常定时器配置</span><br><span class="line">/var/spool/cron/root 和/etc/crontab 和/etc/rc.lcoal</span><br><span class="line"><span class="meta">#</span>查看定时器启动日志,跟踪自启动程序</span><br><span class="line">tail -f /var/log/cron</span><br><span class="line"><span class="meta">#</span>查看各个进程的cpu使用情况，默认按cpu使用率排序</span><br><span class="line">top</span><br><span class="line"><span class="meta">#</span>显示所有运行中的进程，q退出</span><br><span class="line">ps aux | less</span><br><span class="line"><span class="meta">#</span>查看test.jar进程号</span><br><span class="line">ps -aux|grep test.jar | grep -v grep</span><br><span class="line"><span class="meta">#</span>查看test.jar进程号</span><br><span class="line">ps -ef|grep test.jar | grep -v grep</span><br><span class="line"><span class="meta">#</span>查看该进程下各个线程的cpu使用情况</span><br><span class="line">top -Hp pid</span><br><span class="line"><span class="meta">#</span>将线程pid转换为十六进制 8f7</span><br><span class="line">printf "%x\n" pid</span><br><span class="line"><span class="meta">#</span>查看pid进程里面的线程信息,线程Id为十六进制</span><br><span class="line">jstack pid | grep 8f7</span><br><span class="line"><span class="meta">#</span>查看该进程打开的文件</span><br><span class="line">lsof -p pid</span><br><span class="line"><span class="meta">#</span>查看pid线程内存分配</span><br><span class="line">cat /proc/pid/maps </span><br><span class="line"><span class="meta">#</span>查看PID启动文件的路径</span><br><span class="line">ls -l /proc/$PID/exe </span><br><span class="line"><span class="meta">#</span>查看PID执行目录的路径</span><br><span class="line">ls -l /proc/$PID/cwd </span><br><span class="line"><span class="meta">#</span>查看PID详细的内存占比</span><br><span class="line">cat /proc/$PID/status</span><br></pre></td></tr></table></figure>

<h3 id="Kerberos缺点"><a href="#Kerberos缺点" class="headerlink" title="Kerberos缺点"></a>Kerberos缺点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1、KDC 有单点风险，除非设置HA系统(Aictive Directory 可以做到这一点，目前apache directoryserver 也可以做到这一点)；</span><br><span class="line"></span><br><span class="line">2、访问压力可能使KDC过载；分布式服务使用Kerberos 必须做到这一点，KDC无法承受高负载请求；为什么Hadoop 要使用代理tokens的原因也是如此；</span><br><span class="line"></span><br><span class="line">3、服务之间的通信通道也需要安全认证，kerberos不保证数据加密；如果通信通道不安全，tickets 可能会被拦截或者通信伪造；</span><br><span class="line"></span><br><span class="line">4、机器之前需要保证时间的精确一致性，不然具备时限的tockens不会正常工作；这个在分布式领域是一个典型的问题，Paxos &amp;Raft协议也必须保证时间的一致性；</span><br><span class="line"></span><br><span class="line">5、如果机器间的时间没有被安全管理，理论上可能延长被盗token的使用时间；</span><br><span class="line"></span><br><span class="line">6、被盗用的token可以拿来直接访问服务，在KDC是没有访问日志的。每一个application需要拥有自己的以用户为单位的审计日志，这样才能保证被盗的ticket可被追踪，比如在Hadoop里面HDFS审计日志；</span><br><span class="line"></span><br><span class="line">7、这是一个仅仅认证服务：验证caller的合法性并准许给caller传递认证信息，他不处理任何授权信息；</span><br></pre></td></tr></table></figure>

<h3 id="mac无法运行-sh文件的解决办法"><a href="#mac无法运行-sh文件的解决办法" class="headerlink" title="mac无法运行.sh文件的解决办法"></a>mac无法运行.sh文件的解决办法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">今天解决了一下内网穿透的问题，</span><br><span class="line">轻量级的选择有frp，</span><br><span class="line">重量级的有goproxy</span><br><span class="line"></span><br><span class="line">几个问题记录一下，第一点：</span><br><span class="line">zsh无法运行.sh文件，要进行切换</span><br><span class="line">chsh -s /bin/bash</span><br><span class="line">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure>

<h3 id="解决git下载速度慢的终极方法"><a href="#解决git下载速度慢的终极方法" class="headerlink" title="解决git下载速度慢的终极方法"></a>解决git下载速度慢的终极方法</h3><p>因为本地的网络始终有一些问题，再忍受了很久很久的龟速下载之后，终于找了个一个非常顶的方法</p>
<p>前提是现有一个vpn，但是vpn不会自动代理git的流量，不管是在windows下面还是在mac下面都不会自动代理git，这点一直让我十分苦恼，现在终于找到了一劳永逸的办法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy &apos;socks5://127.0.0.1:1080&apos; </span><br><span class="line">git config --global https.proxy &apos;socks5://127.0.0.1:1080&apos;</span><br></pre></td></tr></table></figure>

<p>简单说明：vpn一般都是走的1080端口，通过这个端口转发git的流量，跳过本地运营商。</p>
<p>取消代理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 取消代理</span><br><span class="line">git config --global --unset http.proxy</span><br><span class="line"></span><br><span class="line">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure>

<h3 id="Maven代理配置"><a href="#Maven代理配置" class="headerlink" title="Maven代理配置"></a>Maven代理配置</h3><p>不需要配置什么https或者http模式，在有代理的前提下，只要配置一个代理即可</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">proxy</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>ss<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">active</span>&gt;</span>true<span class="tag">&lt;/<span class="name">active</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">protocol</span>&gt;</span>socks5<span class="tag">&lt;/<span class="name">protocol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">username</span>&gt;</span><span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">password</span>&gt;</span><span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">host</span>&gt;</span>127.0.0.1<span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">port</span>&gt;</span>1080<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nonProxyHosts</span>&gt;</span>127.0.0.1<span class="tag">&lt;/<span class="name">nonProxyHosts</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">proxy</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>要注意的是监控一下端口，如果代理没开的话那肯定是无法连接上的，mirror就不用设置了，直接从中央仓库拉去数据。</p>
<h3 id="npm更换源"><a href="#npm更换源" class="headerlink" title="npm更换源"></a>npm更换源</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//设置淘宝源</span><br><span class="line">npm config set registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">//设置公司的源</span><br><span class="line">npm config set registry http://127.0.0.1:4873</span><br><span class="line"></span><br><span class="line">//查看源，可以看到设置过的所有的源</span><br><span class="line">npm config get registry</span><br></pre></td></tr></table></figure>

<p>其实感觉应该把Mac管理node的brew n弄一下</p>
<h3 id="HDFS的某个错误"><a href="#HDFS的某个错误" class="headerlink" title="HDFS的某个错误"></a>HDFS的某个错误</h3><p>HBase和Flink在运行的时候报错</p>
<p>hbase启动后region自动挂了，Flink任务失败，文件丢失，然后查看hdfs日志</p>
<p>错误原因 dfs.datanode.max.transfer.threads 的参数4096，已经不足以支持现在的Thread，修改为2倍或者4倍或者更多</p>
<h3 id="IDEA-MAVEN停止加载"><a href="#IDEA-MAVEN停止加载" class="headerlink" title="IDEA MAVEN停止加载"></a>IDEA MAVEN停止加载</h3><p>经常遇到大型项目idea 停止加载mvn，然后就没办法了。。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">maven -&gt; maven goal idea的maven第六个按钮</span><br><span class="line">点击 然后</span><br><span class="line">mvn -U idea:idea</span><br><span class="line">即可</span><br></pre></td></tr></table></figure>

<h3 id="窗口触发的一些问题"><a href="#窗口触发的一些问题" class="headerlink" title="窗口触发的一些问题"></a>窗口触发的一些问题</h3><p>窗口是按 watermark 触发的，watermark 如果没有前进到 window end ， window 是不会触发的。</p>
<p>Flink的窗口触发具体机制需要去源码里面探寻</p>
<h3 id="Flink-SQL中的爆炸函数"><a href="#Flink-SQL中的爆炸函数" class="headerlink" title="Flink SQL中的爆炸函数"></a>Flink SQL中的爆炸函数</h3><p>Lateral View() 在Flink SQL中是unnest</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">users</span>, tag <span class="keyword">FROM</span> Orders <span class="keyword">CROSS</span> <span class="keyword">JOIN</span> <span class="keyword">UNNEST</span>(tags) <span class="keyword">AS</span> t (tag)</span><br></pre></td></tr></table></figure>

<h3 id="Flink-UI在Yarn下"><a href="#Flink-UI在Yarn下" class="headerlink" title="Flink UI在Yarn下"></a>Flink UI在Yarn下</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Flink UI 在 Yarn下很多选线卡看不到详细信息，很正常，因为Yarn这个运行模式有的消息只能在Yarn上管理控制</span><br></pre></td></tr></table></figure>

<h3 id="Flink的时区问题"><a href="#Flink的时区问题" class="headerlink" title="Flink的时区问题"></a>Flink的时区问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Flink的时间戳差了8个小时，可以用时间减去八个小时时差，生成一个减去8小时的列，作为watermark的时间戳。</span><br></pre></td></tr></table></figure>

<h3 id="Flink的心跳需求问题"><a href="#Flink的心跳需求问题" class="headerlink" title="Flink的心跳需求问题"></a>Flink的心跳需求问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用flink sql在实时计算当天凌晨截止到现在的累计数据的时候，计算步长是10分钟，如果这10分钟内没有新数据达到的话，现在的情况是这10分钟没有写记录，这就会造成业务查这个数据的时候需要找last value这种情形，设计一条方案让没有数据到达的时候也生成一条记录，这条记录的值就是last value。</span><br><span class="line"></span><br><span class="line">方案：</span><br><span class="line">往数据源发心跳数据。</span><br><span class="line">发送的数据格式和普通数据一样，只是这些数据不影响你的 agg 计算，比如 null 值。发送频率就根据需求去确定。</span><br></pre></td></tr></table></figure>

<h3 id="Flink避免重复劳动的一些方法"><a href="#Flink避免重复劳动的一些方法" class="headerlink" title="Flink避免重复劳动的一些方法"></a>Flink避免重复劳动的一些方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.写DDL+DML分别声明数据源和进行数据处理。</span><br><span class="line">2.groovy+ 规则引擎</span><br></pre></td></tr></table></figure>

<p>oppo：</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gg3fk4uvm2j20j50b1wgo.jpg" alt="微信截图_20200624155221.png"></p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gg3floj82tj20go0bw0v5.jpg" alt="FF36AEE6-1E6D-44da-80BB-9BD2FE8142D6.png"></p>
<h3 id="Flink配置参数"><a href="#Flink配置参数" class="headerlink" title="Flink配置参数"></a>Flink配置参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 开启 distinct agg 切分 </span><br><span class="line">table.optimizer.distinct-agg.split.enabled=true</span><br><span class="line"># 开启两阶段 即local-global 􏰝优化</span><br><span class="line">table.optimizer.agg-phase-strategy=TWO_PHASE</span><br><span class="line"># mini-batch 开启微批操作 </span><br><span class="line">table.exec.mini-batch.enabled=true</span><br><span class="line"># mini-batch的时间间隔，即作业需要额外忍受的延迟</span><br><span class="line">table.exec.mini-batch.allow-latency=5s</span><br><span class="line"># 一个节点中允许最多缓存的数据</span><br><span class="line">table.exec.mini-batch.size=5000</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">TableEnvironment tEnv = ...</span><br><span class="line"></span><br><span class="line">// access flink configuration</span><br><span class="line">Configuration configuration = tEnv.getConfig().getConfiguration();</span><br><span class="line">// set low-level key-value options</span><br><span class="line">configuration.setString(&quot;table.exec.mini-batch.enabled&quot;, &quot;true&quot;);</span><br><span class="line">configuration.setString(&quot;table.exec.mini-batch.allow-latency&quot;, &quot;5 s&quot;);</span><br><span class="line">configuration.setString(&quot;table.exec.mini-batch.size&quot;, &quot;5000&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="Flink-GlobalWindow"><a href="#Flink-GlobalWindow" class="headerlink" title="Flink GlobalWindow"></a>Flink GlobalWindow</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function">def <span class="title">testJoin</span><span class="params">()</span>: Unit </span>=&#123;</span><br><span class="line">   val env = StreamExecutionEnvironment.getExecutionEnvironment</span><br><span class="line">   env.setParallelism(<span class="number">3</span>)</span><br><span class="line">   val person = env.fromElements((<span class="string">"1"</span>,<span class="string">"小张"</span>),(<span class="string">"2"</span>,<span class="string">"小刘"</span>),(<span class="string">"3"</span>,<span class="string">"小力"</span>),(<span class="string">"4"</span>,<span class="string">"小心"</span>))</span><br><span class="line">   val money = env.fromElements((<span class="string">"1"</span>,<span class="number">100</span>),(<span class="string">"2"</span>,<span class="number">200</span>),(<span class="string">"3"</span>,<span class="number">300</span>))</span><br><span class="line">   person.join(money)</span><br><span class="line">     .where(_._1)</span><br><span class="line">     .equalTo(_._1)</span><br><span class="line">     .window(GlobalWindows.create())</span><br><span class="line">     .apply((x,y) =&gt;&#123;</span><br><span class="line">       println( x+<span class="string">"==="</span>+y)</span><br><span class="line">       <span class="string">"xxx"</span></span><br><span class="line">      &#125;).print()</span><br><span class="line">   env.execute()</span><br><span class="line">   println(<span class="string">"end"</span>)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>无法运行，加个triggle(xxx)解决，默认是NeverTrigger</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line">.window....</span><br><span class="line">.trigger(CountTrigger.of(1))</span><br><span class="line">.apply...</span><br></pre></td></tr></table></figure>

<h3 id="如何排查Kafka消息的异常"><a href="#如何排查Kafka消息的异常" class="headerlink" title="如何排查Kafka消息的异常"></a>如何排查Kafka消息的异常</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">记录住报错时的kafka offset，然后分阶段打印到控制台，再对比一下，把输出的格式分别调为Row.class 以前pojo类，或注释下一阶段代码，回放kafka 故障的offset数据，各个stream排查</span><br></pre></td></tr></table></figure>

<h3 id="MySQL的迁移"><a href="#MySQL的迁移" class="headerlink" title="MySQL的迁移"></a>MySQL的迁移</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">--涉及到MySQL的迁移，我这边推荐少量数据的话使用MySQLDump.</span><br><span class="line">--还涉及到mysql安装在docker里的情况</span><br><span class="line">--mysqldump的用法</span><br><span class="line">    --备份所有数据库：</span><br><span class="line"></span><br><span class="line">    mysqldump -uroot -p --all-databases &gt; /backup/mysqldump/all.db</span><br><span class="line">    --备份指定数据库：</span><br><span class="line"></span><br><span class="line">mysqldump -uroot -p test &gt; /backup/mysqldump/test.db</span><br><span class="line">    --备份指定数据库指定表(多个表以空格间隔)</span><br><span class="line"></span><br><span class="line">mysqldump -uroot -p  mysql db event &gt; /backup/mysqldump/2table.db</span><br><span class="line">    --备份指定数据库排除某些表</span><br><span class="line"></span><br><span class="line">mysqldump -uroot -p test --ignore-table=test.t1 --ignore-table=test.t2 &gt; /backup/mysqldump/test2.db</span><br><span class="line">    --Docker进入mysql容器</span><br><span class="line">docker exec -it mysql1 bash //mysql1是我启动的mysql服务的name</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">--带docker的命令</span><br><span class="line">1.查看当前启动的mysql运行容器</span><br><span class="line"></span><br><span class="line">docker ps </span><br><span class="line"></span><br><span class="line">2.使用以下命令备份导出数据库中的所有表结构和数据</span><br><span class="line"></span><br><span class="line">docker exec -it  mysql mysqldump -uroot -p123456 paas_portal &gt; /cloud/sql/paas_portal.sql</span><br><span class="line">3.只导数据不导结构</span><br><span class="line"></span><br><span class="line">    mysqldump　-t　数据库名　-uroot　-p　&gt;　xxx.sql　</span><br><span class="line"></span><br><span class="line">docker exec -it mysql mysqldump -t -uroot -p123456 paas_portal &gt;/cloud/sql/paas_portal_dml.sql</span><br><span class="line">4.只导结构不导数据</span><br><span class="line"></span><br><span class="line">mysqldump　--opt　-d　数据库名　-u　root　-p　&gt;　xxx.sql　</span><br><span class="line"></span><br><span class="line">docker exec -it mysql mysqldump  --opt -d   -uroot -p123456 paas_portal &gt;/cloud/sql/paas_portal_ddl.sql</span><br><span class="line"></span><br><span class="line">5.导出特定表的结构</span><br><span class="line"></span><br><span class="line">mysqldump　-uroot　-p　-B　数据库名　--table　表名　&gt;　xxx.sql</span><br><span class="line"></span><br><span class="line">docker exec -it mysql mysqldump -uroot -p -B paas_portal --table user &gt; user.sql</span><br></pre></td></tr></table></figure>

<h3 id="远程调试Flink"><a href="#远程调试Flink" class="headerlink" title="远程调试Flink"></a>远程调试Flink</h3><p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gghbc3d8shj20le0jvtab.jpg" alt="TIM截图20200706160357.png"></p>
<p><a href="https://stackoverflow.com/questions/34816847/debugging-on-the-remote-cluster" target="_blank" rel="noopener">https://stackoverflow.com/questions/34816847/debugging-on-the-remote-cluster</a></p>
<h3 id="Log4J-和-slf4j联合使用"><a href="#Log4J-和-slf4j联合使用" class="headerlink" title="Log4J 和 slf4j联合使用"></a>Log4J 和 slf4j联合使用</h3><p>slf4j是什么？slf4j只是定义了一组日志接口，但并未提供任何实现，既然这样，为什么要用slf4j呢？log4j不是已经满足要求了吗？</p>
<p>是的，log4j满足了要求，但是，日志框架并不只有log4j一个，你喜欢用log4j，有的人可能更喜欢logback，有的人甚至用jdk自带的日志框架，这种情况下，如果你要依赖别人的jar，整个系统就用了两个日志框架，如果你依赖10个jar，每个jar用的日志框架都不同，岂不是一个工程用了10个日志框架，那就乱了！</p>
<p>如果你的代码使用slf4j的接口，具体日志实现框架你喜欢用log4j，其他人的代码也用slf4j的接口，具体实现未知，那你依赖其他人jar包时，整个工程就只会用到log4j日志框架，这是一种典型的门面模式应用，与jvm思想相同，我们面向slf4j写日志代码，slf4j处理具体日志实现框架之间的差异，正如我们面向jvm写java代码，jvm处理操作系统之间的差异，结果就是，一处编写，到处运行。况且，现在越来越多的开源工具都在用slf4j了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;1.7.21&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>然后，弄到slf4j与log4j的关联jar包，通过这个东西，将对slf4j接口的调用转换为对log4j的调用，不同的日志实现框架，这个转换工具不同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;1.7.21&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>以及原来的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;log4j&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;log4j&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;1.2.17&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Log4J2的使用"><a href="#Log4J2的使用" class="headerlink" title="Log4J2的使用"></a>Log4J2的使用</h3><h4 id="Log4J2和Log4J1的比较"><a href="#Log4J2和Log4J1的比较" class="headerlink" title="Log4J2和Log4J1的比较"></a>Log4J2和Log4J1的比较</h4><h5 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h5><p>log4j是通过一个**.properties<strong>的文件作为主配置文件的，而现在的log4j 2则已经弃用了这种方式，采用的是</strong>.xml，.json或者.jsn**这种方式。</p>
<h5 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h5><p>log4j只需要引入一个依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>log4j 2则是需要2个核心</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="配置文件-1"><a href="#配置文件-1" class="headerlink" title="配置文件"></a>配置文件</h5><p>log4J.properties</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#此句为定义名为stdout的输出端是哪种类型，可以是</span><br><span class="line">#org.apache.log4j.ConsoleAppender（控制台），</span><br><span class="line">#org.apache.log4j.FileAppender（文件），</span><br><span class="line">#org.apache.log4j.DailyRollingFileAppender（每天产生一个日志文件），</span><br><span class="line">#org.apache.log4j.RollingFileAppender（文件大小到达指定尺寸的时候产生一个新的文件）</span><br><span class="line">#org.apache.log4j.WriterAppender（将日志信息以流格式发送到任意指定的地方）</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line"></span><br><span class="line">#此句为定义名为stdout的输出端的layout是哪种类型，可以是</span><br><span class="line">#org.apache.log4j.HTMLLayout（以HTML表格形式布局），</span><br><span class="line">#org.apache.log4j.PatternLayout（可以灵活地指定布局模式），</span><br><span class="line">#org.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串），</span><br><span class="line">#org.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别等等信息）</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line"></span><br><span class="line">#如果使用pattern布局就要指定的打印信息的具体格式ConversionPattern，打印参数如下：</span><br><span class="line">#%m 输出代码中指定的消息</span><br><span class="line">#%p 输出优先级，即DEBUG，INFO，WARN，ERROR，FATAL</span><br><span class="line">#%r 输出自应用启动到输出该log信息耗费的毫秒数</span><br><span class="line">#%c 输出所属的类目，通常就是所在类的全名</span><br><span class="line">#%t 输出产生该日志事件的线程名</span><br><span class="line">#%n 输出一个回车换行符，Windows平台为“rn”，Unix平台为“n”</span><br><span class="line">#%d 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式</span><br><span class="line">#比如：%d&#123;yyyy MMM dd HH:mm:ss,SSS&#125; 输出类似：2002年10月18日 22：10：28，921</span><br><span class="line">#%l 输出日志事件的发生位置，包括类目名、发生的线程，以及在代码中的行数。</span><br><span class="line">#[Log4JDemo]是log信息的开头，可以为任意字符，一般为项目简称。</span><br><span class="line">#log4j.appender.stdout.layout.ConversionPattern=[Log4JDemo] %p [%t] %C.%M(%L) | %m%n</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=[Log4JDemo] %p [%t] %C.%M(%L) | %m%n</span><br><span class="line"></span><br><span class="line">#设置日志文件</span><br><span class="line">log4j.appender.LogFile=org.apache.log4j.FileAppender</span><br><span class="line">log4j.appender.LogFile.File=log4j.log</span><br><span class="line">log4j.appender.LogFile.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.LogFile.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %l  %m%n</span><br><span class="line"></span><br><span class="line">#此句为将等级为ALL的日志信息输出到stdout和LogFile这两个目的地</span><br><span class="line">#stdout和R的定义在下面的代码，可以任意起名</span><br><span class="line">#等级可分为OFF、FATAL、ERROR、WARN、INFO、DEBUG、ALL</span><br><span class="line">#如果配置OFF则不打出任何信息</span><br><span class="line">#如果配置为INFO这样只显示INFO, WARN, ERROR的log信息，而DEBUG信息不会被显示，</span><br><span class="line">#log4j.rootCategory=ERROR,stdout,LogFile</span><br><span class="line">#log4j.rootCategory=ERROR,LogFile</span><br><span class="line">log4j.rootCategory=ERROR,stdout</span><br></pre></td></tr></table></figure>

<p>log4j2.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--日志级别以及优先级排序: OFF &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE &gt; ALL --&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--Configuration后面的status，这个用于设置log4j2自身内部的信息输出，可以不设置，当设置成trace时，你会看到log4j2内部各种详细输出--&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--monitorInterval：Log4j能够自动检测修改配置 文件和重新配置本身，设置间隔秒数--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">configuration</span> <span class="attr">status</span>=<span class="string">"WARN"</span> <span class="attr">monitorInterval</span>=<span class="string">"30"</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--先定义所有的appender--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">appenders</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--这个输出控制台的配置--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">console</span> <span class="attr">name</span>=<span class="string">"Console"</span> <span class="attr">target</span>=<span class="string">"SYSTEM_OUT"</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--输出日志的格式--&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%d&#123;HH:mm:ss:SSS&#125;] [%p] - %l - %m%n"</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">console</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--文件会打印出所有信息，这个log每次运行程序会自动清空，由append属性决定，这个也挺有用的，适合临时测试用--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">File</span> <span class="attr">name</span>=<span class="string">"log"</span> <span class="attr">fileName</span>=<span class="string">"log/test.log"</span> <span class="attr">append</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"%d&#123;HH:mm:ss.SSS&#125; %-5level %class&#123;36&#125; %L %M - %msg%xEx%n"</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">File</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!-- 这个会打印出所有的info及以下级别的信息，每次大小超过size，则这size大小的日志会自动存入按年份-月份建立的文件夹下面并进行压缩，作为存档--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"RollingFileInfo"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;sys:user.home&#125;/logs/info.log"</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">filePattern</span>=<span class="string">"$&#123;sys:user.home&#125;/logs/$$&#123;date:yyyy-MM&#125;/info-%d&#123;yyyy-MM-dd&#125;-%i.log"</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!--控制台只输出level及以上级别的信息（onMatch），其他的直接拒绝（onMismatch）--&gt;</span>        </span><br><span class="line">             <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"info"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%d&#123;HH:mm:ss:SSS&#125;] [%p] - %l - %m%n"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span>/&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"100 MB"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"RollingFileWarn"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;sys:user.home&#125;/logs/warn.log"</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">filePattern</span>=<span class="string">"$&#123;sys:user.home&#125;/logs/$$&#123;date:yyyy-MM&#125;/warn-%d&#123;yyyy-MM-dd&#125;-%i.log"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"warn"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%d&#123;HH:mm:ss:SSS&#125;] [%p] - %l - %m%n"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span>/&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"100 MB"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- DefaultRolloverStrategy属性如不设置，则默认为最多同一文件夹下7个文件，这里设置了20 --&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">DefaultRolloverStrategy</span> <span class="attr">max</span>=<span class="string">"20"</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"RollingFileError"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;sys:user.home&#125;/logs/error.log"</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">filePattern</span>=<span class="string">"$&#123;sys:user.home&#125;/logs/$$&#123;date:yyyy-MM&#125;/error-%d&#123;yyyy-MM-dd&#125;-%i.log"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"error"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"[%d&#123;HH:mm:ss:SSS&#125;] [%p] - %l - %m%n"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span>/&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"100 MB"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">appenders</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--然后定义logger，只有定义了logger并引入的appender，appender才会生效--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">loggers</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--过滤掉spring和mybatis的一些无用的DEBUG信息--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.springframework"</span> <span class="attr">level</span>=<span class="string">"INFO"</span>&gt;</span><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.mybatis"</span> <span class="attr">level</span>=<span class="string">"INFO"</span>&gt;</span><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"all"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"RollingFileInfo"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"RollingFileWarn"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"RollingFileError"</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">loggers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h4><p>log4j</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Logger LOGGER = Logger.getLogger(Test<span class="class">.<span class="keyword">class</span>.<span class="title">getName</span>())</span>;</span><br></pre></td></tr></table></figure>

<p>log4j2</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.Level;</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.LogManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.Logger;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Logger logger = LogManager.getLogger(Test<span class="class">.<span class="keyword">class</span>.<span class="title">getName</span>())</span>;</span><br></pre></td></tr></table></figure>

<h3 id="Spark-On-Yarn-结束任务的方式"><a href="#Spark-On-Yarn-结束任务的方式" class="headerlink" title="Spark On Yarn 结束任务的方式"></a>Spark On Yarn 结束任务的方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、yarn app -kill  appid 丢数据或者多数据</span><br><span class="line">2、kill -15  pid        丢数据或者多数据</span><br><span class="line">3、监听http或hdfs目录方式     ok</span><br><span class="line">建议大家用第三种方式</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">我们用的第一种 针对丢数据或者多数据 我们代码里把实时过来的数据checkpoint 下一次再跑的时候会去mysql里修改offset Kafka再读进来的数据和上次checkpoint的数据对比一下 去重</span><br></pre></td></tr></table></figure>

<h3 id="CharSequence"><a href="#CharSequence" class="headerlink" title="CharSequence"></a>CharSequence</h3><p>第一次见到这个CharSequence的时候感觉挺疑惑的，不知道为什么要有这个东西。这个CharSequence是String和Stringbuilder共同实现的接口类，在下面这种应用场景中，只有CharSequence是适用的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">"abc"</span>;</span><br><span class="line">StringBuilder strbu = <span class="keyword">new</span> StringBuilder(<span class="string">"def"</span>);</span><br><span class="line"><span class="keyword">boolean</span> boo = <span class="keyword">true</span>;</span><br><span class="line">CharSequence cs = boo?str:strbu;</span><br></pre></td></tr></table></figure>

<h3 id="并发编程，创建多少个线程合适"><a href="#并发编程，创建多少个线程合适" class="headerlink" title="并发编程，创建多少个线程合适"></a>并发编程，创建多少个线程合适</h3><p>分为两种情况讨论，CPU密集型和 I/O密集型</p>
<p>在CPU密集型的程序中，理论上 线程数量 = CPU 核数（逻辑）就可以了，但是实际上，数量一般会设置为 CPU 核数（逻辑）+ 1，</p>
<blockquote>
<p>计算(CPU)密集型的线程恰好在某时因为发生一个页错误或者因其他原因而暂停，刚好有一个“额外”的线程，可以确保在这种情况下CPU周期不会中断工作。</p>
</blockquote>
<p>在I/O密集型程序的程序中，单核心线程数一般来说是这么设置的：</p>
<blockquote>
<p>最佳线程数 = (1/CPU利用率) = 1 + (I/O耗时/CPU耗时)</p>
</blockquote>
<p>多核心的线程数为：</p>
<blockquote>
<p>最佳线程数 = CPU核心数 * (1/CPU利用率) = CPU核心数 * (1 + (I/O耗时/CPU耗时))</p>
</blockquote>
<p>如果都是IO耗时的话，可以从纯理论上直接回答是2N或者2N+1</p>
<p>还有很多APM（Application Performance Manager）工具可以帮我们得到具体的数据比如 SkyWalking、CAT、zipkin</p>
<blockquote>
<p>假设要求一个系统的 TPS（Transaction Per Second 或者 Task Per Second）至少为20，然后假设每个Transaction由一个线程完成，继续假设平均每个线程处理一个Transaction的时间为4s</p>
</blockquote>
<p>如何设计线程个数，使得可以在1s内处理完20个Transaction？</p>
<p>但是，但是，这是因为没有考虑到CPU数目。家里又没矿，一般服务器的CPU核数为16或者32，如果有80个线程，那么肯定会带来太多不必要的线程上下文切换开销（希望这句话你可以主动说出来），这就需要调优了，来做到最佳 balance</p>
<blockquote>
<p>计算操作需要5ms，DB操作需要 100ms，对于一台 8个CPU的服务器，怎么设置线程数呢？</p>
</blockquote>
<p>线程数 = 8 * (1 + 100/5) = 168 (个)</p>
<h3 id="Google-AutoValue"><a href="#Google-AutoValue" class="headerlink" title="Google AutoValue"></a>Google AutoValue</h3><p>Google的 AutoValue 用起来说实话不是特别方便，对于一些需要用到映射的支持也不是十分友好，总之一句话，在国内的生态下是不太适合使用的，虽然<code>EffectiveJava</code>的作者嗯吹这个组件。</p>
<p><a href="https://www.jianshu.com/p/e778e96fb751" target="_blank" rel="noopener">https://www.jianshu.com/p/e778e96fb751</a></p>
<p>这篇博客和AutoValue在Github上面自己的文档算是讲的比较好一点的文档。</p>
<h3 id="Idea-注释模板设置"><a href="#Idea-注释模板设置" class="headerlink" title="Idea 注释模板设置"></a>Idea 注释模板设置</h3><p><a href="https://blog.csdn.net/shadow_zed/article/details/80551460#commentBox" target="_blank" rel="noopener">https://blog.csdn.net/shadow_zed/article/details/80551460#commentBox</a></p>
<h3 id="Python中使用-join-替代-处理字符串"><a href="#Python中使用-join-替代-处理字符串" class="headerlink" title="Python中使用.join()替代+处理字符串"></a>Python中使用<code>.join()</code>替代<code>+</code>处理字符串</h3><p><a href="https://towardsdatascience.com/do-not-use-to-join-strings-in-python-f89908307273" target="_blank" rel="noopener">https://towardsdatascience.com/do-not-use-to-join-strings-in-python-f89908307273</a></p>
<h3 id="存储图片"><a href="#存储图片" class="headerlink" title="存储图片"></a>存储图片</h3><p>1.使用<code>CDN </code>等技术替代数据库存储。</p>
<p>2.存储选择特殊文件系统，比如S3、淘宝的TFS等等</p>
<p>数据库里面尽量只要写路径</p>
<h3 id="java的一些包的解释"><a href="#java的一些包的解释" class="headerlink" title="java的一些包的解释"></a>java的一些包的解释</h3><p><strong>PO(persistant object) 持久对象</strong><br>在o/r映射的时候出现的概念，如果没有o/r映射，没有这个概念存在了。通常对应数据模型(数据库),本身还有部分业务逻辑的处理。可以看成是与数据库 中的表相映射的java对象。最简单的PO就是对应数据库中某个表中的一条记录，多个记录可以用PO的集合。PO中应该不包含任何对数据库的操作。</p>
<p><strong>VO(value object) 值对象</strong><br>通常用于业务层之间的数据传递，和PO一样也是仅仅包含数据而已。但应是抽象出的业务对象,可以和表对应,也可以不,这根据业务的需要.个人觉得同DTO(数据传输对象),在web上传递。</p>
<p><strong>TO(Transfer Object)，数据传输对象</strong><br>在应用程序不同tie(关系)之间传输的对象</p>
<p><strong>BO(business object) 业务对象</strong><br>从业务模型的角度看,见UML元件领域模型中的领域对象。封装业务逻辑的java对象,通过调用DAO方法,结合PO,VO进行业务操作。</p>
<p><strong>POJO(plain ordinary java object)</strong> </p>
<p>简单无规则java对象<br>纯的传统意义的java对象。就是说在一些Object/Relation Mapping工具中，能够做到维护数据库表记录的persisent object完全是一个符合Java Bean规范的纯Java对象，没有增加别的属性和方法。我的理解就是最基本的Java Bean，只有属性字段及setter和getter方法。</p>
<p><strong>DAO(data access object) 数据访问对象</strong><br>是一个sun的一个标准j2ee设计模式，这个模式中有个接口就是DAO，它负持久层的操作。为业务层提供接口。此对象用于访问数据库。通常和PO结合使 用，DAO中包含了各种数据库的操作方法。通过它的方法,结合PO对数据库进行相关的操作。夹在业务逻辑与数据库资源中间。配合VO, 提供数据库的CRUD操作…</p>
<h3 id="IDEA2020-显示内存大小"><a href="#IDEA2020-显示内存大小" class="headerlink" title="IDEA2020 显示内存大小"></a>IDEA2020 显示内存大小</h3><p>双击shift 填入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show memory indicator</span><br></pre></td></tr></table></figure>

<p>在里面打开<code>ON</code></p>
<h3 id="Java程序结束前运行的代码"><a href="#Java程序结束前运行的代码" class="headerlink" title="Java程序结束前运行的代码"></a>Java程序结束前运行的代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShutdownTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"开始"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000000</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">"repeat"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 当使用 kill pid 或者 kill -15 pid的时候这个部分是会执行后才关闭程序的</span></span><br><span class="line">        Runtime.getRuntime().addShutdownHook(<span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"关闭"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Java8-try-…catch"><a href="#Java8-try-…catch" class="headerlink" title="Java8 try()…catch()"></a>Java8 try()…catch()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这个FileWriter会自己关掉</span></span><br><span class="line"><span class="keyword">try</span>(FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"test.txt"</span>)) &#123;</span><br><span class="line">    fw.write(<span class="string">"test"</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span>(Exception ex) &#123;</span><br><span class="line">    ex.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通常我们使用try…catch()捕获异常的，如果遇到类似IO流的处理，要在finally部分关闭IO流，当然这个是JDK1.7之前的写法了；在JDK7优化后的<code>try-with-resource</code>语句，该语句确保了每个资源,在语句结束时关闭。所谓的资源是指在程序完成后，必须关闭的流对象。写在()里面的流对象对应的类都实现了自动关闭接口AutoCloseable。</p>
<h3 id="idea中设置maven的jvm参数"><a href="#idea中设置maven的jvm参数" class="headerlink" title="idea中设置maven的jvm参数"></a>idea中设置maven的jvm参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file-&gt;setting-&gt;Build,Execution,Deployment-&gt;Maven-&gt;Runner</span><br><span class="line">VM option栏设置jvm参数，-Xmx1g -XX:MaxMetaspaceSize=128m</span><br></pre></td></tr></table></figure>

<h3 id="命令行中设置maven的jvm参数"><a href="#命令行中设置maven的jvm参数" class="headerlink" title="命令行中设置maven的jvm参数"></a>命令行中设置maven的jvm参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 可以在mvn.cmd（linux中是mvn.sh或mvn）添加set MAVEN_OPTS=-Xmx1g -XX:MaxMetaspaceSize=128m</span><br><span class="line">2. 也可以添加MAVEN_OPTS环境变量</span><br></pre></td></tr></table></figure>

<h3 id="String-SubString"><a href="#String-SubString" class="headerlink" title="String SubString"></a>String SubString</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">String Str = <span class="keyword">new</span> String(<span class="string">"www.runoob.com"</span>);</span><br><span class="line"></span><br><span class="line">System.out.print(<span class="string">"返回值 :"</span> );</span><br><span class="line">System.out.println(Str.substring(<span class="number">4</span>) );</span><br><span class="line"></span><br><span class="line">System.out.print(<span class="string">"返回值 :"</span> );</span><br><span class="line">System.out.println(Str.substring(<span class="number">4</span>, <span class="number">10</span>) );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">返回值 :runoob.com</span><br><span class="line">返回值 :runoob</span><br></pre></td></tr></table></figure>

<h3 id="通用的空间-地理空间ASL许可的开源Java库"><a href="#通用的空间-地理空间ASL许可的开源Java库" class="headerlink" title="通用的空间/地理空间ASL许可的开源Java库"></a>通用的空间/地理空间ASL许可的开源Java库</h3><p><em>Spatial4j</em></p>
<h3 id="IntegerCache"><a href="#IntegerCache" class="headerlink" title="IntegerCache"></a>IntegerCache</h3><p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gidwsbcl2aj20jn0k1ab1.jpg" alt="QzpcVXNlcnNcZmx5aG9cQXBwRGF0YVxSb2FtaW5nXERpbmdUYWxrXDExMzI4MDM2MF92MlxJbWFnZUZpbGVzXDIxODg5NzUyOFwxNTk5MTQ4OTI2NTQ3XzAwNjc2REI3LTEwMUYtNDFmNi04RDg1LTQxRDUxNEJENTZGMS5wbmc=.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Integer a = <span class="number">1000</span>, b = <span class="number">1000</span>;</span><br><span class="line">    System.out.println(a == b);<span class="comment">//1</span></span><br><span class="line">    Integer c = <span class="number">100</span>, d = <span class="number">100</span>;</span><br><span class="line">    System.out.println(c == d);<span class="comment">//2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>false<br>true</p>
<p>因为存在这个IntegerCache，-128-127范围内是有Cache对象的，不会新生成。</p>
<h3 id="书单推荐"><a href="#书单推荐" class="headerlink" title="书单推荐"></a>书单推荐</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">《Effective Java中文版》</span><br><span class="line">《实战Java虚拟机：JVM故障诊断与性能优化》</span><br><span class="line">《HotSpot实战》</span><br><span class="line">《实战Java高并发程序设计》</span><br><span class="line">《深入分析Java Web技术内幕》</span><br><span class="line">《大型网站技术架构 核心原理与案例分析》</span><br><span class="line">《大型网站系统与Java中间件实践》</span><br><span class="line">《从Paxos到ZooKeeper 分布式一致性原理与实践》</span><br><span class="line">《代码大全（第2版） 》</span><br><span class="line">《算法导论》</span><br><span class="line">《计算机程序设计艺术》</span><br><span class="line">《重构》</span><br><span class="line">《设计模式》</span><br><span class="line">《人月神话》</span><br><span class="line">《程序员修炼之道》</span><br></pre></td></tr></table></figure>

<h3 id="反射API"><a href="#反射API" class="headerlink" title="反射API"></a>反射API</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hugh.draft.reflection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@program</span>: draft</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 反射</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Fly.Hugh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2020-09-04 14:29</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RefleactionAPI</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        URL url = <span class="keyword">new</span> URL(<span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">        String urlString = url.toExternalForm();</span><br><span class="line">        System.out.println(urlString);</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">"==============等价==============&gt;"</span>);</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        Class&lt;?&gt; type = Class.forName(<span class="string">"java.net.URL"</span>);</span><br><span class="line">        Constructor&lt;?&gt; constructor = type.getConstructor(String<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        Object instance = constructor.newInstance(<span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">        Method method = type.getMethod(<span class="string">"toExternalForm"</span>);</span><br><span class="line">        Object methodCallResult = method.invoke(instance);</span><br><span class="line"></span><br><span class="line">        System.out.println(methodCallResult);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>简单的Java 反射API，还需要更深入的了解</p>
<h3 id="最详细的Anaconda安装步骤和注意点"><a href="#最详细的Anaconda安装步骤和注意点" class="headerlink" title="最详细的Anaconda安装步骤和注意点"></a>最详细的Anaconda安装步骤和注意点</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://zhuanlan.zhihu.com/p/32925500</span><br></pre></td></tr></table></figure>

<h3 id="CUDA-Driver版本选型"><a href="#CUDA-Driver版本选型" class="headerlink" title="CUDA Driver版本选型"></a>CUDA Driver版本选型</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html#cuda-major-component-versions</span><br></pre></td></tr></table></figure>

<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gihww4dllgj20zl0kldkg.jpg" alt="{291168FC-C79D-4F29-AE0B-DA3E3184D006}_20200907110920.jpg"></p>
<h3 id="CuDNN版本"><a href="#CuDNN版本" class="headerlink" title="CuDNN版本"></a>CuDNN版本</h3><p>CuDNN的版本是和CUDA版本对应，下载页面就能看到，安装十分简单，三个文件夹的文件和外面的一个文件，单独复制到已经安装好的CUDA文件夹中即可。</p>
<h3 id="Maven-阿里云插件仓库配置"><a href="#Maven-阿里云插件仓库配置" class="headerlink" title="Maven 阿里云插件仓库配置"></a>Maven 阿里云插件仓库配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-plugin<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="IDEA配置仓库最好用HTTPS"><a href="#IDEA配置仓库最好用HTTPS" class="headerlink" title="IDEA配置仓库最好用HTTPS"></a>IDEA配置仓库最好用HTTPS</h3><p>Win上有可能出现如下错误，mac上却没问题，佛了</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gilaolon3sj20n603n0wj.jpg" alt="QzpcVXNlcnNcQWRtaW5pc3RyYXRvclxBcHBEYXRhXFJvYW1pbmdcRGluZ1RhbGtcMzU1NTg3MDEyX3YyXEltYWdlRmlsZXNcMjE4ODk3NTI4XDE1OTk3MDA4MzA4MTBfNkQxRUYzMkItMURFMy00MjE1LThEODMtQ0M5ODMzOTdFMDY2LnBuZw==.png"></p>
<h3 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h3><p><strong>五个常用框架</strong></p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1giynphltjjj20jx0acdfu.jpg" alt="undefined"></p>
<p>1.spring framework<br>也就是我们经常说的spring框架，包括了ioc依赖注入，Context上下文、bean管理、springmvc等众多功能模块，其它spring项目比如spring boot也会依赖spring框架。</p>
<p>2.spring boot<br>它的目标是简化Spring应用和服务的创建、开发与部署，简化了配置文件，使用嵌入式web服务器，含有诸多开箱即用的微服务功能，可以和spring cloud联合部署。</p>
<p>Spring Boot的核心思想是约定大于配置，应用只需要很少的配置即可，简化了应用开发模式。</p>
<p>3.Spring Data<br>是一个数据访问及操作的工具集，封装了多种数据源的操作能力，包括：jdbc、Redis、MongoDB等。</p>
<p>4.Spring Cloud<br>是一套完整的微服务解决方案，是一系列不同功能的微服务框架的集合。Spring Cloud基于Spring Boot，简化了分布式系统的开发，集成了服务发现、配置管理、消息总线、负载均衡、断路器、数据监控等各种服务治理能力。比如sleuth提供了全链路追踪能力，Netflix套件提供了hystrix熔断器、zuul网关等众多的治理组件。config组件提供了动态配置能力，bus组件支持使用RabbitMQ、kafka、Activemq等消息队列，实现分布式服务之间的事件通信。</p>
<p>5.Spring Security<br>主要用于快速构建安全的应用程序和服务，在Spring Boot和Spring Security OAuth2的基础上，可以快速实现常见安全模型，如单点登录，令牌中继和令牌交换。你可以了解一下oauth2授权机制和jwt认证方式。oauth2是一种授权机制，规定了完备的授权、认证流程。JWT全称是JSON Web Token，是一种把认证信息包含在token中的认证实现，oauth2授权机制中就可以应用jwt来作为认证的具体实现方法。</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1giynqh3y5rj20st0btmxe.jpg" alt="undefined"></p>
<p>本文涉及的流程与实现默认都是基于最新的5.x版本。</p>
<p>spring中的几个重要概念如下：</p>
<h4 id="1-IOC"><a href="#1-IOC" class="headerlink" title="1.IOC"></a>1.IOC</h4><p>IOC，就是控制反转，如最左边，拿公司招聘岗位来举例：</p>
<p>假设一个公司有产品、研发、测试等岗位。如果是公司根据岗位要求，逐个安排人选，如图中向下的箭头，这是正向流程。如果反过来，不用公司来安排候选人，而是由第三方猎头来匹配岗位和候选人，然后进行推荐，如图中向上的箭头，这就是控制反转。</p>
<p>在spring中，对象的属性是由对象自己创建的，就是正向流程；如果属性不是对象创建，而是由spring来自动进行装配，就是控制反转。这里的DI也就是依赖注入，就是实现控制反转的方式。正向流程导致了对象于对象之间的高耦合，IOC可以解决对象耦合的问题，有利于功能的复用，能够使程序的结构变得非常灵活。</p>
<h4 id="2-context上下文和bean"><a href="#2-context上下文和bean" class="headerlink" title="2.context上下文和bean"></a>2.context上下文和bean</h4><p>spring进行IOC实现时使用的有两个概念：context上下文和bean。</p>
<p>如中间图所示，所有被spring管理的、由spring创建的、用于依赖注入的对象，就叫做一个bean。Spring创建并完成依赖注入后，所有bean统一放在一个叫做context的上下文中进行管理。</p>
<h4 id="3-AOP"><a href="#3-AOP" class="headerlink" title="3.AOP"></a>3.AOP</h4><p>AOP就是面向切面编程。如右面的图，一般程序执行流程是从controller层调用service层、然后service层调用DAO层访问数据，最后在逐层返回结果。</p>
<p>这个是图中向下箭头所示的按程序执行顺序的纵向处理。但是，一个系统中会有多个不同的服务，例如用户服务、商品信息服务等等，每个服务的controller层都需要验证参数，都需要处理异常，如果按照图中红色的部分，对不同服务的纵向处理流程进行横切，在每个切面上完成通用的功能，例如身份认证、验证参数、处理异常等等、这样就不用在每个服务中都写相同的逻辑了，这就是AOP思想解决的问题。</p>
<p>AOP以功能进行划分，对服务顺序执行流程中的不同位置进行横切，完成各服务共同需要实现的功能。</p>
<h3 id="Java加载properties的六种方式"><a href="#Java加载properties的六种方式" class="headerlink" title="Java加载properties的六种方式"></a>Java加载properties的六种方式</h3><p>Java加载properties文件的方式主要分为两大类：</p>
<p>一种是通过<code>import java.util.Properties</code>类中的<code>load(InputStream in)</code>方法加载；</p>
<p>另一种是通过<code>import java.util.ResourceBundle</code>类的<code>getBundle(String baseName)</code>方法加载。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.util;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> java.util.PropertyResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesUtil</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> String basePath = <span class="string">"src/prop.properties"</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> String name = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> String nickname = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> String password = <span class="string">""</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 一、 使用java.util.Properties类的load(InputStream in)方法加载properties文件</span></span><br><span class="line"><span class="comment">   * </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getName1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">      InputStream is = <span class="keyword">new</span> FileInputStream(basePath);</span><br><span class="line">      prop.load(is);</span><br><span class="line">      name = prop.getProperty(<span class="string">"username"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 二、 使用class变量的getResourceAsStream()方法</span></span><br><span class="line"><span class="comment">   * 注意：getResourceAsStream()读取路径是与本类的同一包下</span></span><br><span class="line"><span class="comment">   * </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getName2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">    InputStream is = PropertiesUtil<span class="class">.<span class="keyword">class</span></span></span><br><span class="line">        .getResourceAsStream("/com/util/prop.properties");</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      prop.load(is);</span><br><span class="line">      name = prop.getProperty(<span class="string">"username"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 三、</span></span><br><span class="line"><span class="comment">   * 使用class.getClassLoader()所得到的java.lang.ClassLoader的getResourceAsStream()方法</span></span><br><span class="line"><span class="comment">   * getResourceAsStream(name)方法的参数必须是包路径+文件名+.后缀 否则会报空指针异常</span></span><br><span class="line"><span class="comment">   * </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getName3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">    InputStream is = PropertiesUtil<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span></span><br><span class="line">        .getResourceAsStream("com/util/prop.properties");</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      prop.load(is);</span><br><span class="line"> </span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 四、 使用java.lang.ClassLoader类的getSystemResourceAsStream()静态方法</span></span><br><span class="line"><span class="comment">   * getSystemResourceAsStream()方法的参数格式也是有固定要求的</span></span><br><span class="line"><span class="comment">   * </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getName4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">    InputStream is = ClassLoader</span><br><span class="line">        .getSystemResourceAsStream(<span class="string">"com/util/prop.properties"</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      prop.load(is);</span><br><span class="line">      name = prop.getProperty(<span class="string">"username"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 五、 使用java.util.ResourceBundle类的getBundle()方法</span></span><br><span class="line"><span class="comment">   * 注意：这个getBundle()方法的参数只能写成包路径+properties文件名，否则将抛异常</span></span><br><span class="line"><span class="comment">   * </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getName5</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ResourceBundle rb = ResourceBundle.getBundle(<span class="string">"com/util/prop"</span>);</span><br><span class="line">    password = rb.getString(<span class="string">"password"</span>);</span><br><span class="line">    <span class="keyword">return</span> password;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 六、 使用java.util.PropertyResourceBundle类的构造函数</span></span><br><span class="line"><span class="comment">   * </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getName6</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      InputStream is = <span class="keyword">new</span> FileInputStream(basePath);</span><br><span class="line">      ResourceBundle rb = <span class="keyword">new</span> PropertyResourceBundle(is);</span><br><span class="line">      nickname = rb.getString(<span class="string">"nickname"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> nickname;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 测试</span></span><br><span class="line"><span class="comment">   * </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"name1:"</span> + PropertiesUtil.getName1());</span><br><span class="line">    System.out.println(<span class="string">"name2:"</span> + PropertiesUtil.getName2());</span><br><span class="line">    System.out.println(<span class="string">"name3:"</span> + PropertiesUtil.getName3());</span><br><span class="line">    System.out.println(<span class="string">"name4:"</span> + PropertiesUtil.getName4());</span><br><span class="line">    System.out.println(<span class="string">"password:"</span> + PropertiesUtil.getName5());</span><br><span class="line">    System.out.println(<span class="string">"nickname:"</span> + PropertiesUtil.getName6());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="GPS第三方工具"><a href="#GPS第三方工具" class="headerlink" title="GPS第三方工具"></a>GPS第三方工具</h3><h4 id="GIS基本概念"><a href="#GIS基本概念" class="headerlink" title="GIS基本概念"></a>GIS基本概念</h4><ol>
<li>WKT(Well-known text)是开放地理空间联盟OGC（Open GIS Consortium ）制定的一种文本标记语言，用于表示矢量几何对象、空间参照系统及空间参照系统之间的转换。</li>
<li>WKB(well-known binary) 是WKT的二进制表示形式，解决了WKT表达方式冗余的问题，便于传输和在数据库中存储相同的信息</li>
<li>GeoJSON 一种JSON格式的Feature信息输出格式，它便于被JavaScript等脚本语言处理，OpenLayers等地理库便是采用GeoJSON格式。此外，TopoJSON等更精简的扩展格式</li>
</ol>
<h5 id="几何对象"><a href="#几何对象" class="headerlink" title="几何对象"></a>几何对象</h5><p>WKT可以表示的对象包括以下几种：</p>
<ul>
<li>Point, MultiPoint</li>
<li>LineString, MultiLineString</li>
<li>Polygon, MultiPolygon</li>
<li>GeometryCollection<ul>
<li>可以由多种Geometry组成，如：GEOMETRYCOLLECTION(POINT(4 6),LINESTRING(4 6,7 10)</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>Type</th>
<th>Shape</th>
<th>WKT</th>
<th>GeoJSON</th>
</tr>
</thead>
<tbody><tr>
<td>Point</td>
<td><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mlhtnkhj201f01f08k.jpg" alt="undefined"></td>
<td>POINT (30 10)</td>
<td>{ “type”: “Point”, “coordinates”: [30, 10] }</td>
</tr>
<tr>
<td>LineString</td>
<td><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mm3cj3lj201f01f0fv.jpg" alt="undefined"></td>
<td>LINESTRING (30 10, 10 30, 40 40)</td>
<td>{ “type”: “LineString”, “coordinates”: [ [30, 10], [10, 30], [40, 40] ] }</td>
</tr>
<tr>
<td>Polygon</td>
<td><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mn9522pj201f01f0n7.jpg" alt="undefined"></td>
<td>POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))</td>
<td>{ “type”: “Polygon”, “coordinates”: [ [[30, 10], [40, 40], [20, 40], [10, 20], [30, 10]] ] }</td>
</tr>
<tr>
<td>Polygon</td>
<td><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mntnasfj201f01fa9t.jpg" alt="undefined"></td>
<td>POLYGON ((35 10, 45 45, 15 40, 10 20, 35 10),(20 30, 35 35, 30 20, 20 30))</td>
<td>{ “type”: “Polygon”, “coordinates”: [ [[35, 10], [45, 45], [15, 40], [10, 20], [35, 10]], [[20, 30], [35, 35], [30, 20], [20, 30]] ] }</td>
</tr>
<tr>
<td>MultiPoint</td>
<td><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mo9flxyj201f01f0b1.jpg" alt="undefined"></td>
<td>MULTIPOINT ((10 40), (40 30), (20 20), (30 10))</td>
<td>{ “type”: “MultiPoint”, “coordinates”: [ [10, 40], [40, 30], [20, 20], [30, 10] ] }</td>
</tr>
<tr>
<td>MultiPoint</td>
<td><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mo9flxyj201f01f0b1.jpg" alt="undefined"></td>
<td>MULTIPOINT (10 40, 40 30, 20 20, 30 10)</td>
<td>{ “type”: “MultiPoint”, “coordinates”: [ [10, 40], [40, 30], [20, 20], [30, 10] ] }</td>
</tr>
<tr>
<td>MultiLineString</td>
<td><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mqer9ahj201f01f0ge.jpg" alt="undefined"></td>
<td>MULTILINESTRING ((10 10, 20 20, 10 40),(40 40, 30 30, 40 20, 30 10))</td>
<td>{ “type”: “MultiLineString”, “coordinates”: [ [[10, 10], [20, 20], [10, 40]], [[40, 40], [30, 30], [40, 20], [30, 10]] ] }</td>
</tr>
<tr>
<td>MultiPolygon</td>
<td><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mqyv5g1j201f01f0sh.jpg" alt="undefined"></td>
<td>MULTIPOLYGON (((30 20, 45 40, 10 40, 30 20)),((15 5, 40 10, 10 20, 5 10, 15 5)))</td>
<td>{ “type”: “MultiPolygon”, “coordinates”: [ [ [[30, 20], [45, 40], [10, 40], [30, 20]] ], [ [[15, 5], [40, 10], [10, 20], [5, 10], [15, 5]] ] ] }</td>
</tr>
<tr>
<td>MultiPolygon</td>
<td><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mr4qybmj201f01fa9t.jpg" alt="undefined"></td>
<td>MULTIPOLYGON (((40 40, 20 45, 45 30, 40 40)),((20 35, 10 30, 10 10, 30 5, 45 20, 20 35),(30 20, 20 15, 20 25, 30 20)))</td>
<td>{ “type”: “MultiPolygon”, “coordinates”: [ [ [[40, 40], [20, 45], [45, 30], [40, 40]] ], [ [[20, 35], [10, 30], [10, 10], [30, 5], [45, 20], [20, 35]], [[30, 20], [20, 15], [20, 25], [30, 20]] ] ] }</td>
</tr>
</tbody></table>
<h4 id="WKB格式"><a href="#WKB格式" class="headerlink" title="WKB格式"></a>WKB格式</h4><p>WKB采用二进制进行存储，更方便于计算机处理，因此广泛运用于数据的传输与存储，以二位点Point(1 1)为例，</p>
<p>其WKB表达如下：</p>
<p>01 0100 0020 E6100000 000000000000F03F 000000000000F03F</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gj2mtf7wtcj20i502sjrb.jpg" alt="undefined"></p>
<ol>
<li>byteOrder</li>
</ol>
<ul>
<li><p>表示编码方式，00为使用big-endian编码(XDR)，01为使用little-endian编码(NDR)。他们的不同仅限于在内存中放置字节的顺序，比如我们将0x1234abcd写入到以0×0000开始的内存中，则结果如下表：</p>
</li>
<li><table>
<thead>
<tr>
<th>Address</th>
<th>big-endian</th>
<th>little-endian</th>
</tr>
</thead>
<tbody><tr>
<td>0×0000</td>
<td>0x12</td>
<td>0xcd</td>
</tr>
<tr>
<td>0×0001</td>
<td>0x34</td>
<td>0xab</td>
</tr>
<tr>
<td>0×0002</td>
<td>0xab</td>
<td>0x34</td>
</tr>
<tr>
<td>0×0003</td>
<td>0xcd</td>
<td>0x12</td>
</tr>
</tbody></table>
</li>
</ul>
<ol start="2">
<li>webTypd</li>
</ol>
<p>第二到第九字节对矢量数据基本信息进行了定义</p>
<ul>
<li>第二与第三个字节规定了矢量数据的类型，如例子中的0100代表Point；</li>
<li>第三与第四个字节规定了矢量数据的维数，如例子中的0020代表该点是二位的；</li>
<li>第五到第九个字节规定了矢量数据的空间参考SRID，如例子中的E6100000是4326的整数十六位进制表达</li>
</ul>
<ol start="3">
<li>srid</li>
</ol>
<ul>
<li><em>第五到第九个字节规定了矢量数据的空间参考SRID，如例子中的E6100000是4326的整数十六位进制表达</em></li>
</ul>
<ol start="4">
<li>structPoint</li>
</ol>
<ul>
<li><em>第十个字节开始，每16个字节就代表一个坐标对，如例子中的000000000000F03F是浮点型1的十六进制表达</em></li>
</ul>
<h4 id="JTS"><a href="#JTS" class="headerlink" title="JTS"></a>JTS</h4><h5 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h5><ol>
<li><strong>JTS</strong>是加拿大的 Vivid Solutions公司做的一套开放源码的 Java API。它提供了一套空间数据操作的核心算法。为在兼容OGC标准的空间对象模型中进行基础的几何操作提供2D空间谓词API。</li>
</ol>
<h5 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h5><p>表示Geometry对象</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.alibaba.autonavi;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.geom.Coordinate;</span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.geom.Geometry;</span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.geom.GeometryCollection;</span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.geom.GeometryFactory;</span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.geom.LineString;</span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.geom.LinearRing;</span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.geom.Point;</span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.geom.Polygon;</span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.geom.MultiPolygon;</span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.geom.MultiLineString;</span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.geom.MultiPoint;</span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.io.ParseException;</span><br><span class="line"><span class="keyword">import</span> com.vividsolutions.jts.io.WKTReader;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GeometryDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> GeometryFactory geometryFactory = <span class="keyword">new</span> GeometryFactory();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * create a point</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Point <span class="title">createPoint</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Coordinate coord = <span class="keyword">new</span> Coordinate(<span class="number">109.013388</span>, <span class="number">32.715519</span>);</span><br><span class="line">        Point point = geometryFactory.createPoint( coord );</span><br><span class="line">        <span class="keyword">return</span> point;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * create a point by WKT</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ParseException </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Point <span class="title">createPointByWKT</span><span class="params">()</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">        WKTReader reader = <span class="keyword">new</span> WKTReader( geometryFactory );</span><br><span class="line">        Point point = (Point) reader.read(<span class="string">"POINT (109.013388 32.715519)"</span>);</span><br><span class="line">        <span class="keyword">return</span> point;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * create multiPoint by wkt</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MultiPoint <span class="title">createMulPointByWKT</span><span class="params">()</span><span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">        WKTReader reader = <span class="keyword">new</span> WKTReader( geometryFactory );</span><br><span class="line">        MultiPoint mpoint = (MultiPoint) reader.read(<span class="string">"MULTIPOINT(109.013388 32.715519,119.32488 31.435678)"</span>);</span><br><span class="line">        <span class="keyword">return</span> mpoint;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * create a line</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LineString <span class="title">createLine</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Coordinate[] coords  = <span class="keyword">new</span> Coordinate[] &#123;<span class="keyword">new</span> Coordinate(<span class="number">2</span>, <span class="number">2</span>), <span class="keyword">new</span> Coordinate(<span class="number">2</span>, <span class="number">2</span>)&#125;;</span><br><span class="line">        LineString line = geometryFactory.createLineString(coords);</span><br><span class="line">        <span class="keyword">return</span> line;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * create a line by WKT</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ParseException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LineString <span class="title">createLineByWKT</span><span class="params">()</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">        WKTReader reader = <span class="keyword">new</span> WKTReader( geometryFactory );</span><br><span class="line">        LineString line = (LineString) reader.read(<span class="string">"LINESTRING(0 0, 2 0)"</span>);</span><br><span class="line">        <span class="keyword">return</span> line;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * create multiLine </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MultiLineString <span class="title">createMLine</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Coordinate[] coords1  = <span class="keyword">new</span> Coordinate[] &#123;<span class="keyword">new</span> Coordinate(<span class="number">2</span>, <span class="number">2</span>), <span class="keyword">new</span> Coordinate(<span class="number">2</span>, <span class="number">2</span>)&#125;;</span><br><span class="line">        LineString line1 = geometryFactory.createLineString(coords1);</span><br><span class="line">        Coordinate[] coords2  = <span class="keyword">new</span> Coordinate[] &#123;<span class="keyword">new</span> Coordinate(<span class="number">2</span>, <span class="number">2</span>), <span class="keyword">new</span> Coordinate(<span class="number">2</span>, <span class="number">2</span>)&#125;;</span><br><span class="line">        LineString line2 = geometryFactory.createLineString(coords2);</span><br><span class="line">        LineString[] lineStrings = <span class="keyword">new</span> LineString[<span class="number">2</span>];</span><br><span class="line">        lineStrings[<span class="number">0</span>]= line1;</span><br><span class="line">        lineStrings[<span class="number">1</span>] = line2;</span><br><span class="line">        MultiLineString ms = geometryFactory.createMultiLineString(lineStrings);</span><br><span class="line">        <span class="keyword">return</span> ms;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * create multiLine by WKT</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ParseException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MultiLineString <span class="title">createMLineByWKT</span><span class="params">()</span><span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">        WKTReader reader = <span class="keyword">new</span> WKTReader( geometryFactory );</span><br><span class="line">        MultiLineString line = (MultiLineString) reader.read(<span class="string">"MULTILINESTRING((0 0, 2 0),(1 1,2 2))"</span>);</span><br><span class="line">        <span class="keyword">return</span> line;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * create a polygon(多边形) by WKT</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ParseException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Polygon <span class="title">createPolygonByWKT</span><span class="params">()</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">        WKTReader reader = <span class="keyword">new</span> WKTReader( geometryFactory );</span><br><span class="line">        Polygon polygon = (Polygon) reader.read(<span class="string">"POLYGON((20 10, 30 0, 40 10, 30 20, 20 10))"</span>);</span><br><span class="line">        <span class="keyword">return</span> polygon;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * create multi polygon by wkt</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ParseException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MultiPolygon <span class="title">createMulPolygonByWKT</span><span class="params">()</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">        WKTReader reader = <span class="keyword">new</span> WKTReader( geometryFactory );</span><br><span class="line">        MultiPolygon mpolygon = (MultiPolygon) reader.read(<span class="string">"MULTIPOLYGON(((40 10, 30 0, 40 10, 30 20, 40 10),(30 10, 30 0, 40 10, 30 20, 30 10)))"</span>);</span><br><span class="line">        <span class="keyword">return</span> mpolygon;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * create GeometryCollection  contain point or multiPoint or line or multiLine or polygon or multiPolygon</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ParseException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> GeometryCollection <span class="title">createGeoCollect</span><span class="params">()</span> <span class="keyword">throws</span> ParseException</span>&#123;</span><br><span class="line">        LineString line = createLine();</span><br><span class="line">        Polygon poly =  createPolygonByWKT();</span><br><span class="line">        Geometry g1 = geometryFactory.createGeometry(line);</span><br><span class="line">        Geometry g2 = geometryFactory.createGeometry(poly);</span><br><span class="line">        Geometry[] garray = <span class="keyword">new</span> Geometry[]&#123;g1,g2&#125;;</span><br><span class="line">        GeometryCollection gc = geometryFactory.createGeometryCollection(garray);</span><br><span class="line">        <span class="keyword">return</span> gc;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * create a Circle  创建一个圆，圆心(x,y) 半径RADIUS</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> y</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> RADIUS</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Polygon <span class="title">createCircle</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y, <span class="keyword">final</span> <span class="keyword">double</span> RADIUS)</span></span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> SIDES = <span class="number">32</span>;<span class="comment">//圆上面的点个数</span></span><br><span class="line">        Coordinate coords[] = <span class="keyword">new</span> Coordinate[SIDES+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SIDES; i++)&#123;</span><br><span class="line">            <span class="keyword">double</span> angle = ((<span class="keyword">double</span>) i / (<span class="keyword">double</span>) SIDES) * Math.PI * <span class="number">2.0</span>;</span><br><span class="line">            <span class="keyword">double</span> dx = Math.cos( angle ) * RADIUS;</span><br><span class="line">            <span class="keyword">double</span> dy = Math.sin( angle ) * RADIUS;</span><br><span class="line">            coords[i] = <span class="keyword">new</span> Coordinate( (<span class="keyword">double</span>) x + dx, (<span class="keyword">double</span>) y + dy );</span><br><span class="line">        &#125;</span><br><span class="line">        coords[SIDES] = coords[<span class="number">0</span>];</span><br><span class="line">        LinearRing ring = geometryFactory.createLinearRing( coords );</span><br><span class="line">        Polygon polygon = geometryFactory.createPolygon( ring, <span class="keyword">null</span> );</span><br><span class="line">        <span class="keyword">return</span> polygon;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ParseException </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException </span>&#123;</span><br><span class="line">        GeometryDemo gt = <span class="keyword">new</span> GeometryDemo();</span><br><span class="line">        Polygon p = gt.createCircle(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">        <span class="comment">//圆上所有的坐标(32个)</span></span><br><span class="line">        Coordinate coords[] = p.getCoordinates();</span><br><span class="line">        <span class="keyword">for</span>(Coordinate coord:coords)&#123;</span><br><span class="line">            System.out.println(coord.x+<span class="string">","</span>+coord.y);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="火星坐标系"><a href="#火星坐标系" class="headerlink" title="火星坐标系"></a>火星坐标系</h4><p>在谷歌还没有发布谷歌地图时，在GIS领域常见的坐标系主要有WGS84经纬度坐标、北京54坐标或西安80坐标等；但自从谷歌地图发布之后，其海量的高清卫星免费影像是让整个GIS领域为之震惊的，但同时也为安全问题带来了一定的隐患。为了对实际坐标进行加密，于是国测局研究了一套算法，凡是公开发布的商业互联网地图，一定要在此加密算法的基础上进行发布，这样一来地图的坐标就与实地的坐标不相符了，于是大家把这种坐标戏称为“火星坐标”，这里我们就针对这一坐标作一些更为详细的说明。</p>
<p>所有的电子地图、导航设备，都需要加入该保密插件。第一步，地图公司测绘地图，测绘完成后，送到国家测绘局，将真实坐标的电子地图，加密成“火星坐标”，这样的地图才是可以出版和发布的，然后才可以让GPS公司处理。第二步，所有的GPS公司，只要需要汽车导航的，需要用到导航电子地图的，都需要在软件中加入该保密算法，将COM口读出来的真实的坐标信号，加密转换成ZF要求的保密的坐标。这样，GPS导航仪和导航电子地图就可以完全匹配，GPS也就可以正常工作了。</p>
<p>GCJ02</p>
<p>GCJ-02是由中国国家测绘局（G表示Guojia国家，C表示Cehui测绘，J表示Ju局）制订的地理信息系统的坐标系统。</p>
<p>中文名:国家测量局02号标准</p>
<p>外文名:GCJ-02</p>
<p>它是一种对经纬度数据的加密算法，即加入随机的偏差。</p>
<p>国内出版的各种地图系统（包括电子形式），必须至少采用GCJ-02对地理位置进行首次加密。</p>
<p>综上所述，其实火星坐标系和GCJ-02是同一种事物，它是国家测量(绘)局制定的02号标准，是一种对经纬度坐标进行非线性的随机加偏算法。</p>
<p>为了响应国家制定的标准，国内所有在线地图服务商（如百度地图、高德地图、搜狗地图和SOSO地图等）和国外部分在线地图服务商(如谷歌地图、必应地图和雅虎地图等)都必须进行GCJ-02加密才对公众进行开放，这就是为什么大家在用地图时总是发现有偏移的原因。</p>
<p>GCJ-02只是一种坐标偏移标准（算法），对投影没有任何限制，如果再以投影为基础作细分</p>
<h3 id="PrototBuf"><a href="#PrototBuf" class="headerlink" title="PrototBuf"></a>PrototBuf</h3><p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gj76dp6ma8j21jb0r2ab4.jpg" alt="undefined"></p>
<h3 id="IDEA莫名其妙每次自动生成变量都有final修饰符"><a href="#IDEA莫名其妙每次自动生成变量都有final修饰符" class="headerlink" title="IDEA莫名其妙每次自动生成变量都有final修饰符"></a>IDEA莫名其妙每次自动生成变量都有final修饰符</h3><p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gj79tlhudbg20yc0eeqsg.gif" alt="undefined"></p>
<h3 id="FlinkKafka兼容性"><a href="#FlinkKafka兼容性" class="headerlink" title="FlinkKafka兼容性"></a>FlinkKafka兼容性</h3><table>
<thead>
<tr>
<th>Maven Dependency</th>
<th>Supported since</th>
<th>Consumer and  Producer Class name</th>
<th>Kafka version</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>flink-connector-kafka-0.8_2.11</td>
<td>1.0.0</td>
<td>FlinkKafkaConsumer08 FlinkKafkaProducer08</td>
<td>0.8.x</td>
<td>Uses the <a href="https://cwiki.apache.org/confluence/display/KAFKA/0.8.0+SimpleConsumer+Example" target="_blank" rel="noopener">SimpleConsumer</a> API of Kafka internally. Offsets are committed to ZK by Flink.</td>
</tr>
<tr>
<td>flink-connector-kafka-0.9_2.11</td>
<td>1.0.0</td>
<td>FlinkKafkaConsumer09 FlinkKafkaProducer09</td>
<td>0.9.x</td>
<td>Uses the new <a href="http://kafka.apache.org/documentation.html#newconsumerapi" target="_blank" rel="noopener">Consumer API</a> Kafka.</td>
</tr>
<tr>
<td>flink-connector-kafka-0.10_2.11</td>
<td>1.2.0</td>
<td>FlinkKafkaConsumer010 FlinkKafkaProducer010</td>
<td>0.10.x</td>
<td>This connector supports <a href="https://cwiki.apache.org/confluence/display/KAFKA/KIP-32+-+Add+timestamps+to+Kafka+message" target="_blank" rel="noopener">Kafka messages with timestamps</a> both for producing and consuming.</td>
</tr>
<tr>
<td>flink-connector-kafka-0.11_2.11</td>
<td>1.4.0</td>
<td>FlinkKafkaConsumer011 FlinkKafkaProducer011</td>
<td>0.11.x</td>
<td>Since 0.11.x Kafka does not support scala 2.10. This connectorsupports <a href="https://cwiki.apache.org/confluence/display/KAFKA/KIP-98+-+Exactly+Once+Delivery+and+Transactional+Messaging" target="_blank" rel="noopener">Kafka transactional messaging</a> to provide exactly once semantic for the producer.</td>
</tr>
<tr>
<td>flink-connector-kafka_2.11</td>
<td>1.7.0</td>
<td>FlinkKafkaConsumer FlinkKafkaProducer</td>
<td>&gt;= 1.0.0</td>
<td>This universal Kafka connector attempts to track the latest version of the Kafka client.The version of the client it uses may change between Flink releases.Modern Kafka clients are backwards compatible with broker versions 0.10.0 or later.However for Kafka 0.11.x and 0.10.x versions, we recommend using dedicatedflink-connector-kafka-0.11_2.11 and flink-connector-kafka-0.10_2.11 respectively.Attention: as of Flink 1.7 the universal Kafka connector is considered to be in a BETA status and might not be as stable as the 0.11 connector. In case of problems withthe universal connector, you can try to use flink-connector-kafka-0.11_2.11 which should be compatible with all of the Kafka versions starting from 0.11.</td>
</tr>
</tbody></table>
<h3 id="关于数据仓库数据中台数据湖的一部分图片"><a href="#关于数据仓库数据中台数据湖的一部分图片" class="headerlink" title="关于数据仓库数据中台数据湖的一部分图片"></a>关于数据仓库数据中台数据湖的一部分图片</h3><p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gjq4vv1ur3j20lr0afmyg.jpg" alt="2B5AE031-28F3-4273-96BA-AAA9D3A1A25E.png"><br><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gjq4vuyywpj209b06sjro.jpg" alt="68C1B34D-B7F7-4026-ACDE-9C0C53A57F71.png"><br><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gjq4vv0bgvj20jh092gm0.jpg" alt="365E67AF-D9E0-49f7-A847-7657EF3FFCAA.png"><br><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gjq4vv15apj20m209z3zk.jpg" alt="788AA5A9-709B-471e-AB31-2AB8D79EEC14.png"><br><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gjq4vv5fk0j20nl0d1afi.jpg" alt="5234F018-146E-4c51-97FA-6206F82EC8B6.png"><br><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gjq4vv5hsqj20rn0i80w9.jpg" alt="1CAFEC39-30A9-4b51-9B16-1B9D11A3DD09.png"></p>
<p>元数据管理还有个普元元数据</p>
<h3 id="Mac版本的终端要走Proxy除了梯子还需要一个设置"><a href="#Mac版本的终端要走Proxy除了梯子还需要一个设置" class="headerlink" title="Mac版本的终端要走Proxy除了梯子还需要一个设置"></a>Mac版本的终端要走Proxy除了梯子还需要一个设置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜ ~ vim ~/.zshrc</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># proxy list</span><br><span class="line">alias proxy=&apos;export all_proxy=socks5://127.0.0.1:1080&apos;</span><br><span class="line">alias unproxy=&apos;unset all_proxy&apos;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜ ~ source ~/.zshrc</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">切换：</span><br><span class="line">~ proxy</span><br><span class="line">~ unproxy</span><br></pre></td></tr></table></figure>

<h3 id="无状态-和-有状态-的区别"><a href="#无状态-和-有状态-的区别" class="headerlink" title="无状态 和 有状态 的区别"></a>无状态 和 有状态 的区别</h3><p>在整个程序生态圈中，无状态的意思总是 不需要自己手动关闭，有状态的意识是 总是需要自己手动关闭</p>
<h3 id="Linux-Command"><a href="#Linux-Command" class="headerlink" title="Linux Command"></a>Linux Command</h3><h4 id="most-more-less"><a href="#most-more-less" class="headerlink" title="most + more + less"></a>most + more + less</h4><p><code>more</code>, <code>less</code> and <code>most</code> are three pagers, we can compare them this way:</p>
<blockquote>
<p><code>less</code> is more than <code>more</code>,<br><code>most</code> is more than <code>more</code>, aproximatly,<br><code>less</code> and <code>most</code> are different, none is better.</p>
</blockquote>
<h4 id="linux通过进程号查看运行文件目录"><a href="#linux通过进程号查看运行文件目录" class="headerlink" title="linux通过进程号查看运行文件目录"></a>linux通过进程号查看运行文件目录</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ll /proc/&#123;进程号&#125;/cwd</span><br></pre></td></tr></table></figure>

<h4 id="CentOS查看版本"><a href="#CentOS查看版本" class="headerlink" title="CentOS查看版本"></a>CentOS查看版本</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl </span><br><span class="line"></span><br><span class="line">   Static hostname: datanode127</span><br><span class="line">         Icon name: computer-server</span><br><span class="line">           Chassis: server</span><br><span class="line">        Machine ID: abe6faef122d47c1a66436e7936b4301</span><br><span class="line">           Boot ID: 8010542f5e21440797d9e3fc669fb752</span><br><span class="line">  Operating System: CentOS Linux 7 (Core)</span><br><span class="line">       CPE OS Name: cpe:/o:centos:centos:7</span><br><span class="line">            Kernel: Linux 3.10.0-693.el7.x86_64</span><br><span class="line">      Architecture: x86-64</span><br></pre></td></tr></table></figure>

<h4 id="文件目录大小常见的命令"><a href="#文件目录大小常见的命令" class="headerlink" title="文件目录大小常见的命令"></a>文件目录大小常见的命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> flyhugh@MacBook-Pro-2  ~/Documents/Env  pwd</span><br><span class="line">/Users/flyhugh/Documents/Env</span><br><span class="line"> flyhugh@MacBook-Pro-2  ~/Documents/Env  ls</span><br><span class="line">apache-maven-3.6.3 brew_install.rb</span><br><span class="line"> flyhugh@MacBook-Pro-2  ~/Documents/Env  du -sh</span><br><span class="line">7.2G	.</span><br><span class="line"> flyhugh@MacBook-Pro-2  ~/Documents/Env  df -h  </span><br><span class="line">Filesystem      Size   Used  Avail Capacity iused      ifree %iused  Mounted on</span><br><span class="line">/dev/disk1s5   466Gi   10Gi  180Gi     6%  488290 4882988630    0%   /</span><br><span class="line">devfs          187Ki  187Ki    0Bi   100%     646          0  100%   /dev</span><br><span class="line">/dev/disk1s1   466Gi  271Gi  180Gi    61% 2520713 4880956207    0%   /System/Volumes/Data</span><br><span class="line">/dev/disk1s4   466Gi  3.0Gi  180Gi     2%       4 4883476916    0%   /private/var/vm</span><br><span class="line">map auto_home    0Bi    0Bi    0Bi   100%       0          0  100%   /System/Volumes/Data/home</span><br><span class="line">/dev/disk1s3   466Gi  504Mi  180Gi     1%      54 4883476866    0%   /Volumes/Recovery</span><br></pre></td></tr></table></figure>

<h4 id="Linux生僻命令"><a href="#Linux生僻命令" class="headerlink" title="Linux生僻命令"></a>Linux生僻命令</h4><p>在两个文件夹之间来回切换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd -</span><br></pre></td></tr></table></figure>

<p>递归创建目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p</span><br></pre></td></tr></table></figure>

<h3 id="Win10网络问题汇总"><a href="#Win10网络问题汇总" class="headerlink" title="Win10网络问题汇总"></a>Win10网络问题汇总</h3><p>用无线网有个问题就是电脑开机时间久了 加上我使用科学上网频繁开关，导致网络会有错乱问题，在系统开了很多东西的情况下，直接重启，导致了网络错误，打开IDEA的时候出现了错误提示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Internal error. Please refer to http://jb.gg/ide/critical-startup-errors</span><br><span class="line"></span><br><span class="line">java.net.BindException: Address already in use: bind</span><br><span class="line">    at java.base/sun.nio.ch.Net.bind0(Native Method)</span><br><span class="line">    at java.base/sun.nio.ch.Net.bind(Net.java:461)</span><br><span class="line">    at java.base/sun.nio.ch.Net.bind(Net.java:453)</span><br><span class="line">    at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:227)</span><br><span class="line">    at io.netty.channel.socket.nio.NioServerSocketChannel.doBind(NioServerSocketChannel.java:132)</span><br><span class="line">    at io.netty.channel.AbstractChannel$AbstractUnsafe.bind(AbstractChannel.java:551)</span><br><span class="line">    at io.netty.channel.DefaultChannelPipeline$HeadContext.bind(DefaultChannelPipeline.java:1345)</span><br><span class="line">    at io.netty.channel.AbstractChannelHandlerContext.invokeBind(AbstractChannelHandlerContext.java:503)</span><br><span class="line">    at io.netty.channel.AbstractChannelHandlerContext.bind(AbstractChannelHandlerContext.java:488)</span><br><span class="line">    at io.netty.channel.DefaultChannelPipeline.bind(DefaultChannelPipeline.java:984)</span><br><span class="line">    at io.netty.channel.AbstractChannel.bind(AbstractChannel.java:247)</span><br><span class="line">    at io.netty.bootstrap.AbstractBootstrap$2.run(AbstractBootstrap.java:355)</span><br><span class="line">    at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)</span><br><span class="line">    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:416)</span><br><span class="line">    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:515)</span><br><span class="line">    at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)</span><br><span class="line">    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)</span><br><span class="line">    at java.base/java.lang.Thread.run(Thread.java:834)</span><br></pre></td></tr></table></figure>

<p>这个错误造成的原因就是<em>hypervisior(Windows 10的Hyper-V虚拟机)，把端口保留了</em></p>
<p>解决方法也很简单，<em>hypervisior</em>重新开关一下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Disable hyper-v (which will required a couple of restarts)</span><br><span class="line">dism.exe /Online /Disable-Feature:Microsoft-Hyper-V</span><br><span class="line"></span><br><span class="line">When you finish all the required restarts, reserve the port you want so hyper-v doesn&apos;t reserve it back</span><br><span class="line">netsh int ipv4 add excludedportrange protocol=tcp startport=&lt;端口号&gt; numberofports=1</span><br><span class="line"></span><br><span class="line">Re-Enable hyper-V (which will require a couple of restart)</span><br><span class="line">dism.exe /Online /Enable-Feature:Microsoft-Hyper-V /All</span><br></pre></td></tr></table></figure>

<p>实际使用中第一个命令执行完直接重启就行了。</p>
<h4 id="win10图形化查看端口占用工具"><a href="#win10图形化查看端口占用工具" class="headerlink" title="win10图形化查看端口占用工具"></a>win10图形化查看端口占用工具</h4><p><code>cports</code></p>
<h4 id="重置win10网络命令"><a href="#重置win10网络命令" class="headerlink" title="重置win10网络命令"></a>重置win10网络命令</h4><p><code>netsh winsock reset</code></p>
<h4 id="win10远程窗口大小不可调的问题"><a href="#win10远程窗口大小不可调的问题" class="headerlink" title="win10远程窗口大小不可调的问题"></a>win10远程窗口大小不可调的问题</h4><p>我的显示器分辨率比较高，两台显示器都是4K分辨率的，但是远程的时候默认是锁定1600 * 1200的</p>
<p>并且默认是窗口化的，无法调整大小，这个时候需要使用命令行配置一下远程窗口的分辨率</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mstsc /w:<span class="number">2560</span> /h:<span class="number">1440</span> /f</span><br></pre></td></tr></table></figure>

<p>这个命令分别是长宽和全屏设置。</p>
<h4 id="给win10商店设置代理"><a href="#给win10商店设置代理" class="headerlink" title="给win10商店设置代理"></a>给win10商店设置代理</h4><p>最近发现。。。只要有一个好的代理服务器，win10的商店原来也是能随便打开的，这里介绍一下win10的商店的流量怎么走代理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">首先通过 Win + R 快捷键打开「运行」窗口，输入「Regedit」打开注册表编辑器，然后定位到 HKEY_CURRENT_USER\Software\Classes\Local Settings\Software\Microsoft\Windows\CurrentVersion\AppContainer\Mappings，接着在左边的注册表项中找到你想解除网络隔离的应用，右边的 DisplayName 就是应用名称，而左边那一大串字符就是应用的 SID 值了。</span><br></pre></td></tr></table></figure>

<p>找到这个值之后，然后在cmd命令行中输入：</p>
<p><code>CheckNetIsolation.exe loopbackexempt -a -p=SID</code></p>
<p>这SID就是上面搜索到的，这样就行</p>
<h4 id="关于SSTap转发UDP的问题"><a href="#关于SSTap转发UDP的问题" class="headerlink" title="关于SSTap转发UDP的问题"></a>关于SSTap转发UDP的问题</h4><p>查看SSTap是否成功转发UDP需要用到一个工具，netcat，简称nc，使用这个工具，在命令行中</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\nc64.exe <span class="literal">-u</span> ip <span class="number">10000</span></span><br></pre></td></tr></table></figure>

<p>就可以像服务器发送UDP请求，然后在服务器上使用root用户</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump udp port 10000</span><br></pre></td></tr></table></figure>

<p>就可以查看转发日志</p>
<p>Tips：我在ubuntu上设置的ss-server 默认是不打开udp的端口的，需要在开启的时候手动打开。(加上 -u)</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup ss<span class="literal">-server</span> <span class="literal">-c</span> /etc/shadowsocks.json <span class="literal">-u</span></span><br></pre></td></tr></table></figure>

<p>验证：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -lnp | grep 10000</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu:/home/ubuntu# netstat -lnp | grep 10000</span><br><span class="line">tcp        0      0 0.0.0.0:10000           0.0.0.0:*               LISTEN      25056/ss-server     </span><br><span class="line">udp        0      0 0.0.0.0:10000           0.0.0.0:*                           25056/ss-server</span><br></pre></td></tr></table></figure>

<p>如图可以看到端口已经开放了udp和tcp即可，udp是无状态的，不会显示LISTEN，这个是正确的。</p>
<p>最终结论：是服务器上的SSR没有开启UDP转发，默认是不转发UDP的，这个是有问题的。</p>
<h4 id="win10-访问墙外世界的最终办法："><a href="#win10-访问墙外世界的最终办法：" class="headerlink" title="win10 访问墙外世界的最终办法："></a>win10 访问墙外世界的最终办法：</h4><p>使用 <code>SSTap</code>这类软件，<code>SSTap</code>是比较简单的，复杂的软件会有流量分流等等功能。</p>
<p><code>SSTap</code>新建了一个虚拟网卡，所有的流量从新的虚拟网卡中转发出去，不用再考虑软件的流量进出口有没有被代理等等问题。</p>
<h4 id="Win下Chrome无法访问新浪外链地址"><a href="#Win下Chrome无法访问新浪外链地址" class="headerlink" title="Win下Chrome无法访问新浪外链地址"></a>Win下Chrome无法访问新浪外链地址</h4><p>拓展解决：</p>
<p><a href="https://chrome.google.com/webstore/detail/wbimgfix/bdhgcfmghkbbdmejdaadfdhhdjphogkp/related" target="_blank" rel="noopener">https://chrome.google.com/webstore/detail/wbimgfix/bdhgcfmghkbbdmejdaadfdhhdjphogkp/related</a></p>
<h4 id="云服务器通过转发windows的3389端口，实现远程对PC的访问"><a href="#云服务器通过转发windows的3389端口，实现远程对PC的访问" class="headerlink" title="云服务器通过转发windows的3389端口，实现远程对PC的访问"></a>云服务器通过转发windows的3389端口，实现远程对PC的访问</h4><p><a href="https://www.jianshu.com/p/939dd2f78399" target="_blank" rel="noopener">https://www.jianshu.com/p/939dd2f78399</a></p>
<p>使用了文中的方法，需要注意的方法不是很多，一个是和 <code>ssh</code> 配置有关的问题，最后采用的配置文件，我在最后贴出来(这种配置文件下可以使用root帐号登录)。配置完成后使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure>

<p>重启服务。</p>
<p>登录用到的keygen需要在cygwin64的文件系统中单独保存，使用的并不是windows下面的路径。</p>
<p>我最终使用的命令是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -o ServerAliveInterval=180 -i /home/key/id_rsa_oracle_2 root@#服务器IP# -p 22 -R #以后远程登录要使用的端口，不建议使用3389，为了安全#:127.0.0.1:3389 -fN</span><br></pre></td></tr></table></figure>

<p><code>ssh</code>配置文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>       $OpenBSD: sshd_config,v 1.100 2016/08/15 12:32:04 naddy Exp $</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> This is the sshd server system-wide configuration file.  See</span><br><span class="line"><span class="meta">#</span> sshd_config(5) for more information.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> This sshd was compiled with PATH=/usr/local/bin:/usr/bin</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> The strategy used for options in the default sshd_config shipped with</span><br><span class="line"><span class="meta">#</span> OpenSSH is to specify options with their default value where</span><br><span class="line"><span class="meta">#</span> possible, but leave them commented.  Uncommented options override the</span><br><span class="line"><span class="meta">#</span> default value.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> If you want to change the port on a SELinux system, you have to tell</span><br><span class="line"><span class="meta">#</span> SELinux about this change.</span><br><span class="line"><span class="meta">#</span> semanage port -a -t ssh_port_t -p tcp #PORTNUMBER</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span>Port 22</span><br><span class="line"><span class="meta">#</span>AddressFamily any</span><br><span class="line"><span class="meta">#</span>ListenAddress 0.0.0.0</span><br><span class="line"><span class="meta">#</span>ListenAddress ::</span><br><span class="line"></span><br><span class="line">HostKey /etc/ssh/ssh_host_rsa_key</span><br><span class="line"><span class="meta">#</span>HostKey /etc/ssh/ssh_host_dsa_key</span><br><span class="line">HostKey /etc/ssh/ssh_host_ecdsa_key</span><br><span class="line">HostKey /etc/ssh/ssh_host_ed25519_key</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Ciphers and keying</span><br><span class="line"><span class="meta">#</span>RekeyLimit default none</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Logging</span><br><span class="line"><span class="meta">#</span>SyslogFacility AUTH</span><br><span class="line">SyslogFacility AUTHPRIV</span><br><span class="line"><span class="meta">#</span>LogLevel INFO</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Authentication:</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>LoginGraceTime 2m</span><br><span class="line">PermitRootLogin yes</span><br><span class="line"><span class="meta">#</span>StrictModes yes</span><br><span class="line"><span class="meta">#</span>MaxAuthTries 6</span><br><span class="line"><span class="meta">#</span>MaxSessions 10</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>PubkeyAuthentication yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> The default is to check both .ssh/authorized_keys and .ssh/authorized_keys2</span><br><span class="line"><span class="meta">#</span> but this is overridden so installations will only check .ssh/authorized_keys</span><br><span class="line">AuthorizedKeysFile .ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>AuthorizedPrincipalsFile none</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>AuthorizedKeysCommand none</span><br><span class="line"><span class="meta">#</span>AuthorizedKeysCommandUser nobody</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> For this to work you will also need host keys in /etc/ssh/ssh_known_hosts</span><br><span class="line"><span class="meta">#</span>HostbasedAuthentication no</span><br><span class="line"><span class="meta">#</span> Change to yes if you don't trust ~/.ssh/known_hosts for</span><br><span class="line"><span class="meta">#</span> HostbasedAuthentication</span><br><span class="line"><span class="meta">#</span>IgnoreUserKnownHosts no</span><br><span class="line"><span class="meta">#</span> Don't read the user's ~/.rhosts and ~/.shosts files</span><br><span class="line"><span class="meta">#</span>IgnoreRhosts yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> To disable tunneled clear text passwords, change to no here!</span><br><span class="line"><span class="meta">#</span>PasswordAuthentication yes</span><br><span class="line"><span class="meta">#</span>PermitEmptyPasswords no</span><br><span class="line">PasswordAuthentication yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Change to no to disable s/key passwords</span><br><span class="line"><span class="meta">#</span>ChallengeResponseAuthentication yes</span><br><span class="line">ChallengeResponseAuthentication no</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Kerberos options</span><br><span class="line"><span class="meta">#</span>KerberosAuthentication no</span><br><span class="line"><span class="meta">#</span>KerberosOrLocalPasswd yes</span><br><span class="line"><span class="meta">#</span>KerberosTicketCleanup yes</span><br><span class="line"><span class="meta">#</span>KerberosGetAFSToken no</span><br><span class="line"><span class="meta">#</span>KerberosUseKuserok yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> GSSAPI options</span><br><span class="line">GSSAPIAuthentication yes</span><br><span class="line">GSSAPICleanupCredentials no</span><br><span class="line"><span class="meta">#</span>GSSAPIStrictAcceptorCheck yes</span><br><span class="line"><span class="meta">#</span>GSSAPIKeyExchange no</span><br><span class="line"><span class="meta">#</span>GSSAPIEnablek5users no</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Set this to 'yes' to enable PAM authentication, account processing,</span><br><span class="line"><span class="meta">#</span> and session processing. If this is enabled, PAM authentication will</span><br><span class="line"><span class="meta">#</span> be allowed through the ChallengeResponseAuthentication and</span><br><span class="line"><span class="meta">#</span> PasswordAuthentication.  Depending on your PAM configuration,</span><br><span class="line"><span class="meta">#</span> PAM authentication via ChallengeResponseAuthentication may bypass</span><br><span class="line"><span class="meta">#</span> the setting of "PermitRootLogin without-password".</span><br><span class="line"><span class="meta">#</span> If you just want the PAM account and session checks to run without</span><br><span class="line"><span class="meta">#</span> PAM authentication, then enable this but set PasswordAuthentication</span><br><span class="line"><span class="meta">#</span> and ChallengeResponseAuthentication to 'no'.</span><br><span class="line"><span class="meta">#</span> WARNING: 'UsePAM no' is not supported in Red Hat Enterprise Linux and may cause several</span><br><span class="line"><span class="meta">#</span> problems.</span><br><span class="line">UsePAM yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>AllowAgentForwarding yes</span><br><span class="line"><span class="meta">#</span>AllowTcpForwarding yes</span><br><span class="line">GatewayPorts yes</span><br><span class="line">X11Forwarding yes</span><br><span class="line"><span class="meta">#</span>X11DisplayOffset 10</span><br><span class="line"><span class="meta">#</span>X11UseLocalhost yes</span><br><span class="line"><span class="meta">#</span>PermitTTY yes</span><br><span class="line"><span class="meta">#</span>PrintMotd yes</span><br><span class="line"><span class="meta">#</span>PrintLastLog yes</span><br><span class="line"><span class="meta">#</span>TCPKeepAlive yes</span><br><span class="line"><span class="meta">#</span>UseLogin no</span><br><span class="line"><span class="meta">#</span>UsePrivilegeSeparation sandbox</span><br><span class="line"><span class="meta">#</span>PermitUserEnvironment no</span><br><span class="line"><span class="meta">#</span>Compression delayed</span><br><span class="line"><span class="meta">#</span>ClientAliveInterval 0</span><br><span class="line"><span class="meta">#</span>ClientAliveCountMax 3</span><br><span class="line"><span class="meta">#</span>ShowPatchLevel no</span><br><span class="line"><span class="meta">#</span>UseDNS yes</span><br><span class="line"><span class="meta">#</span>PidFile /var/run/sshd.pid</span><br><span class="line"><span class="meta">#</span>MaxStartups 10:30:100</span><br><span class="line"><span class="meta">#</span>PermitTunnel no</span><br><span class="line"><span class="meta">#</span>ChrootDirectory none</span><br><span class="line"><span class="meta">#</span>VersionAddendum none</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> no default banner path</span><br><span class="line"><span class="meta">#</span>Banner none</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Accept locale-related environment variables</span><br><span class="line">AcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES</span><br><span class="line">AcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT</span><br><span class="line">AcceptEnv LC_IDENTIFICATION LC_ALL LANGUAGE</span><br><span class="line">AcceptEnv XMODIFIERS</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> override default of no subsystems</span><br><span class="line">Subsystem sftp  /usr/libexec/openssh/sftp-server</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Example of overriding settings on a per-user basis</span><br><span class="line"><span class="meta">#</span>Match User anoncvs</span><br><span class="line"><span class="meta">#</span>       X11Forwarding no</span><br><span class="line"><span class="meta">#</span>       AllowTcpForwarding no</span><br><span class="line"><span class="meta">#</span>       PermitTTY no</span><br><span class="line"><span class="meta">#</span>       ForceCommand cvs server</span><br></pre></td></tr></table></figure>

<p>这种访问方式有点过于笨重，后来采用了<code>frp</code>工具来实现了远程代理</p>
<p><a href="https://zhuanlan.zhihu.com/p/138092534" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/138092534</a></p>
<h3 id="BT下载-扔掉迅雷"><a href="#BT下载-扔掉迅雷" class="headerlink" title="BT下载 扔掉迅雷"></a>BT下载 扔掉迅雷</h3><ol>
<li><p>Aria2 <a href="https://github.com/aria2/aria2/releases" target="_blank" rel="noopener">下载</a>解压</p>
</li>
<li><p>配置文件 <a href="https://public.dm.files.1drv.com/y4mHts-RbjIeaCIbWaSVQjaReZIKjxzUxRsP5hKJ_a6K2rFcaw8ca4KGHFMDj6sUzcNyphWgE-toOwzGtm5EKkiJXjq1gsZNiRRyFQCKkciNSlRZaxdZVx3eSAJ77FM6E1gqxjbO1hJ8Cd8DTh7SmABzBsPr9JMFOVHiOtw1hqyySr5MrW2w3P6JTZa8KyVDlC_d209wxb6qTYxeC4TsxAev_mM52C3p4hgrZy61Tolrg5GHUdsMLv2u_MkiYAEjAPZ" target="_blank" rel="noopener">下载</a>解压</p>
</li>
<li><p>按照顺序使用管理员打开<img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20210507190945.png"></p>
</li>
<li><p>默认的下载目录为<code>downloads</code>，可通过修改<code>aria2.conf</code>配置文件改变下载目录。</p>
</li>
<li><p>Aria2的没有自带下载面板的，因此需要自行下载第三方的面板。</p>
</li>
</ol>
<p>常用的<code>Aria2_Web</code>有<code>YAAW</code>、<code>webui-aria2</code>、<code>AriaNg</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">YAAW：https://github.com/binux/yaaw/archive/master.zip</span><br><span class="line">AriaNg：https://github.com/mayswind/AriaNg/releases</span><br><span class="line">webui-aria2：https://github.com/ziahamza/webui-aria2/archive/master.zip</span><br></pre></td></tr></table></figure>

<p>我这里尝试使用<code>AriaNg</code>，下载下来直接点击那个网页就能使用，修改一下tracker</p>
<p><a href="https://trackerslist.com/#/zh?id=xiu2trackerslistcollection" target="_blank" rel="noopener">https://trackerslist.com/#/zh?id=xiu2trackerslistcollection</a></p>
<p>Tracker列表</p>
<h3 id="网络知识"><a href="#网络知识" class="headerlink" title="网络知识"></a>网络知识</h3><h4 id="TCP-IP"><a href="#TCP-IP" class="headerlink" title="TCP/IP"></a>TCP/IP</h4><p>建立TCP需要三次握手才能建立（客户端发起SYN,服务端SYN+ACK,客户端ACK），</p>
<p>断开连接则需要四次握手（客户端和服务端都可以发起，FIN-ACK-FIN-ACK）。</p>
<p><strong>为什么连接的时候是三次握手，关闭的时候却是四次握手？</strong></p>
<p>答：<br>   因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，”你发的FIN报文我收到了”。只有等到Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步握手。</p>
<p>SYN攻击：发送大量的SYN,导致服务端无法识别哪些是有效的</p>
<h4 id="RPC"><a href="#RPC" class="headerlink" title="RPC"></a>RPC</h4><p>RPC是指远程调用，两服务器A,B，A要调用B上的一个方法，由于不在一个内存空间，不能直接调用，需要通过网络来表达调用的语义和传达调用的数据</p>
<ol>
<li><p>通讯问题：在客户端和服务端建立TCP连接，远程调用的所有交换数据都在这个连接里传输。</p>
</li>
<li><p>解决寻址问题：IP及端口寻址，方法名</p>
</li>
<li><p>序列化（Serialize）：发生远程调用时，方法的参数需要通过底层的网络协议如TCP传送到服务器，由于网络协议是基于二进制的，内存中的参数值需要序列化成二进制的形式，通过寻址和传输序列化的二进制发送给服务器。</p>
</li>
<li><p>服务器反序列化：服务器收到请求后需要反序列化，恢复内存中的表达方式，然后找到对应的方法（寻址的一部分），进行本地调用。</p>
</li>
<li><p>返回值发送给客户端，这个部分也需要序列化和反序列化。</p>
</li>
</ol>
<p><strong>SOA</strong></p>
<p>采用一组服务的方式来构建一个应用，服务（hedwig、jsf、RESTful）独立部署在不同的进程中，不同服务通过一些轻量级交互机制来通信，例如RPC、HTTP等。服务可独立扩展伸缩，每个服务定义了明确的边界，不同的服务甚至可以采用不同的编程语言来实现，由独立的团队来维护。</p>
<p>RPC 的实现是基于SOA这样的一个架构 C/S模式 远程调用的通讯使用TCP 然后hedwig restful jsf这些就是不同的服务形式</p>
<p>**http协议和tcp/ip 协议的关系<br>**(1) http是应用层协议，tcp协议是传输层协议，ip协议是网络协议。<br>(2) IP协议主要解决网络路由和寻址问题<br>(3) tcp协议主要解决在IP层协议之上，如何可靠的传输数据，即接收端收到的数据包的大小和顺序，和发送端保持一致。tcp协议是可靠的面相连接的。</p>
<p><strong>1.   http协议是无状态的</strong>，指的是http协议对于事务处理没有记忆功能，客户端向服务端请求完数据之后，服务端不知道客户端是什么状态。</p>
<p><strong>2. http的长连接和短连接，本质上是tcp层的长连接和短连接：</strong></p>
<p>http 1.0 默认使用短连接，http 1.1 默认使用长连接，在使用的http协议，在响应头会加上 Connection:keep-alive</p>
<p><strong>3. RPC比http请求快的原因</strong>：http使用http协议，rpc使用tcp协议，比http少了应用层，表示层，会话层，这3层，rpc使用长连接，而长连接比短连接更节省资源，效率更高（每个连接的建立和释放都是需要资源和时间的）。</p>
<p><strong>TCP/IP</strong></p>
<p>是个协议组，可分为三个层次：<strong>网络层、传输层和应用层。</strong></p>
<p>在网络层有IP协议、ICMP协议、ARP协议、RARP协议和BOOTP协议。</p>
<p>在<strong>传输层中有TCP协议与UDP协议。</strong></p>
<p>在应用层有:TCP包括FTP、HTTP、TELNET、SMTP等协议</p>
<p><strong>UDP包括DNS、TFTP等协议</strong></p>
<p>当网络通信时采用TCP协议时，在真正的读写操作之前，server与client之间必须建立一个连接，当读写操作完成后，双方不再需要这个连接时它们可以释放这个连接，连接的建立是需要三次握手的，而释放则需要4次握手，所以说每个连接的建立都是需要资源消耗和时间消耗的。</p>
<p><strong>通信过程：</strong></p>
<p>主机 A 的应用程序要能和主机 B 的应用程序通信，必须通过 Socket 建立连接，而建立 Socket 连接必须需要底层 TCP/IP 协议来建立 TCP 连接。建立 TCP 连接需要底层 IP 协议来寻址网络中的主机。我们知道网络层使用的 IP 协议可以帮助我们根据 IP 地址来找到目标主机，但是一台主机上可能运行着多个应用程序，如何才能与指定的应用程序通信就要通过 TCP 或 UPD 的地址也就是端口号来指定。这样就可以通过一个 Socket 实例唯一代表一个主机上的一个应用程序的通信链路了。</p>
<p><strong>建立通信链路</strong></p>
<p>当<strong>客户端</strong>要与服务端通信，客户端首先要创建一个 Socket 实例，操作系统将为这个 Socket 实例分配一个没有被使用的本地端口号，并创建一个包含本地和远程地址和端口号的套接字数据结构，这个数据结构将一直保存在系统中直到这个连接关闭。在创建 Socket 实例的构造函数正确返回之前，将要进行 TCP 的三次握手协议，TCP 握手协议完成后，Socket 实例对象将创建完成，否则将抛出 IOException 错误。</p>
<p>与之对应的<strong>服务端</strong>将创建一个 ServerSocket 实例，ServerSocket 创建比较简单只要指定的端口号没有被占用，一般实例创建都会成功，同时操作系统也会为 ServerSocket 实例创建一个底层数据结构，这个数据结构中包含指定监听的端口号和包含监听地址的通配符，通常情况下都是“*”即监听所有地址。之后当调用 accept() 方法时，将进入阻塞状态，等待客户端的请求。当一个新的请求到来时，将为这个连接创建一个新的套接字数据结构，该套接字数据的信息包含的地址和端口信息正是请求源地址和端口。这个新创建的数据结构将会关联到 ServerSocket 实例的一个未完成的连接数据结构列表中，注意这时服务端与之对应的 Socket 实例并没有完成创建，而要等到与客户端的三次握手完成后，这个服务端的Socket 实例才会返回，并将这个 Socket 实例对应的数据结构从未完成列表中移到已完成列表中。所以 ServerSocket 所关联的列表中每个数据结构，都代表与一个客户端的建立的TCP 连接。</p>
<p><strong>TCP短连接</strong></p>
<p>TCP短连接，client向server发起连接请求，server接到请求，然后双方建立连接。client向server 发送消息，server回应client，然后一次读写就完成了，这时候双方任何一个都可以发起close操作，不过一般都是client先发起 close操作。因为一般的server不会回复完client后立即关闭连接的，当然不排除有特殊的情况。从上面的描述看，短连接一般只会在client/server间传递一次读写操作。短连接的优点是：<strong>管理起来比较简单，存在的连接都是有用的连接</strong>，不需要额外的控制手段。</p>
<p><strong>TCP长连接</strong></p>
<p>长连接，client向server发起连接，server接受client连接，双方建立连接。Client与server完成一次读写之后，它们之间的连接并不会主动关闭，后续的读写操作会继续使用这个连接。</p>
<p><strong>TCP保活功能</strong>，保活功能主要为服务器应用提供，服务器应用希望知道客户主机是否崩溃，从而可以代表客户使用资 源。如果客户已经消失，使得服务器上保留一个半开放的连接，而服务器又在等待来自客户端的数据，则服务器将应远等待客户端的数据，保活功能就是试图在服务器端检测到这种半开放的连接。如果一个给定的连接在两小时内没有任何的动作，则服务器就向客户发一个探测报文段。客户主机必须处于以下4个状态之一：</p>
<p>1.客户主机依然正常运行，并从服务器可达。客户的TCP响应正常，而服务器也知道对方是正常的，服务器在两小时后将保活定时器复位。</p>
<p>2.客户主机已经崩溃，并且关闭或者正在重新启动。在任何一种情况下，客户的TCP都没有响应。服务端将不能收到对探测的响应，并在75秒后超时。服务器总共发送10个这样的探测 ，每个间隔75秒。如果服务器没有收到一个响应，它就认为客户主机已经关闭并终止连接。</p>
<p>3.客户主机崩溃并已经重新启动。服务器将收到一个对其保活探测的响应，这个响应是一个复位，使得服务器终止这个连接。</p>
<p>4.客户机正常运行，但是服务器不可达，这种情况与2类似，TCP能发现的就是没有收到探查的响应。</p>
<p>从上面可以看出，TCP保活功能主要为探测长连接的存活状况，不过这里存在一个问题，存活功能的探测周期太长，还有就是它只是探测TCP连接的存活，属于比较斯文的做法，遇到恶意的连接时，保活功能就不够使了。</p>
<p>在长连接的应用场景下，client端一般不会主动关闭它们之间的连接，Client与server之间的连接如果一直不关闭的话，会存在一个问 题，随着客户端连接越来越多，server早晚有扛不住的时候，这时候server端需要采取一些策略，如关闭一些长时间没有读写事件发生的连接，这样可以避免一些恶意连接导致server端服务受损；如果条件再允许就可以以客户端机器为颗粒度，限制每个客户端的最大长连接数，这样可以完全避免某个蛋疼的客户端连累后端服务。</p>
<p>长连接和短连接的产生在于client和server采取的关闭策略，具体的应用场景采用具体的策略，没有十全十美的选择，只有合适的选择。</p>
<p><strong>HTTP长连接与短连接</strong></p>
<p><strong>长连接</strong>：client方与server方先建立连接，连接建立后不断开，然后再进行报文发送和接收。</p>
<p>这种方式下由于通讯连接一直存在。此种方式常用于P2P通信。</p>
<p><strong>短连接</strong>：Client方与server每进行一次报文收发交易时才进行通讯连接，交易完毕后立即断开连接。</p>
<p>此方式常用于一点对多点通讯。C/S通信。</p>
<p><strong>长连接和短连接异同</strong></p>
<p><strong>长连接：</strong>长连接多用于操作频繁，点对点的通讯，而且连接数不能太多的情况。</p>
<p>每个TCP连接的建立都需要三次握手，每个TCP连接的断开要四次握手。</p>
<p>如果每次操作都要建立连接然后再操作的话处理速度会降低，所以每次操作后，下次操作时直接发送数据就可以了，不用再建立TCP连接。例如：数据库的连接用长连接，如果用短连接频繁的通信会造成socket错误，频繁的socket创建也是对资源的浪费。</p>
<p><strong><em>\</em>短连接\</strong>：**web网站的http服务一般都用短连接。因为长连接对于服务器来说要耗费一定的资源。像web网站这么频繁的成千上万甚至上亿客户端的连接用短连接更省一些资源。试想如果都用长连接，而且同时用成千上万的用户，每个用户都占有一个连接的话，可想而知服务器的压力有多大。所以并发量大，但是每个用户又不需频繁操作的情况下需要短连接。</p>
<p><strong>发送接收方式</strong></p>
<p>1、异步：报文发送和接收是分开的，相互独立，互不影响的。这种方式又分两种情况：</p>
<p><strong>异步双工：</strong>接收和发送在同一个程序中，有两个不同的子进程分别负责发送和接送。</p>
<p><strong>异步单工：</strong>接送和发送使用两个不同的程序来完成。</p>
<p>2、同步：报文发送和接收是同步进行，即报文发送后等待接送返回报文。同步方式一般需要考虑超时问题，试想我们发送报文以后也不能无限等待啊，所以我们要设定一个等待时候。超过等待时间发送方不再等待读返回报文。直接通知超时返回。</p>
<p><strong>阻塞与非阻塞方式</strong></p>
<p>1、非阻塞方式：读函数不停的进行读动作，如果没有报文接收到，等待一段时间后超时返回，这种情况一般需要指定超时时间。</p>
<p>2、阻塞方式：如果没有接收到报文，则读函数一直处于等待状态，知道报文到达。</p>
<p><strong>及时通信与游戏的长短连接</strong></p>
<p>实际场合究竟需要使用短连接还是长连接，主要看实时性要求、数据流向和并发量这三个问题。</p>
<p><strong>长连接优点：</strong>节约TCP握手时间，可以保证高实时性，数据流向可以采用服务器端的主动推模式。<br><strong>长连接缺点</strong>：并发量不宜太高，持续占用服务端口（相对消耗资源）。</p>
<p>长连接、长轮询一般应用与WebIM、ChatRoom和一些需要及时交互的网站应用中。其真实案例有：WebQQ、Hi网页版、Facebook IM等。</p>
<p>1.现在游戏中的玩家与玩家之间的聊天无法实现实时性，而且系统有邮件或信息时也不能及时的通知玩家<br>—— 如果涉及到聊天的话，一般来说还是用长连接会更合适，否则大量时间浪费到握手上了；<br>—— 但是手机的网络长连接网络质量可能会比较撮，你需要严重考虑容错和重链机制。</p>
<p>2.客户端每隔几秒就会发送一个请求，这样服务器的压力岂不是很大？<br>—— 压力会比较大，关键是聊天往往对时间的要求很高，如果是团战的话，1秒内没看到信息，可能就会觉得完全受不了了；当然也看你聊天的场景如何，是群聊还是单聊，以后会不会发展为语音啥的；</p>
<p>NIO没有任何问题，大规模长连接处理的主流都是用NIO；而且也不是Java发明的，本身就是借助了操作系统的网络管理能力。</p>
<p><strong>http keep-alive与tcp keep-alive</strong>，不是同一回事，意图不一样。http keep-alive是为了让tcp活得更久一点，以便在同一个连接上传送多个http，提高socket的效率。而tcp keep-alive是TCP的一种检测TCP连接状况的保鲜机制</p>
<h3 id="Maven问题汇总"><a href="#Maven问题汇总" class="headerlink" title="Maven问题汇总"></a>Maven问题汇总</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-antrun-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">phase</span>&gt;</span>generate-resources<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!-- Execute the shell script to generate the spark build information. --&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">target</span>&gt;</span></span><br><span class="line">               <span class="comment">&lt;!-- windows 目录下修改成CMD Linux下面用的是Bash--&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">exec</span> <span class="attr">executable</span>=<span class="string">"cmd"</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">arg</span> <span class="attr">value</span>=<span class="string">"$&#123;project.basedir&#125;/../build/spark-build-info"</span>/&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">arg</span> <span class="attr">value</span>=<span class="string">"$&#123;project.build.directory&#125;/extra-resources"</span>/&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">arg</span> <span class="attr">value</span>=<span class="string">"$&#123;project.version&#125;"</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">exec</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">goal</span>&gt;</span>run<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面的这个插件 antrun里面的命令在linux环境下使用bash没有问题，在linux环境下应该配置bash</p>
<h4 id="Maven手动添加Jar包之后没有加载"><a href="#Maven手动添加Jar包之后没有加载" class="headerlink" title="Maven手动添加Jar包之后没有加载"></a>Maven手动添加Jar包之后没有加载</h4><p>File-&gt;Setting-&gt;Maven-&gt;Repositories-&gt;Update（选择本地仓库的路径）</p>
<h3 id="Active-使用遇到的坑"><a href="#Active-使用遇到的坑" class="headerlink" title="Active 使用遇到的坑"></a>Active 使用遇到的坑</h3><p>线上activemq内存超过限制，导致生产者无法推送告警信息。Activemq重启，导致部分堆积数据丢失</p>
<p>考虑一下ActiveMQ的监控</p>
<h3 id="Redis持久化"><a href="#Redis持久化" class="headerlink" title="Redis持久化"></a>Redis持久化</h3><p>RDB模式全栈快照，当内存比较大，访问比较频繁时（我们的设备实时信息是典形的写多读少，异于一般的写少读多的情况），刷新频率高，磁盘IO要求非常大。</p>
<p>AOF模式，文件体大，Rewrite时会有RDB类似的情况</p>
<p>AOF重写或是RDB进行Dump时都会fork子进程，当Redis使用物理内存过半时，会失败</p>
<h3 id="LinkedList等队列size"><a href="#LinkedList等队列size" class="headerlink" title="LinkedList等队列size()"></a>LinkedList等队列size()</h3><p>JDK自带队列size()需要遍历集合，如果集合数据比较大，且该函数比较频繁访问情况下，可能会有性能问题。并发接近万数量级慎用</p>
<p>（可以用Stopwatch监控程序每个步骤运行时间）</p>
<h3 id="开源协议"><a href="#开源协议" class="headerlink" title="开源协议"></a>开源协议</h3><p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gk86kqo1adj20fa09kq5t.jpg" alt="undefined"></p>
<h3 id="Flink问题汇总"><a href="#Flink问题汇总" class="headerlink" title="Flink问题汇总"></a>Flink问题汇总</h3><h4 id="Flink使用滑动窗口出现的一个问题"><a href="#Flink使用滑动窗口出现的一个问题" class="headerlink" title="Flink使用滑动窗口出现的一个问题"></a>Flink使用滑动窗口出现的一个问题</h4><p>使用滑动窗口保存checkpoint失败，日志里面没有错误日志，个别情况下在使用不同的时间语义会出现成功的情况。</p>
<h5 id="Flink数据写入了HDFS，Hive没有识别"><a href="#Flink数据写入了HDFS，Hive没有识别" class="headerlink" title="Flink数据写入了HDFS，Hive没有识别"></a>Flink数据写入了HDFS，Hive没有识别</h5><p>1.11版本，需要设置<code>sink.partition.commit</code>参数，分区表</p>
<h5 id="Flink-1-12-0编译密码："><a href="#Flink-1-12-0编译密码：" class="headerlink" title="Flink-1.12.0编译密码："></a>Flink-1.12.0编译密码：</h5><p><code>flink-runtime-web</code>工程有几个特点，</p>
<p>=&gt; 在网络OK，别的问题都没有的情况下，第一次编译成功，后面编译的话会报错（npm或者node.js被占用的错误），也就是说，只有第一次能编译成功。</p>
<h3 id="时空数据结构简介"><a href="#时空数据结构简介" class="headerlink" title="时空数据结构简介"></a>时空数据结构简介</h3><blockquote>
<p> 后面如果有时间的话 会把这部分独立出去重新整理一章</p>
</blockquote>
<p>所谓时空数据，顾名思义，包含了两个维度的信息：空间信息与时间信息。空间信息，以地理位置点最为基础，还包括线、多边形以及更为复杂的多维结构。最典型的时空数据，莫过于移动对象的轨迹点数据，如每隔5秒钟记录的车辆实时位置信息。这类数据，在物联网领域司空见惯，在可预见的未来，这类数据将会出现爆炸性的增长。</p>
<p>关于时空索引，这里，了解到的主流技术有R-Trees、Quad-Trees、K-D Trees以及Space Filling Curve这四种技术。</p>
<h4 id="RTree"><a href="#RTree" class="headerlink" title="RTree"></a>RTree</h4><p>R-Trees源自论文《R-Trees: A Dynamic Index Structure For Spatial Searching》，下面的图也源自此论文：</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvnmhkz89j20lj0hpmx9.jpg" alt="undefined"></p>
<p>R-Trees基于这样的思想设计：</p>
<p>每一个空间对象，如一个多边形区域，都存在一个最小的矩形，能够恰好包含此时空对象，如上图中的矩形R6所包含的弯月形区域。这个最小包围矩形被称之为MBR(Minimum Bounding Rectangle)。</p>
<p>多个相邻的矩形，可以被包含在一个更大的最小包围矩形中。如R6、R9以及R10三个矩形，可以被包含在R3中，而R11与R12则被包含在R4中。</p>
<p>继续迭代，总能找到若干个最大的区域，以一种树状的形式，将所有的时空对象给容纳进去，如上图中的R1, R2。这样，整个树状结构，呈现如下：</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvnn72zvnj20lq097jrc.jpg" alt="undefined"></p>
<p>从最小的矩形区域，到最大的矩形区域，就好比地图中的行政区域划分：村 -&gt; 县 -&gt; 市 -&gt; 省份。查询时，先从锁定的最大区域开始，逐级缩小比例尺后，就可找到最终的对象。如若将上图中的R1与R2理解成两个平级的”行政区域”，却又存在本质的区别：不同的行政区域，并不存在相互重叠，而R1与R2却可能是重叠的。</p>
<p>R-Trees的定义：</p>
<ol>
<li><p>每一个Leaf Node包含m到M个索引记录（Root节点除外）。</p>
</li>
<li><p>每一个索引记录是一个关于(I, tuple-identifier)的二元组信息，I是空间对象的最小包围矩形，而tuple-identifier用来描述空间对象本身。</p>
</li>
<li><p>每一个Non-leaf节点，包含m到M个子节点（Root节点除外）。</p>
</li>
<li><p>Non-leaf节点上的每一个数据元素，是一个(I, child-pointer)的二元组信息，child-pointer指向其中一个子节点，而I则是这个子节点上所有矩形的最小包围矩形。</p>
</li>
</ol>
<p>上图中，R3、R4以及R5，共同构成一个non-leaf节如点，R3指向包含元素R8，R9以及R10的子节点，这个指针就是child-pointer，而与R8，R9以及R10相关的最小包围矩形，就是I。</p>
<ol start="5">
<li>Root节点至少包含两个子节点，除非它本身也是一个Leaf Node。</li>
<li>所有的Leaf Nodes都出现在树的同一层上。</li>
</ol>
<p>从定义上来看，R-Trees与B-Trees存在诸多类似：Root节点与Non-Leaf节点，均包含限定数量的子节点；所有的Leaf Nodes都出现在树的同一层上。这两种树也都是<strong>自平衡</strong>的。</p>
<p>前面也已经提到了，B-Trees主要用来存放一维排序的数据元素，而R-Tree存放的则是多维空间数据元素。从查询方式上来看，两者也存在显著的差异：B-Trees更擅长于数据点查，它的设计并不利于数据的范围查询。基于空间元素的查询，却以范围查询为主，而且往往需要对多个子树进行并行查询，例如，在地图上划定某一个区域，查询这个区域内有哪些公园，可能有多个子树都与划定的这个区域存在交集。从这一点看来，R-Tree的搜索性能其实并没有很好的保障。</p>
<p>R-Trees有多种变种，如R+-Trees，R*-Trees，X-Trees, M-Trees，BR-Trees等等，不再展开过多的介绍。</p>
<h4 id="Quad-Trees"><a href="#Quad-Trees" class="headerlink" title="Quad-Trees"></a>Quad-Trees</h4><p>HBase中的数据按照RowKey单维度排序组织，而我们现在却面临的是一个多维数据问题。因此，HBase如果想很好的支持时空数据的存储，需要引入时空索引技术。</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvnu0iuf9j20u20if0sm.jpg" alt="undefined"></p>
<p>上图中的A,B,C,E,F,G均为Point，以每一个Point作为中心点，可以将一个区间分成4个象限。</p>
<p>假设，先写入Point A，以A为中心，将整个区间分成了4个象限。</p>
<p>写入Point B，Point B位于A的东北象限中，同样，以B为中心，依然可以将A东北象限进一步细分为4个子象限。</p>
<p>写入Point C，Point C位于A的东南象限中，以C为中心，可以将A的东南象限细分成4个子象限。</p>
<p>…..</p>
<p>任何新写入的一个Point，总能找到一个某一个已存在的Point的子象限，来存放这个新的Point。</p>
<p>整个树状结构呈现如下：</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvnuq702mj210w0dqweg.jpg" alt="undefined"></p>
<p>可见，Quad-Trees有几个鲜明的特点：1. 对于非叶子节点，均包含4个子节点，对应4个面积不一的象限。2.<strong>不平衡，树的结构与数据的写入顺序直接相关</strong>。3.有空的Leaf Nodes，且所有的Leaf Nodes则是”参差不齐”的(并不一定都出现在树的同一层中)。4.数据既可能出现在分枝节点中，也可能出现在叶子节点中。</p>
<p>因为Quad-Trees存在诸多变种，为了有所区分，上面提到的最简单的这种Quad-Tree，被称之为Point Quad-Trees。还有一种典型的Quad-Trees，被称之为Point Region QuadTrees(简称为PR QuadTrees)：</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvnv4pghhj20jw0jvwed.jpg" alt="undefined"></p>
<p>PR Quad-Trees中，每一次迭代出来的4个象限，面积相同，且不依赖于用户数据Point作为分割点，或者说，<strong>数据分区与用户数据无关</strong>。每一个划分出来的子象限中，只允许存在一个Point。</p>
<p>与Point Quad-Trees相比，PR Quad-Trees允许两份不同的数据集，拥有相同的分区信息。但PR Quad-Trees存在的问题也明显：1. 两个相邻的Points，可能在树的Level高度上相隔甚远。2.两份数据集如果追求相同的分区信息，可能需要进行足够粒度的分割，这可能导致空间浪费。</p>
<h4 id="K-D-Trees"><a href="#K-D-Trees" class="headerlink" title="K-D Trees"></a>K-D Trees</h4><p>K-D Trees是一种针对高维点向量数据的索引结构，一棵简单的K-D Tree如下图所示(原图源自James Fogarty的”K-D Trees and Quad Trees”，但为了更直观，关于分区分割线的线条做了改动)：</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvnwwojz8j20qq0emdg0.jpg" alt="undefined"></p>
<p>与Quad Trees思想类似，K-D Trees也是将整个区间进行不断分割，不同之处在于，Quad Trees每一次迭代，将一个区间分割成四个象限，而K-D Trees则是分成左右或上下两个区间。如上图所示：S1把整个空间分成了左右两个区间，左侧区间中，又被S2横向分割成了上下两个区间，而S3又在S2的分割基础上，将下部分分割成了左右两个区间，….</p>
<h4 id="Space-Filling-Curve"><a href="#Space-Filling-Curve" class="headerlink" title="Space Filling Curve"></a>Space Filling Curve</h4><p>如果将一个完整的二维空间，分割成一个个大小相同的矩形，可以将Space Filling Curve简单理解为它是一种将所有的矩形区域用一条线”串”起来的方法，因”串”的方式不同，也就引申出了不同的Space Filling Curve算法。</p>
<p>比较典型的如Z-Order Curve：</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvo2jc2z0j20hb0d5q38.jpg" alt="undefined"></p>
<p>再如Hilbert Curve:</p>
<p><img src="http://ww1.sinaimg.cn/large/bec9bff2gy1gkvo3097w9j20ha0d3dfx.jpg" alt="undefined"></p>
<p>GeoMesa使用了基于Z-order填充曲线的GeoHash空间索引技术， 并针对时间维度进行了扩展，具体分为: • Z2:空间，点索引 • Z3:时间+空间，点索引 • XZ2:空间，线\面索引 • XZ3:时间+空间，线\面索引。</p>
<p>为什么选择了RTree =&gt;</p>
<ul>
<li>原先的项目中选择<code>RTree</code></li>
<li>别的项目没有<code>RTree</code>这么成熟的工业库</li>
</ul>
<p><img src="C:\Users\liu.gaoming\AppData\Roaming\Typora\typora-user-images\image-20201120152806907.png" alt="image-20201120152806907"></p>
<ul>
<li><p><code>RTree</code>的优化方向比较好找</p>
</li>
<li><p><code>RTree</code>可以理解为<code>BTree</code>的多维版本，相对来说比较熟悉，此外R树还可以退化成一维，但是分割的线段存在重叠问题，效果不如<code>Btree</code>。</p>
</li>
</ul>
<h5 id="R树的操作"><a href="#R树的操作" class="headerlink" title="R树的操作"></a>R树的操作</h5><h6 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h6><p>R树的搜索操作很简单，跟B树上的搜索十分相似。它返回的结果是所有符合查找信息的记录条目。而输入是什么？输入不仅仅是一个范围了，它更可以看成是一个空间中的矩形。也就是说，我们输入的是一个搜索矩形。</p>
<h6 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h6><p>R树的插入操作也同B树的插入操作类似。当新的数据记录需要被添加入叶子结点时，若叶子结点溢出，那么我们需要对叶子结点进行分裂操作。显然，叶子结点的插入操作会比搜索操作要复杂。插入操作需要一些辅助方法才能够完成。<br>来看一下伪代码：</p>
<h6 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h6><p>R树的删除操作与B树的删除操作会有所不同，不过同B树一样，会涉及到压缩等操作。相信读者看完以下的伪代码之后会有所体会。R树的删除同样是比较复杂的，需要用到一些辅助函数来完成整个操作。</p>
<h6 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h6><ul>
<li>为了最小化内存使用可以针对数据类型优化–&gt;</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Rectangle r = Geometries.rectangle(<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>);</span><br><span class="line"></span><br><span class="line">Rectangle r = Geometries.rectangle(<span class="number">1.0f</span>, <span class="number">2.0f</span>, <span class="number">3.0f</span>, <span class="number">4.0f</span>);</span><br></pre></td></tr></table></figure>

<p>理论上这样使用RTree消耗的内存只有Double的一半。</p>
<ul>
<li>使用R-Tree的变种 R*-Tree，对数据结构进行了优化，并且同样存在成熟的常用项目 <code>RTee2</code> 可以使用。</li>
</ul>
<h3 id="Base4BigData-Version-1"><a href="#Base4BigData-Version-1" class="headerlink" title="Base4BigData(Version.1)"></a>Base4BigData(Version.1)</h3><h4 id="MapReduce"><a href="#MapReduce" class="headerlink" title="MapReduce"></a>MapReduce</h4><p>MapReduce产生的灵感来源于2004年Google发表的《MapReduce》论文中的大数据计算模型，用于大规模数据集（TB甚至PB级）的并行计算，利用分治策略，将计算过程分两个阶段，Map阶段和Reduce阶段，可谓是第一代大数据分布式计算引擎，为后来各类优秀的大数据计算引擎的出现提供了基础和可行性。</p>
<h5 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h5><p>MapReduce 1.x架构如下：</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/640" alt="图片"></p>
<ol>
<li>客户端向<code>JobTracker</code>提交任务</li>
<li><code>JobTraker</code>将任务拆解为多个子任务，分配给<code>TaskTracker</code>执行</li>
<li><code>TaskTracker</code>定时与<code>JobTracker</code>保持心跳，汇报任务执行情况</li>
</ol>
<p>存在的问题：</p>
<ul>
<li>单点故障：一旦JobTracker出现故障，会导致任务无法提交和正常执行</li>
<li>JobTracker负载高：所有的任务的提交和分配以及资源管理都是由JobTracker控制，压力过于集中</li>
<li>场景有限制：只能运行MapReduce作业，可兼容性差</li>
</ul>
<p>为了解决MR v1的问题，MapReduce v2引入了资源管理器YARN (Yet Another Resource Negotiator)，即新一代的MapReduce 2.0。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230094755.png"></p>
<p>YARN中的重要角色及功能：</p>
<ol>
<li><p><strong>ResourceManager</strong>：资源管理节点（RM），对应MR v1的JobTracker</p>
</li>
<li><ol>
<li>负责处理来自客户端的提交的Job</li>
<li>启动Application Master管理任务</li>
<li>监控Application Master状态</li>
<li>为NodeManager分配资源（CPU、内存、磁盘、网络）</li>
</ol>
</li>
<li><p><strong>NodeManager</strong>：工作节点（NM），对应MR v1的TaskTracker</p>
</li>
<li><ol>
<li>管理节点container任务资源和运行情况</li>
<li>与ResourceManager保持通信，汇报自身的状态</li>
</ol>
</li>
<li><p><strong>Application Master</strong>：任务管理服务（AM），其实就是ResourceManager的小弟</p>
</li>
<li><ol>
<li>负责检查集群资源，申请mr程序所需资源</li>
<li>分配任务到相应的container容器执行</li>
<li>监控任务执行状态并向ResourceManager汇报任务执行情况</li>
</ol>
</li>
<li><p><strong>Container</strong>：YARN资源抽象，封装了节点上的资源，如内存、CPU、磁盘等</p>
</li>
</ol>
<p>YARN的优势：</p>
<ol>
<li>ResourceManager支持HA，解决了JobTracker单点故障的问题，提高集群可用性</li>
<li>实现资源管理和job管理分离，解决了JobTracker负载高的难题</li>
<li>提供Application Master负责监控所有的任务，解决了JobTracker集中管理监控的压力</li>
<li>高扩展性，不仅可以跑mr任务，还支持spark作业以及其他计算引擎任务</li>
<li>提高了资源的利用率</li>
</ol>
<h5 id="MapReduce核心计算阶段"><a href="#MapReduce核心计算阶段" class="headerlink" title="MapReduce核心计算阶段"></a>MapReduce核心计算阶段</h5><p>Mapper阶段：负责数据 的载入、解析、转换和过滤，map任务的输出被称为中间键和中间值 </p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230095256.png"></p>
<p>Reducer阶段：负责处理map任务输出结果，对map任务处理完的结果集进行排序、局部聚合计算再汇总结果</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230095337.png"></p>
<h5 id="MapReduce为什么慢？"><a href="#MapReduce为什么慢？" class="headerlink" title="MapReduce为什么慢？"></a>MapReduce为什么慢？</h5><p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230095416.png"></p>
<ul>
<li>MapReduce是基于磁盘数据进行计算的</li>
<li>Shuffle过程进行一系列分区、排序，耗费大量时间</li>
<li>map计算结果频繁落盘</li>
<li>reduce任务通过磁盘获取数据，占用IO</li>
<li>spill会会产生大量的小文件，极大占用集群的资源</li>
<li>容错性差，错了就重头来过</li>
<li>MapReduce抽象层次低，只有map和reduce两种，处理数据效率较低</li>
</ul>
<p>因此MapReduce只适用于处理大规模离线数据，延时高。MapReduce的局限性推动了计算引擎技术的革新，Spark的出现是为了解决MapReduce计算慢的问题，随着数据量的指数增长，对数据处理效率有了更高的要求，我们需要在更短的时间内得到正确的结果。</p>
<h4 id="Spark"><a href="#Spark" class="headerlink" title="Spark"></a>Spark</h4><p>Apache Spark是用于大规模数据处理的统一分析计算引擎，最初诞生于加州大学伯克利分校的AMP Lab实验室。基于内存进行并行计算，通过使用最先进的DAG调度器、查询优化器和物理执行引擎，实现了批处理和流处理的高性能，与Hadoop MapReduce相比，运行在内存中的计算速度要快上100倍（实际上或许没有快这么多），但是可见spark是要比Hadoop MapReduce计算能力更强的计算引擎。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230095750.png"></p>
<h5 id="组件角色"><a href="#组件角色" class="headerlink" title="组件角色"></a>组件角色</h5><p>Spark由Spark Core、Spark SQL、Spark Streaming、MLib和GraphX四大组件构成 .</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230095825.png"></p>
<p>角色说明：</p>
<ul>
<li>Spark Core：spark的核心，将数据抽象为弹性分布式数据集（RDD），提供了分布式任务调度，RPC通信、序列化和压缩等特性，是内存计算的框架，用于离线计算</li>
<li>Spark SQL：基于Spark Core之上用于结构化数据建模和数据处理组件，实现交互式查询</li>
<li>Spark Streaming：利用Spark Core快速调度能力进行流式计算</li>
<li>MLib：是Spark上分布式机器学习框架，提供了大量的算法</li>
<li>GraphX：是Spark上的分布式图形处理框架，能进行高效的图计算</li>
</ul>
<h5 id="架构-1"><a href="#架构-1" class="headerlink" title="架构"></a>架构</h5><p>Spark是一个典型的master/slave主从架构，基于内存计算引擎，提供了多种缓存机制，将RDD 缓存到内存或者磁盘中，这种机制使得Spark可以进行迭代计算和数据共享，从而减少数据读取的IO开销，架构如下：</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230100453.png"></p>
<ul>
<li><strong>Driver</strong>：初始化Spark运行环境，创建SparkContext上下文环境，是用户程序的入口，即main() 方法</li>
<li><strong>Cluster Manager</strong>：资源管理器，目前支持Standalone、YARN、Mesos和Kubernetes这几种模式，在Standalone模式中，Cluster Manager即为Master节点，控制整个集群</li>
<li><strong>Worker</strong>：spark计算节点，负责计算任务的管理，为task分配并启动Executor，定时向Cluster Manager汇报任务执行情况</li>
<li><strong>Executor</strong>：Spark Task工作的容器，是用户程序在worker节点上的一个进程，运行计算任务，负责数据的读取和写入，缓存中间数据</li>
</ul>
<h5 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h5><p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230100533.png"></p>
<ol>
<li>Driver驱动程序会初始化<code>SparkContext</code></li>
<li>初始化过程中会启动<code>DAGScheduler</code>和<code>TaskScheduler</code></li>
<li><code>TaskScheduler</code>通过后台进程向Master注册用户程序</li>
<li>Master收到注册请求之后会通知Worker为用户程序启动多个Executor容器</li>
<li>Executor反向<code>SparkContext</code>注册</li>
<li><code>SparkContext</code>将应用程序发给Executor</li>
<li><code>SparkContext</code>完成初始化，构建DAG，创建Job并且根据action操作划分Stage，形成<code>TaskSet</code>发送给<code>TaskScheduler</code>，最后发给Executor执行</li>
<li>运行完释放资源</li>
</ol>
<h5 id="Spark-为什么比MapReduce快"><a href="#Spark-为什么比MapReduce快" class="headerlink" title="Spark 为什么比MapReduce快"></a>Spark 为什么比MapReduce快</h5><ul>
<li>Spark相对于MapReduce减少了磁盘IO，没有太多中间结果落盘</li>
<li>Spark采用了多线程模型，基于线程池复用降低task线程的开销</li>
<li>spark提供了多种缓存策略，避免了重复计算</li>
<li>灵活的内存管理策略</li>
<li>Spark的DAG（有向无环图）算法</li>
<li>提供丰富的抽象方法，MapReduce只有map和reduce两种抽象</li>
<li>缓存和checkpoint，通过lineage实现高度容错性</li>
</ul>
<p>以上列举了spark比MapReduce快的部分特性，Spark的出现逐步取代了MapReduce成为新一代离线计算引擎的最佳选择，不仅如此，spark还提供了Spark Streaming组件作为流式计算引擎。</p>
<h4 id="Spark-Streaming"><a href="#Spark-Streaming" class="headerlink" title="Spark Streaming"></a>Spark Streaming</h4><p>Spark Streaming是Spark Core API的扩展，支持实时数据流的可伸缩、高吞吐量、容错流处理。支持多种数据源，数据可以从Kafka、Flume、HDFS、S3、Kinesis或TCP套接字等许多来源获取，并可以使用复杂的算法处理，这些算法由map、reduce、join和window等高级函数表达。最后，可以将处理过的数据推送到文件系统、数据库和实时仪表板中。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230102906.png"></p>
<h5 id="工作模型"><a href="#工作模型" class="headerlink" title="工作模型"></a>工作模型</h5><p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230103446.png" alt="image-20201230103445976"></p>
<p>Spark Streaming基于micro batch方式的计算和处理流数据，提供了称为离散流或DStream的高级抽象，它表示连续的数据流。将接收到的数据流切分为多个独立的DStream，本质上也是一系列RDD，通过spark计算引擎进行计算。</p>
<h5 id="DStreams（Discretized-Streams）"><a href="#DStreams（Discretized-Streams）" class="headerlink" title="DStreams（Discretized Streams）"></a>DStreams（Discretized Streams）</h5><p>离散数据流是Spark Streaming提供的基本抽象，将待处理数据转变为连续不断的数据流，可以是外部数据源转换而来，也可以通过内部流之间的转换生成，从DStream的内部流模型可以看到Dstream就是由一系列的RDD组成。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230103618.png" alt="image-20201230103618209"></p>
<p>实际上，Dstream执行的操作都会转换为对底层RDD的操作。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230103652.png" alt="v"></p>
<p>Spark Streaming是怎么实现数据实时计算的呢？</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230103754.png" alt="image-20201230103754154"></p>
<p>当spark Streaming接收到数据后，会将数据流切分成多个批次，形成有界的数据集，设置时间间隔，当不同批次的数据进入窗口后会触发计算机制，通过Spark Core进行一系列tranformation和action操作，因为划分批次之后的数据比较小，实时计算得出结果。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230103843.png" alt="图片"></p>
<h5 id="为什么要用Spark-Streaming呢？"><a href="#为什么要用Spark-Streaming呢？" class="headerlink" title="为什么要用Spark Streaming呢？"></a>为什么要用Spark Streaming呢？</h5><p>从数据的边界来说，我们可以把数据分为有界数据和无界数据。顾名思义，有界数据是有范围的，一般来说与时间是强关联的，以历史数据最为典型。而无界数据就是难以限定范围的数据，会持续不断发生变化，最常见的场景就是实时数据流，看不到数据的尽头，一直在发生。</p>
<p>MapReduce和Spark SQL等框架只能进行离线计算，无法满足实时性要求高的业务场景，如购买商品后进行实时推荐、实时交易业务等等。而spark Streaming巧妙地将数据细分为多个微小的批次，依赖于spark计算引擎能做到准实时计算，不是真正意义上的实时计算，尽管如此，spark Streaming还是得到了业界的认可和广泛应用。</p>
<p>Spark Streaming优势：</p>
<ul>
<li>实时性：Spark Streaming 是一个实时计算框架，微批处理数据，延迟可以控制到秒级</li>
<li>高容错性：Spark Streaming底层依赖RDD lineage特性、缓存机制、checkpoint机制以及WAL预写日志，可以实现高度容错</li>
<li>高吞吐：相对于实时计算框架Storm吞吐量更高</li>
<li>一体化：依托spark生态，不仅能进行实时计算，还能应用于机器学习和Spark SQL场景</li>
</ul>
<p>对于大部分企业来说，秒级的延时是可以接受的，而且一个大数据项目通常会包含离线计算、交互式查询、数据分析、实时计算等模块，Spark Streaming毫无疑问是很好的选择。</p>
<h4 id="Storm"><a href="#Storm" class="headerlink" title="Storm"></a>Storm</h4><p>storm是一个真正的实时流计算引擎，相对于Spark Streaming的微批处理，storm则是来一条数据计算一条数据，延时可以控制到毫秒级。</p>
<h5 id="Storm架构"><a href="#Storm架构" class="headerlink" title="Storm架构"></a>Storm架构</h5><p>storm的架构与Hadoop相似，都是master/slave主从架构。</p>
<table>
<thead>
<tr>
<th>成员</th>
<th>Storm</th>
<th>Hadoop</th>
</tr>
</thead>
<tbody><tr>
<td>主节点</td>
<td>Nimbus</td>
<td>JobTracker</td>
</tr>
<tr>
<td>从节点</td>
<td>Supervisor</td>
<td>TaskTracker</td>
</tr>
<tr>
<td>计算模型</td>
<td>Spout / Bolt</td>
<td>Map / Reduce</td>
</tr>
<tr>
<td>应用程序</td>
<td>Topology</td>
<td>Job</td>
</tr>
<tr>
<td>工作进程</td>
<td>Worker</td>
<td>Child</td>
</tr>
</tbody></table>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230104329.png" alt="图片"></p>
<p>Nimbus：master节点，负责提交任务，分配到supervisor的worker上，运行Topology上的Spout/Bolt任务</p>
<p>Zookeeper：协调节点，负责管理storm集群的元数据信息，比如heartbeat信息、集群状态和配置信息以及Nimbus分配的任务信息等</p>
<p>Supervisor：slave节点，负责管理运行在supervisor节点上的worker进程</p>
<h5 id="Storm工作流程"><a href="#Storm工作流程" class="headerlink" title="Storm工作流程"></a>Storm工作流程</h5><p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230104612.png" alt="图片"></p>
<ol>
<li>客户端提交topology任务到Nimbus节点</li>
<li>Nimbus主节点将任务提交到zookeeper集群管理</li>
<li>Supervisor节点从Zookeeper集群获取任务信息</li>
<li>启动worker进程开始执行任务</li>
</ol>
<h5 id="Storm-Vs-Spark-Streaming"><a href="#Storm-Vs-Spark-Streaming" class="headerlink" title="Storm Vs Spark Streaming"></a>Storm Vs Spark Streaming</h5><p>用一个生动形象的生活场景来比喻Storm和Spark Streaming，Storm好比是手扶电梯，一直在运行，来一个人都会将他带上/下楼，而Spark Streaming更像是升降电梯，要装满一批人才开始启动。</p>
<ul>
<li>storm可以实现毫米级计算响应 VS Spark Streaming只能做到秒级响应</li>
<li>Storm吞吐量低 VS Spark Streaming吞吐量高</li>
</ul>
<table>
<thead>
<tr>
<th>Item</th>
<th>Storm</th>
<th>Spark Streaming</th>
</tr>
</thead>
<tbody><tr>
<td>Streaming Model</td>
<td>Native</td>
<td>Micro-Batch</td>
</tr>
<tr>
<td>Guarantees</td>
<td>At-Least-Once</td>
<td>Exactly-Once</td>
</tr>
<tr>
<td>Back Pressure</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Latency</td>
<td>Very Low</td>
<td>Low</td>
</tr>
<tr>
<td>Throughput</td>
<td>Low</td>
<td>High</td>
</tr>
<tr>
<td>Fault Tolerance</td>
<td>Record ACKs</td>
<td>RDD Based CheckPoint</td>
</tr>
<tr>
<td>Stateful</td>
<td>No</td>
<td>Yes（DStream）</td>
</tr>
</tbody></table>
<h4 id="Flink"><a href="#Flink" class="headerlink" title="Flink"></a>Flink</h4><p>Apache Flink是一个分布式处理引擎，用于在<em>无边界和有边界</em>数据流上进行有状态的计算。Flink能在所有常见集群环境中运行，并能以内存速度和任意规模进行计算。现在Flink也是主流的实时流计算框架并且同时支持批处理，支持基于有状态的事件时间进行计算，成为大数据计算引擎的领头羊，大有盖过Spark风头之势。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230104908.png" alt="图片"></p>
<p>擅长处理有界（bounded）数据和无界（unbounded）数据，有界数据通常指的是离线历史数据，用于批处理，而无界数据指数据流有定义数据产生的开始，却无法定义数据何时结束，因此无界数据流通常说的就是实时流，用于实时计算。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230104939.png" alt="图片"></p>
<h5 id="架构-2"><a href="#架构-2" class="headerlink" title="架构"></a>架构</h5><p>Flink和Spark一样，也是主从架构，由JobManager和TaskManager组成</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230105021.png" alt="图片"></p>
<p>JobManager：主节点，负责处理客户端提交的Job，管理Job状态信息，调度分配集群任务，对完成的 Task 或执行失败做出反应、协调 checkpoint、并且协调从失败中恢复</p>
<p>TaskManager：从节点，负责管理节点上的资源，向JobManager汇报集群状态，执行计算JobManager分配的Task</p>
<p>Flink工作调度</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/20201230105309.png" alt="img"></p>
<ol>
<li>用户提交Flink程序时，client会对程序进行预处理，构建Dataflow graph，封装成Job提交到JobManager</li>
<li>JobManager接收到client提交的Job，获取并管理Job的基本信息，构建DAG执行计划，通过Scheduler调度任务并分配到对应的TaskManager节点</li>
<li>TaskManager向JobManager注册，JobManager将Job分配到TaskManager执行，每个Task Slot代表着用来执行Task的资源，包括了内存、cpu等</li>
<li>TaskManager与JobManager保持心跳，定时汇报节点资源情况以及任务执行情况</li>
<li>JobManager将将任务执行的状态和结果反馈给客户端</li>
</ol>
<h5 id="Flink的优势"><a href="#Flink的优势" class="headerlink" title="Flink的优势"></a>Flink的优势</h5><ul>
<li>Flink支持实时计算，且基于内存管理，性能优越</li>
<li>具有高吞吐、低延迟、高性能的流处理特性</li>
<li>Flink与Hadoop生态高度融合</li>
<li>高度灵活的时间窗口语义</li>
<li>流批一体化，同时支持批处理和流计算</li>
<li>高容错，基于分布式快照（snapshot）和checkpoint检查点机制</li>
<li>具有反压（Backpressure）功能</li>
<li>支持有状态计算的Exactly-once语义</li>
<li>可以进行机器学习处理（FlinkML）、图分析（Gelly）、关系数据处理（FLink SQL）以及复杂事件处理（CEP）</li>
</ul>
<h4 id="Flink-VS-Storm-VS-Spark-Streaming"><a href="#Flink-VS-Storm-VS-Spark-Streaming" class="headerlink" title="Flink VS Storm VS Spark Streaming"></a>Flink VS Storm VS Spark Streaming</h4><table>
<thead>
<tr>
<th>Item</th>
<th>Flink</th>
<th>Storm</th>
<th>Spark Streaming</th>
</tr>
</thead>
<tbody><tr>
<td>Streaming Model</td>
<td>Native</td>
<td>Native</td>
<td>Micro-Batch</td>
</tr>
<tr>
<td>Guarantees</td>
<td>Exactly-Once</td>
<td>At-Least-Once</td>
<td>Exactly-Once</td>
</tr>
<tr>
<td>Back Pressure</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Latency</td>
<td>Medium</td>
<td>Very Low</td>
<td>Low</td>
</tr>
<tr>
<td>Throughput</td>
<td>High</td>
<td>Low</td>
<td>High</td>
</tr>
<tr>
<td>Fault Tolerance</td>
<td>Checkouting</td>
<td>Record ACKs</td>
<td>RDD Based CheckPoint</td>
</tr>
<tr>
<td>Stateful</td>
<td>Yes（Operators）</td>
<td>No</td>
<td>Yes（DStream）</td>
</tr>
</tbody></table>
<h3 id="Tool"><a href="#Tool" class="headerlink" title="Tool"></a>Tool</h3><script src="https://gist.github.com/FlyMeToTheMars/43f8f342d907d1eba39d270324b3653f.js"></script>

<h1 id="JS-amp-Tool-amp-Other"><a href="#JS-amp-Tool-amp-Other" class="headerlink" title="JS &amp; Tool &amp; Other"></a>JS &amp; Tool &amp; Other</h1><h2 id="VSCODE"><a href="#VSCODE" class="headerlink" title="VSCODE"></a>VSCODE</h2><p>插件搜索 @installed 可以查到已经安装的插件</p>
<p>自动格式化代码：<code>Shift + Alt + F</code></p>
<p>特别有用的正则：</p>
<p>1.删除A之后的所有字符用：A.*$</p>
<p>2.删除A之前的所有字符用：^([^s]*)A</p>
<p>####如果是其他字符就把A替换为其他字符</p>
<p>注释：如何是特殊字符注意转义</p>
<h1 id="Anaconda-Navigator-amp-Pyhton-amp-脚本语言-amp-Others"><a href="#Anaconda-Navigator-amp-Pyhton-amp-脚本语言-amp-Others" class="headerlink" title="Anaconda Navigator &amp; Pyhton &amp; 脚本语言 &amp; Others"></a>Anaconda Navigator &amp; Pyhton &amp; 脚本语言 &amp; Others</h1><h2 id="Anaconda-Navigator-介绍-背景"><a href="#Anaconda-Navigator-介绍-背景" class="headerlink" title="Anaconda Navigator 介绍 / 背景"></a>Anaconda Navigator 介绍 / 背景</h2><h3 id="conda-anaconda-anaconda-navigator-pip-virtualenv区别"><a href="#conda-anaconda-anaconda-navigator-pip-virtualenv区别" class="headerlink" title="conda anaconda anaconda-navigator pip virtualenv区别"></a>conda anaconda anaconda-navigator pip virtualenv区别</h3><ul>
<li><p>Anaconda是一个包含180+的科学包及其依赖项的发行版本。其包含的科学包包括：conda, numpy, scipy, ipython notebook等。</p>
</li>
<li><p>conda是包及其依赖项和环境的管理工具。</p>
</li>
<li><p>pip是用于安装和管理软件包的包管理器。</p>
</li>
<li><p>virtualenv：用于创建一个<strong>独立的</strong>Python环境的工具。</p>
</li>
<li><p>“Anaconda-Navigator”中已经包含“Jupyter Notebook”、“Jupyterlab”、“Qtconsole”和“Spyder”。</p>
</li>
</ul>
<h3 id="conda基础操作"><a href="#conda基础操作" class="headerlink" title="conda基础操作"></a>conda基础操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">创建环境 conda create -n envname python=xxx</span><br><span class="line"></span><br><span class="line">删除环境 conda remove -n envname --all</span><br><span class="line"></span><br><span class="line">进入环境 conda activate envname (old version: source activate xxx)</span><br><span class="line"></span><br><span class="line">离开环境 conda deactivate (old version: source deactivate)</span><br><span class="line"></span><br><span class="line">列出所有环境 conda info -e #这里列出环境的同时会列出该环境的绝对路径</span><br></pre></td></tr></table></figure>

<h4 id="conda参数"><a href="#conda参数" class="headerlink" title="conda参数"></a>conda参数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">conda install -y 覆盖提示，默认yes</span><br><span class="line"></span><br><span class="line">The following NEW packages will be INSTALLED:</span><br><span class="line"></span><br><span class="line">    libgfortran:     1.0-0             </span><br><span class="line">    numpy:           1.10.2-py27_0     </span><br><span class="line">    openblas:        0.2.14-3          </span><br><span class="line">    pandas:          0.17.1-np110py27_0</span><br><span class="line">    python-dateutil: 2.4.2-py27_0      </span><br><span class="line">    pytz:            2015.7-py27_0     </span><br><span class="line">    six:             1.10.0-py27_0     </span><br><span class="line"></span><br><span class="line">Proceed ([y]/n)? y</span><br><span class="line">等于提前输入了这个y</span><br><span class="line"></span><br><span class="line">-------------------</span><br><span class="line"></span><br><span class="line">conda install -c 这个c的意思是channel，也就是指定了下载通道，在出现某些网络问题的情况下可以换一个下载源就这个意思</span><br><span class="line"></span><br><span class="line">-------------------</span><br></pre></td></tr></table></figure>

<h4 id="conda-install-和-pip-install-的区别"><a href="#conda-install-和-pip-install-的区别" class="headerlink" title="conda install 和 pip install 的区别"></a>conda install 和 pip install 的区别</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip只能安装python包，而conda可以安装由任何语言编写的包</span><br><span class="line">pip不能创建虚拟环境，需要借助另外的包，例如virtualenv,而conda可以创建虚拟环境。</span><br><span class="line">pip是按照python时自带的，而conda需要安装anaconda才能用。</span><br></pre></td></tr></table></figure>

<p>具体区别可以在找个官网上找到 <a href="https://www.anaconda.com/blog/understanding-conda-and-pip" target="_blank" rel="noopener">https://www.anaconda.com/blog/understanding-conda-and-pip</a></p>
<h4 id="conda更新"><a href="#conda更新" class="headerlink" title="conda更新"></a>conda更新</h4><p>很多时候打不开可能也是因为要更新了</p>
<p>管理员运行            <code>conda prompt</code><br>然后                        <code>conda update anaconda-navigator</code></p>
<p>第三步                    <code>anaconda-navigator --reset</code></p>
<p>第四步                    <code>conda update anaconda-client</code></p>
<p>第五步                    <code>conda update -f anaconda-client</code></p>
<h2 id="Jupyter-Book"><a href="#Jupyter-Book" class="headerlink" title="Jupyter Book"></a>Jupyter Book</h2><h3 id="使用技巧"><a href="#使用技巧" class="headerlink" title="使用技巧"></a>使用技巧</h3><p>端口 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">默认8888 值得一提的是如果同时开启jupyter book和jupyterlab需要小心端口冲突</span><br></pre></td></tr></table></figure>

<p>快捷键</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">快捷键这里不过多介绍，因为我本身就是远程到windows机器上 `等待补充`</span><br></pre></td></tr></table></figure>

<p>显示多行输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Jupyter Book默认只显示一行输出，要想显示多行输出,需要添加如下代码</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> IPython.core.interactiveshell <span class="keyword">import</span> InteractiveShell</span><br><span class="line">InteractiveShell.ast_node_interactivity = <span class="string">'all'</span></span><br></pre></td></tr></table></figure>

<p>简易命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">不必离开Jupyter笔记本来执行Shell命令，而是可以在命令开头使用感叹号(!)。例如，您可以安装软件包。</span><br><span class="line">!pip install matplotlib</span><br></pre></td></tr></table></figure>

<p>大量魔术命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">魔术命令（magic commands）是有助于提高生产率的特殊命令。您可能最熟悉下面的魔术命令，该命令让Notebook渲染Python Matplotlib创建的图表。</span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">％pwd ＃打印当前工作目录</span><br><span class="line">％cd ＃更改工作目录</span><br><span class="line">％ls ＃显示当前目录中的内容</span><br><span class="line">％load [在此处插入Python文件名] ＃将代码加载到Jupyter Notebook</span><br><span class="line">％store [在此处插入变量]  ＃这使您可以传递Jupyter Notebooks之间的变量</span><br><span class="line">％who  ＃使用它列出所有变量</span><br><span class="line">%lsmagic # 查看完整的魔术命令列表</span><br></pre></td></tr></table></figure>

<p>记录单元格运行时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%%time</span><br></pre></td></tr></table></figure>

<p>显示函数文档</p>
<p><code>shift + tab</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 在Jupyter Book里面查看这个Book后面的Python版本的命令</span><br><span class="line">import sys</span><br><span class="line">sys.version</span><br></pre></td></tr></table></figure>

<h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><h3 id="python基础"><a href="#python基础" class="headerlink" title="python基础"></a>python基础</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 照例来个 Hello World 先</span></span><br><span class="line">print(<span class="string">"Hello, Jupyter Book"</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打印 Python 中的所有关键字</span></span><br><span class="line"><span class="keyword">import</span> keyword</span><br><span class="line">print(keyword.kwlist)</span><br></pre></td></tr></table></figure>

<p>[‘False’, ‘None’, ‘True’, ‘and’, ‘as’, ‘assert’, ‘async’, ‘await’, ‘break’, ‘class’, ‘continue’, ‘def’, ‘del’, ‘elif’, ‘else’, ‘except’, ‘finally’, ‘for’, ‘from’, ‘global’, ‘if’, ‘import’, ‘in’, ‘is’, ‘lambda’, ‘nonlocal’, ‘not’, ‘or’, ‘pass’, ‘raise’, ‘return’, ‘try’, ‘while’, ‘with’, ‘yield’]</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 幂运算</span></span><br><span class="line"><span class="number">1.01</span> ** <span class="number">365</span></span><br><span class="line"><span class="comment"># 乘法运算符和字符串的混合使用</span></span><br><span class="line">print(<span class="string">'-------'</span> * <span class="number">10</span>)</span><br><span class="line"><span class="comment"># 除法运算</span></span><br><span class="line"><span class="number">10</span> / <span class="number">20</span></span><br><span class="line"><span class="comment"># 取整运算</span></span><br><span class="line"><span class="number">9</span> // <span class="number">2</span> <span class="comment"># 取整</span></span><br></pre></td></tr></table></figure>

<p>37.78343433288728</p>
<p><code>----------------------------------------------------------------------</code></p>
<p>0.5</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">多行注释</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">print(<span class="string">"多行注释"</span>)</span><br></pre></td></tr></table></figure>

<p><code>&#39;\n多行注释\n&#39;</code></p>
<p><code>多行注释</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按照是否是数字型类可以把python里面的类型分为两类，数字型和非数字型。</span></span><br><span class="line"><span class="comment"># 数字类型分为 int float bool complex(复数型)，非数字型分为 字符串、列表、元组、字典。（这四种非数字型类型其实都可以看为容器或者序列）</span></span><br><span class="line"><span class="comment"># 判定类型 python 3 取消了python 2里面的长整形的概念</span></span><br><span class="line">account = <span class="number">1101</span></span><br><span class="line">print(type(account))</span><br></pre></td></tr></table></figure>

<p><code>&lt;class &#39;int&#39;&gt;</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Bool 类型 参与计算 True 是 1， false 是 0</span></span><br><span class="line"><span class="comment"># input() 输入的总是String类型</span></span><br><span class="line">inputStr = input(<span class="string">"记录输入"</span>)</span><br></pre></td></tr></table></figure>

<p>记录输入 （内容 ）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python类型强制转换 强制把123字符串转换成了int</span></span><br><span class="line">type(int(<span class="string">"123"</span>))</span><br></pre></td></tr></table></figure>

<p>int</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 格式化字符串</span></span><br><span class="line"><span class="comment"># %s 字符串</span></span><br><span class="line">name = <span class="string">"demo"</span></span><br><span class="line">print(<span class="string">"我的名字叫 %s"</span> % name)</span><br><span class="line"><span class="comment"># %d 有符号十进制整数 %09d 的意思是如果没有get到9位的话，就用0补全，如果get到了 不进行别的多余操作</span></span><br><span class="line">num = <span class="number">1</span></span><br><span class="line">print(<span class="string">"学号是 %09d"</span> % num)</span><br><span class="line"><span class="comment"># %f 取舍同上 %.2f 的意思是取小数点后两位，没有的话0补全</span></span><br><span class="line">price = <span class="number">8.5</span></span><br><span class="line">weight = <span class="number">7.5</span></span><br><span class="line">money = price * weight</span><br><span class="line">print(<span class="string">"苹果单价 %.2f元/斤 ,购买了 %.3f斤，需要支付%.4f元"</span> % (price,weight,money))</span><br><span class="line">scale = <span class="number">0.8</span></span><br><span class="line">print(<span class="string">"数据比例是 %.2f%%"</span> % (scale * <span class="number">100</span>)) <span class="comment"># 此处内部的括号如果省略的话，是另一种效果 --&gt; 字符串 * 100</span></span><br></pre></td></tr></table></figure>

<p>我的名字叫 demo<br>学号是 000000001<br>苹果单价 8.50元/斤 ,购买了 7.500斤，需要支付63.7500元<br>数据比例是 80.00%</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 判断条件 没有括号 使用 and 和 or 作为逻辑判断连接符号 而不像Java里面的 &amp; 和 | 。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if not </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># elif =&gt; else if in Java</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多行if条件：</span></span><br><span class="line"><span class="comment"># if ((player == 1 and b == 2))</span></span><br><span class="line"><span class="comment">#      or (...)</span></span><br><span class="line"><span class="comment">#      or (...)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># break 和 continue</span></span><br><span class="line"><span class="comment"># break: 某一天剑满足时，退出循环，不再执行后续重复的代码</span></span><br><span class="line"><span class="comment"># continue: 某一条件满足时，不执行后续重复的代码</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 随机</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">random.randint(<span class="number">10</span>,<span class="number">20</span>) <span class="comment"># 10 &lt;= n &lt;= 20</span></span><br></pre></td></tr></table></figure>

<p>16</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 赋值运算符</span></span><br><span class="line"><span class="comment"># =     +=    -=    *=    /=    //=    %=    **=</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在控制台输出</span></span><br><span class="line"><span class="comment"># 1. 定义一个计数器变量，从数字1开始，循环会比较方便</span></span><br><span class="line">row = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.开始循环</span></span><br><span class="line"><span class="keyword">while</span> row &lt;= <span class="number">5</span>:</span><br><span class="line">    print(<span class="string">"*"</span> * row)</span><br><span class="line">    row += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print 详解</span></span><br><span class="line">print() <span class="comment"># &lt;=&gt; print("内容",end="换行符")</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*</span><br><span class="line">**</span><br><span class="line">***</span><br><span class="line">****</span><br><span class="line">*****</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 经典 99 乘法表</span></span><br><span class="line">row = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> row &lt;= <span class="number">9</span>:</span><br><span class="line">    col = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> col &lt;= row:</span><br><span class="line">        print(<span class="string">"%d * %d = %d"</span> % (col, row, col * row ), end = <span class="string">"\t"</span>)</span><br><span class="line">        col += <span class="number">1</span></span><br><span class="line">    row += <span class="number">1</span></span><br><span class="line">    print(<span class="string">""</span>)</span><br></pre></td></tr></table></figure>

<p>1 * 1 = 1<br>1 * 2 = 2    2 * 2 = 4<br>1 * 3 = 3    2 * 3 = 6    3 * 3 = 9<br>1 * 4 = 4    2 * 4 = 8    3 * 4 = 12    4 * 4 = 16<br>1 * 5 = 5    2 * 5 = 10    3 * 5 = 15    4 * 5 = 20    5 * 5 = 25<br>1 * 6 = 6    2 * 6 = 12    3 * 6 = 18    4 * 6 = 24    5 * 6 = 30    6 * 6 = 36<br>1 * 7 = 7    2 * 7 = 14    3 * 7 = 21    4 * 7 = 28    5 * 7 = 35    6 * 7 = 42    7 * 7 = 49<br>1 * 8 = 8    2 * 8 = 16    3 * 8 = 24    4 * 8 = 32    5 * 8 = 40    6 * 8 = 48    7 * 8 = 56    8 * 8 = 64<br>1 * 9 = 9    2 * 9 = 18    3 * 9 = 27    4 * 9 = 36    5 * 9 = 45    6 * 9 = 54    7 * 9 = 63    8 * 9 = 72    9 * 9 = 81    </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multiple_table</span><span class="params">()</span>:</span></span><br><span class="line">    row = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> row &lt;= <span class="number">9</span>:</span><br><span class="line">        col = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> col &lt;= row:</span><br><span class="line">            print(<span class="string">"%d * %d = %d"</span> % (col, row, col * row ), end = <span class="string">"\t"</span>)</span><br><span class="line">            col += <span class="number">1</span></span><br><span class="line">        row += <span class="number">1</span></span><br><span class="line">        print(<span class="string">""</span>)</span><br><span class="line">        </span><br><span class="line">multiple_table()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数注释的说明</span></span><br><span class="line"><span class="comment"># 1. 注释写在方法名下面  2. 方法的第一排要和上面最后一行有两行空白的距离 3.pycharm中，鼠标放在方法名上，Ctrl+Q就可以调出注释。</span></span><br></pre></td></tr></table></figure>

<p>1 * 1 = 1<br>1 * 2 = 2    2 * 2 = 4<br>1 * 3 = 3    2 * 3 = 6    3 * 3 = 9<br>1 * 4 = 4    2 * 4 = 8    3 * 4 = 12    4 * 4 = 16<br>1 * 5 = 5    2 * 5 = 10    3 * 5 = 15    4 * 5 = 20    5 * 5 = 25<br>1 * 6 = 6    2 * 6 = 12    3 * 6 = 18    4 * 6 = 24    5 * 6 = 30    6 * 6 = 36<br>1 * 7 = 7    2 * 7 = 14    3 * 7 = 21    4 * 7 = 28    5 * 7 = 35    6 * 7 = 42    7 * 7 = 49<br>1 * 8 = 8    2 * 8 = 16    3 * 8 = 24    4 * 8 = 32    5 * 8 = 40    6 * 8 = 48    7 * 8 = 56    8 * 8 = 64<br>1 * 9 = 9    2 * 9 = 18    3 * 9 = 27    4 * 9 = 36    5 * 9 = 45    6 * 9 = 54    7 * 9 = 63    8 * 9 = 72    9 * 9 = 81    </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 函数参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum_2_num</span><span class="params">(num1,num2)</span>:</span></span><br><span class="line">    result = num1 + num2</span><br><span class="line">    print(<span class="string">"%d + %d = %d"</span> % (num1,num2,result))</span><br><span class="line"></span><br><span class="line">sum_2_num(<span class="number">50</span>,<span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<p>50 + 20 = 70</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pyc文件：python的编译后文件，浏览程序目录里面会有一个 __pycache__ 的目录，里面会有pyc为后缀的文件，就是编译后文件。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># List 是使用最频繁的数据类型，对应别的语言中的数组。</span></span><br><span class="line"><span class="comment"># 专门用于存储一串信息</span></span><br><span class="line"><span class="comment"># 列表用 [] 定义，数据之间使用 , 分隔</span></span><br><span class="line"><span class="comment"># 列表的索引从 0 开始  --&gt; index</span></span><br><span class="line"></span><br><span class="line">lname_list = []</span><br><span class="line"><span class="comment"># 增加</span></span><br><span class="line"><span class="comment"># 列表自带了很多的方法，</span></span><br><span class="line"><span class="comment"># 列表.insert(索引) 在指定位置插入数据</span></span><br><span class="line"><span class="comment"># 列表.append(数据) 在末尾追加数据</span></span><br><span class="line"><span class="comment"># 列表.extend(列表2) 将列表2 的数据追加到列岛</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改</span></span><br><span class="line"><span class="comment"># 列表[索引] = 数据 修改指定索引的数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line"><span class="comment"># del 列表[索引] 删除指定索引的数据</span></span><br><span class="line"><span class="comment"># 列表.remove[数据] 删除第一个出现的指定数据</span></span><br><span class="line"><span class="comment"># 列表.pop 删除末尾数据</span></span><br><span class="line"><span class="comment"># 列表.pop(索引) 删除指定索引数据</span></span><br><span class="line"><span class="comment"># 列表.clear 清空列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计</span></span><br><span class="line"><span class="comment"># len(列表) 列表长度</span></span><br><span class="line"><span class="comment"># 列表.count(数据) 数据在列表中出现的次数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 排序</span></span><br><span class="line"><span class="comment"># 列表.sort() 生序排序</span></span><br><span class="line"><span class="comment"># 列表.sort(reverse=True) 降序排序</span></span><br><span class="line"><span class="comment"># 列表.reverse() 逆序、反转</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># List之遍历</span></span><br><span class="line"><span class="comment"># 类比 Java 里面的 foreach </span></span><br><span class="line"><span class="comment"># 语法形式：</span></span><br><span class="line"><span class="comment"># for 别名 in List:</span></span><br><span class="line"><span class="comment"># 理论上List是可以存储不同类型的数据的, 习惯上 使用元组保存不同类型的数据，使用List保存相同类型的数据</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 元组 Tuple</span></span><br><span class="line"><span class="comment"># 元组的元素不能修改</span></span><br><span class="line"><span class="comment"># 使用（）定义，索引从0开始</span></span><br><span class="line">info_tuple = (<span class="string">"zhangsan"</span>,<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 混淆点 定义只有一个变量的元组 需要加上一个逗号</span></span><br><span class="line">single_tuple = (<span class="number">5</span>)</span><br><span class="line">type(single_tuple)  <span class="comment">#int</span></span><br><span class="line">single_tuple = (<span class="number">5</span>,)</span><br><span class="line">type(single_tuple) <span class="comment"># tuple</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 但是如果是定义一个空的元祖的话，我们只需要定义一个括号即可</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 格式化字符串 % 后面的本质上就是一个元组， 使用元组来拼接一个新的字符串效果相同</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># List 和 Tuple 的转换 List(元组) 可以把元组转换成List，使用tuple(列表)可以把列表转换成元组</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字典 dictionary 使用 &#123;&#125; 定义，类似于 Map</span></span><br><span class="line"><span class="comment"># 字典无序 List有序    字典的key必须是不可变类型</span></span><br><span class="line"><span class="comment"># 值可以是任何数据类型，键只能使用字符串、数字或者元组</span></span><br><span class="line">xiaoming = &#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"小明"</span>,</span><br><span class="line">    <span class="string">"age"</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="string">"gender"</span>: <span class="literal">True</span>,</span><br><span class="line">    <span class="string">"height"</span>: <span class="number">1.75</span>,</span><br><span class="line">    <span class="string">"weight"</span>: <span class="number">75.6</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print(xiaoming)</span><br><span class="line">print(xiaoming[<span class="string">"name"</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 增加 / 修改</span></span><br><span class="line">xiaoming[<span class="string">"age"</span>] = <span class="number">10</span>  <span class="comment"># 如果这个值得没有的话，就会新建</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除 pop</span></span><br><span class="line">xiaoming.pop(<span class="string">"age"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并字典 update</span></span><br><span class="line">zidian = &#123;<span class="string">"key"</span>: <span class="string">"value"</span>&#125;</span><br><span class="line">zidian.update(xiaoming)</span><br><span class="line">print(zidian)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清空 clear</span></span><br><span class="line">zidian.clear()</span><br><span class="line">print(zidian)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> xiaoming:</span><br><span class="line">    print(<span class="string">"%s - %s"</span> % (k, xiaoming[k]))</span><br></pre></td></tr></table></figure>

<p>{‘name’: ‘小明’, ‘age’: 18, ‘gender’: True, ‘height’: 1.75, ‘weight’: 75.6}<br>小明</p>
<p>10</p>
<p>{‘key’: ‘value’, ‘name’: ‘小明’, ‘gender’: True, ‘height’: 1.75, ‘weight’: 75.6}<br>{}<br>name - 小明<br>gender - True<br>height - 1.75<br>weight - 75.6</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串</span></span><br><span class="line"><span class="comment"># 单引号和双引号都能定义字符串 但是单引号不推荐</span></span><br><span class="line">str1 = <span class="string">"hello python"</span></span><br><span class="line">print(str1[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> str1:</span><br><span class="line">    print(k)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 统计长度</span></span><br><span class="line">print(len(str1))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计出现次数</span></span><br><span class="line">print(str1.count(<span class="string">"o"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 某个字符串出现的位置 (第一个字母出现的index)</span></span><br><span class="line">print(str1.index(<span class="string">"o"</span>))</span><br></pre></td></tr></table></figure>

<p>h<br>h<br>e<br>l<br>l<br>o</p>
<p>p<br>y<br>t<br>h<br>o<br>n<br>12<br>2<br>4</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串切片 List和tuple也能切片 字典不能切片</span></span><br><span class="line">num_str = <span class="string">"0123456789"</span></span><br><span class="line"></span><br><span class="line">num_str[<span class="number">2</span>:<span class="number">6</span>] <span class="comment"># index 2 - 5 含头不含尾 				   	'2345'</span></span><br><span class="line"></span><br><span class="line">num_str[<span class="number">2</span>:] <span class="comment"># index 2 到末尾								'23456789'</span></span><br><span class="line"></span><br><span class="line">num_str[:<span class="number">6</span>] <span class="comment"># 开始 -&gt; index 6 之前的所有char, 前6位			'012345'</span></span><br><span class="line"></span><br><span class="line">num_str[:] <span class="comment"># 全部		'0123456789'</span></span><br><span class="line"></span><br><span class="line">num_str[::<span class="number">2</span>] <span class="comment"># 从头开始 步长为1取值			'02468'</span></span><br><span class="line"></span><br><span class="line">num_str[<span class="number">1</span>::<span class="number">2</span>] <span class="comment"># 从index = 1 开始 步长为1取值			'13579'</span></span><br><span class="line"></span><br><span class="line">num_str[<span class="number">2</span>:<span class="number">-1</span>] <span class="comment"># 负数代表从后面往前			'2345678'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串逆序 *</span></span><br><span class="line">num_str[<span class="number">-1</span>::<span class="number">-1</span>]			<span class="comment"># '9876543210'</span></span><br><span class="line">num_str[::<span class="number">-1</span>]			<span class="comment"># '9876543210'</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 公共方法 </span></span><br><span class="line"><span class="comment"># len() # 容器内元素个数</span></span><br><span class="line"><span class="comment"># del() # del 有两种方式 还有一种是作为关键字</span></span><br><span class="line"><span class="comment"># max() # 返回容器中元素的最大值</span></span><br><span class="line"><span class="comment"># min() # 返回容器中元素的最小值</span></span><br><span class="line"><span class="comment"># cmp() # python 3 中取消了这个函数</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 运算符在高级类型中的作用</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># + 合并 ： 字符串 列表 元组</span></span><br><span class="line"><span class="comment"># * 重复 ： 字符串 列表 元组</span></span><br><span class="line"><span class="comment"># in 判断是否存在: 字符串 列表 元组 字典</span></span><br><span class="line"><span class="comment"># not in 和上面对应</span></span><br><span class="line"><span class="comment"># &gt; &gt;= == &lt; &lt;= 元素比较 ：字符串 列表 元组</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 完整 for 循环</span></span><br><span class="line"><span class="comment"># 也就是 for 下面 跟了 一个 else ， 如果for循环没有被break打断就会执行else里面的内容，如果被break打断了 ，就不会执行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用场景： 迭代遍历 所需要的数据类型，查找某个元素，如果存在，整体退出循环，如果不存在，在整体循环结束后，进行统一的操作。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python 查看内存地址</span></span><br><span class="line"><span class="comment"># id()</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可变和不可变类型</span></span><br><span class="line"><span class="comment"># 区分标准是 内存中的数据能否修改</span></span><br><span class="line"><span class="comment"># 可变类型只有两个就是 列表和字典 ，可变类型的数据变化是通过方法来实现的</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可变类型 被函数里面修改的时候（并不是创建新的内存使用，而是修改内存里面的数据），虽然是通过参数传入的，但是原值还是会被修改，不可变类型并不会</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 因为Python是解释型语言 所以在Python中原则上不允许直接修改全局变量的值，如果在函数中对全局变量进行复制操作的话，Python会自己创造一个局部变量</span></span><br><span class="line"><span class="comment"># 所以在这个地方对全局变量进行的修改操作时无效操作。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 但是，凡事无绝对，如果一定想要在函数里面修改全局变量的话，我们会在变量前面加上一个Global，这样就不会在函数中重新创建这个局部变量了。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 为了避免全局变量和局部变量在明明的时候出现混淆，一般来说习惯上会在全局变量命名的时候前缀加上一个g_或者gl_</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果函数返回的类型是元组，我们的小括号可以省略</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># return (temp, wetness)</span></span><br><span class="line"><span class="comment"># return temp, wetness  # 小括号可以省略</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python中特有的交换两个值的方式</span></span><br><span class="line">a = <span class="number">6</span></span><br><span class="line">b = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">a,b = (b,a)</span><br><span class="line"></span><br><span class="line">print(a)</span><br><span class="line">print(b)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 缺省参数 具有默认值的参数就叫做缺省参数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在函数里面定义形参的时候直接写 gender = True ，默认就是True的意思</span></span><br><span class="line">num_list = [<span class="number">7</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">9</span>]</span><br><span class="line"><span class="comment"># 默认就是升序排序，因为这种需求更多</span></span><br><span class="line">num_list.sort()</span><br><span class="line">print(num_list)  <span class="comment"># 4,5,7,9</span></span><br><span class="line"><span class="comment"># 只有当降序排序时，才需要传递reverse参数</span></span><br><span class="line">num_list.sort(reverse=<span class="literal">True</span>)</span><br><span class="line">print(num_list)  <span class="comment"># 9,7,5,4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 缺省参数后面不能再跟参数</span></span><br></pre></td></tr></table></figure>

<p>case：</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207282238360.png" alt="image-20220728223807310"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 多值参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(num, *nums, **numss)</span>:</span></span><br><span class="line">    print(num)</span><br><span class="line">    print(nums)</span><br><span class="line">    print(numss)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 习惯上 多值参数里面，我们使用*args表示元组，使用*kwargs表示键值对参数</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">demo(1,2,3,4, age=18)</span><br></pre></td></tr></table></figure>

<p>1<br>(2, 3, 4)<br>{‘age’: 18}</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拆包 字典和元组作为参数传进参数的时候会变成一个整体传入，我们为了拆解这个参数，在传入参数的时候，根据他们的类型在前面 添加一个 * 或者两个 *</span></span><br><span class="line"></span><br><span class="line">run(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(a,*args)</span>:</span></span><br><span class="line">    <span class="comment">#第一个参数传给了a</span></span><br><span class="line">    print(a) <span class="comment"># 1</span></span><br><span class="line">    <span class="comment"># args是一个元组，里面是2和3两个参数</span></span><br><span class="line">    print(args) <span class="comment"># (2,3)</span></span><br><span class="line">    <span class="comment"># *args是将这个元组中的元素依次取出来</span></span><br><span class="line">    print(<span class="string">"对args拆包"</span>)</span><br><span class="line">    print(*args) <span class="comment"># *args 相当于 a,b = args 结果是 2 3</span></span><br><span class="line">    print(<span class="string">"将未拆包的数据传给run1"</span>)</span><br><span class="line">    run1(args) <span class="comment"># 输出元组 ((2,3),) 对元组进行拆包 (2,3)</span></span><br><span class="line">    print(<span class="string">"将拆包后的数据传给run1"</span>)</span><br><span class="line">    run1(*args) <span class="comment"># 输出元组 (2,3) 对元组进行拆包  2 3</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run1</span><span class="params">(*args)</span>:</span></span><br><span class="line">    print(<span class="string">"输出元组"</span>)</span><br><span class="line">    print(args)</span><br><span class="line">    print(<span class="string">"对元组进行拆包"</span>)</span><br><span class="line">    print(*args)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 我对装包，拆包的理解是 参数中的*/**是装包，在函数内部使用这个*的意思就是拆包</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(**kwargs)</span>:</span><span class="comment">#传来的 key = value 类型的实参会映射成kwargs里面的键和值</span></span><br><span class="line">       <span class="comment"># kwargs是一个字典，将未命名参数以键值对的形式</span></span><br><span class="line">       print(kwargs)</span><br><span class="line">       print(<span class="string">"对kwargs拆包"</span>)</span><br><span class="line">       <span class="comment">#  此处可以把**kwargs理解成对字典进行了拆包，&#123;"a":1,"b":2&#125;的kwargs字典又</span></span><br><span class="line">       <span class="comment"># 被拆成了a=1,b=2传递给run1,但是**kwargs是不能像之前*args那样被打印出来看的</span></span><br><span class="line">       run1(**kwargs)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run1</span><span class="params">(a,b)</span>:</span> <span class="comment">#此处的参数名一定要和字典的键的名称一致</span></span><br><span class="line">      print(a,b)</span><br><span class="line"> </span><br><span class="line">run(a=<span class="number">1</span>,b=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>{‘a’: 1, ‘b’: 2}<br>对kwargs拆包<br>1 2</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># OOP 面向对象</span></span><br><span class="line"><span class="comment"># 通用方法：dir(对象) 能够把对象里面所有能调用的方法都调用出来</span></span><br><span class="line"><span class="comment"># 添加属性 Python特有的方法，先把对象创建出来，然后直接使用 .属性名 就可以为这个对象添加新的属性，这种方式虽然简单，但是是不推荐的。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对象初始化</span></span><br><span class="line"><span class="comment"># 当使用类名创建对象时，会自动执行以下操作</span></span><br><span class="line"><span class="comment"># 1. 为对象在内存中分配空间 -- 创建对象</span></span><br><span class="line"><span class="comment"># 2.为对象的属性设置初始值 -- 初始化方法 int</span></span><br><span class="line"><span class="comment"># 这个初始化方法就是 __intit__方法 ，是对象的内置方法</span></span><br><span class="line"><span class="comment"># __init__方法是专门用来定义一个类有哪些属性的方法</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">__init__方法是专门用来定义一个类具有哪些属性的</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设置默认值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, new_name)</span>:</span></span><br><span class="line">        print(<span class="string">"初始化"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 属性</span></span><br><span class="line">        self.name = new_name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"%s 爱吃鱼"</span> % self.name)</span><br><span class="line">        </span><br><span class="line">    <span class="comment"># __del__</span></span><br><span class="line">    <span class="comment"># 对象被销毁前执行的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"%s 我去了"</span> % self.name)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 必须返回字符串 类似于Java的toString方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># print("我是小猫 %s" % self.name) 错误示例</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"我是小猫 %s"</span> % self.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用类名()创建对象的时候，会自动调用初始化方法__init__</span></span><br><span class="line">tom = Cat(<span class="string">"TomDemo"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以用__init__方法内部使用self.属性名 = 属性的初始化值 就可以定义属性</span></span><br><span class="line"><span class="comment"># 定义属性之后，再使用Cat类创建的对象，都会拥有该属性</span></span><br><span class="line">print(tom.name)</span><br><span class="line">tom.eat()</span><br><span class="line"></span><br><span class="line"><span class="comment"># del 销毁是在一个python文件即将运行到结尾的时候</span></span><br><span class="line">print(tom)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Python 能够自动的将一堆括号内部的代码链接在一起</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行结果里面的del方法的位置我完全没有看懂，这个坑以后再填，花了点时间没有整明白</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">身份运算符</span></span><br><span class="line"><span class="string">is      is是判断两个标示符是不是引用同一个对象</span></span><br><span class="line"><span class="string">is not  is not 是判断两个表示服是不是引用不用对象</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">is 与 == 的区别</span></span><br><span class="line"><span class="string">is用于判断两个变量引用对象是否为同一个</span></span><br><span class="line"><span class="string">==用于判断引用变量的值是否相等</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>初始化<br>TomDemo 我去了<br>TomDemo<br>TomDemo 爱吃鱼<br>我是小猫 TomDemo</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 封装 继承 多态</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"吃"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"喝"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"跑"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sleep</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"睡"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wangcai = Animal()</span><br><span class="line"></span><br><span class="line">wangcai.eat() <span class="comment">#吃</span></span><br><span class="line">wangcai.drink() <span class="comment">#喝</span></span><br><span class="line">wangcai.run() <span class="comment">#跑</span></span><br><span class="line">wangcai.sleep() <span class="comment">#睡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 子类拥有父类的所有方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"汪汪叫"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wangwang = Dog()</span><br><span class="line"></span><br><span class="line">wangwang.eat() <span class="comment">#吃</span></span><br><span class="line">wangwang.drink() <span class="comment">#喝</span></span><br><span class="line">wangwang.run() <span class="comment">#跑</span></span><br><span class="line">wangwang.sleep() <span class="comment">#睡</span></span><br><span class="line">wangwang.bark() <span class="comment">#汪汪叫</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiaoTianQuan</span><span class="params">(Dog)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"我会飞"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></span><br><span class="line"></span><br><span class="line">        print(<span class="string">"我是啸天犬"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 调用父类的bark方法</span></span><br><span class="line">        super().bark()</span><br><span class="line">        <span class="comment"># Python2.0 如果要实现上面的功能，有点复杂 代码如下</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Dog.bark(self)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line"></span><br><span class="line">        print(<span class="string">"aafsdwaerwgybds"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 有没有括号 对Python来说 说法很大</span></span><br><span class="line">xtq = XiaoTianQuan()</span><br><span class="line">xtq.bark() <span class="comment">#我是哮天犬 汪汪叫</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="comment"># 属性在init方法中定义 使用__(两个下划线)定义的属性是私有属性，无法被子类访问</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.num1 = <span class="number">100</span></span><br><span class="line">        self.__num2 = <span class="number">200</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__test</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"私有方法 %d %d"</span> % (self.num1, self.__num2))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(self)</span>:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 在子类的对象方法中不能访问父类的私有属性和方法</span></span><br><span class="line">        <span class="comment"># 但是可以通过调用父类的共有方法间接调用父类的公有属性和方法</span></span><br><span class="line">        print(<span class="string">"访问父类的私有属性 %d"</span> % self.__num2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">b = B() <span class="comment"># &lt;__main__.B object at 0x0000020EA7593BE0&gt;</span></span><br><span class="line">print(b)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">在外界不能直接访问对象的私有属性，调用方法</span></span><br><span class="line"><span class="string">print(b.__num2)</span></span><br><span class="line"><span class="string">b.__test()</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">print(b.num1) <span class="comment">#100</span></span><br><span class="line">b.demo() <span class="comment"># 'B' object has no attribute '_B__num2'</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 多继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"test 方法"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"demo 方法"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span><span class="params">(C, D)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建子类对象</span></span><br><span class="line">e = E()</span><br><span class="line">e.test() </span><br><span class="line">e.demo()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 应该避免两个父类汇总存在同名的属性和方法</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">python中多继承两个父类出现相同的方法 属性名的时候</span></span><br><span class="line"><span class="string">使用MRO选择执行顺序的</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">print(E.__mro__) </span><br><span class="line"><span class="comment"># (&lt;class '__main__.E'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.D'&gt;, &lt;class 'object'&gt;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">新式类 以Object为基类的对象</span></span><br><span class="line"><span class="string">旧式类 不以Object为基类的对象</span></span><br><span class="line"><span class="string">两者在多继承时 会影响到方法的搜索顺序</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>test 方法<br>demo 方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 私有属性 / 方法</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Woman</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.__age = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">secret</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"%s 的年龄是 %d"</span> %</span><br><span class="line">              (self.name,</span><br><span class="line">               self.__age))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xiaofang = Woman(<span class="string">"小芳"</span>)</span><br><span class="line"><span class="comment"># 私有属性不能直接调用 但是Python中没有真正的私有属性和方法 可以使用下面第二行的代码调用</span></span><br><span class="line">print(xiaofang.__age) <span class="comment"># 报错，因为不能直接调用</span></span><br><span class="line">print(xiaofang._Woman__age) <span class="comment"># 18</span></span><br><span class="line">xiaofang.secret() <span class="comment"># 小芳 的年龄是 18</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 多态</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类的结构</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">__init__ 为对象初始化</span></span><br><span class="line"><span class="string">实例方法(self)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">类对象     模版 只有一个</span></span><br><span class="line"><span class="string">实例对象    可以有很多个</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tool</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">        Tool.count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show_tool_count</span><span class="params">(cls)</span>:</span></span><br><span class="line"></span><br><span class="line">        print(<span class="string">"工具对象的数量 %d"</span> % cls.count)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建工具对象</span></span><br><span class="line">tool1 = Tool(<span class="string">"斧头"</span>)</span><br><span class="line">tool2 = Tool(<span class="string">"榔头"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用类方法</span></span><br><span class="line">Tool.show_tool_count() <span class="comment"># 工具对象的数量 2</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单例</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">python 中的self和cls一句话描述：self是类（Class）实例化对象，cls就是类（或子类）本身，取决于调用的是那个类。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">__new__</span></span><br><span class="line"><span class="string">为对象分配空间</span></span><br><span class="line"><span class="string">返回对象的引用</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">python获得了对象的引用后，将引用作为第一个参数，传递给__init__方法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">重写__new__方法的代码非常固定 如下</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MusicPlayer</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 创建对象时，new方法会被自动调用</span></span><br><span class="line">        print(<span class="string">"创建对象，分配空间"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 为对象分配空间</span></span><br><span class="line">        instance = super().__new__(cls)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 返回对象的引用</span></span><br><span class="line">        <span class="keyword">return</span> instance</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"播放器初始化"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">player = MusicPlayer()</span><br><span class="line">print(player) <span class="comment"># 每次都指向内存中不同的位置</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">    单例：让类创建的对象，在系统中只哦与唯一的一个实例</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">print(<span class="string">"--------完整单例-------"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SingleMusicPlayer</span><span class="params">(object)</span>:</span></span><br><span class="line">    instance = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    init_flag = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1 判断类属性是否是空对象</span></span><br><span class="line">        <span class="keyword">if</span> cls.instance <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="comment"># 2 调用父类方法，为第一个对象分配空间</span></span><br><span class="line">            cls.instance = super().__new__(cls)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 返回类属性保存的对象引用</span></span><br><span class="line">        <span class="keyword">return</span> cls.instance</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1 判断是否执行过初始化动作</span></span><br><span class="line">        <span class="keyword">if</span> SingleMusicPlayer.init_flag:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 如果没有初始化过</span></span><br><span class="line">        print(<span class="string">"初始化播放器"</span>)</span><br><span class="line"></span><br><span class="line">        SingleMusicPlayer.init_flag = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">player1 = SingleMusicPlayer()</span><br><span class="line">print(player1)</span><br><span class="line"></span><br><span class="line">player2 = SingleMusicPlayer()</span><br><span class="line">print(player2) <span class="comment"># 和上面相同的地址</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 异常</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">try:</span></span><br><span class="line"><span class="string">    尝试执行的代码</span></span><br><span class="line"><span class="string">except:</span></span><br><span class="line"><span class="string">    出现错误的处理</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    num = int(input(<span class="string">"请输入一个整数："</span>))</span><br><span class="line"></span><br><span class="line">    result = <span class="number">8</span> / num</span><br><span class="line"></span><br><span class="line">    print(result)</span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">    <span class="comment"># 错误的处理代码</span></span><br><span class="line">    print(<span class="string">"请输入正确的整数"</span>)</span><br><span class="line"><span class="keyword">except</span> ValueError:</span><br><span class="line">    print(<span class="string">"请输入正确的整数"</span>)</span><br><span class="line"><span class="comment">#     捕获未知错误</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</span><br><span class="line">    print(<span class="string">"未知错误 %s"</span> % result)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 没有异常的时候才会执行的,这个else出现的位置和Java并不是一脉相承的，他这个else针对的是except</span></span><br><span class="line">    print(<span class="string">"尝试成功"</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="comment"># 总是会执行的代码</span></span><br><span class="line">    print(<span class="string">"总是会执行"</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"-"</span> * <span class="number">50</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">异常的传递</span></span><br><span class="line"><span class="string">python 会把异常一直向上传递</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo1</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> int(input(<span class="string">"输入整数："</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo2</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> demo1()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(demo2())</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ValueError                                Traceback (most recent call last)</span></span><br><span class="line"><span class="string">Input In [2], in &lt;cell line: 47&gt;()</span></span><br><span class="line"><span class="string">     43 def demo2():</span></span><br><span class="line"><span class="string">     44     return demo1()</span></span><br><span class="line"><span class="string">---&gt; 47 print(demo2())</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Input In [2], in demo2()</span></span><br><span class="line"><span class="string">     43 def demo2():</span></span><br><span class="line"><span class="string">---&gt; 44     return demo1()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Input In [2], in demo1()</span></span><br><span class="line"><span class="string">     39 def demo1():</span></span><br><span class="line"><span class="string">---&gt; 40     return int(input("输入整数："))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ValueError: invalid literal for int() with base 10: 'dsf'</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">from package import sth</span></span><br><span class="line"><span class="string">from package import *</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 所有倒入的模块 没有缩进的部分都会被执行一次</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">__name__的用法</span></span><br><span class="line"><span class="string">如果需要测试模块 就增加一个条件判断</span></span><br><span class="line"><span class="string">这样增加了判断之后，在作为被包倒入的时候 下面的代码不会执行</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">模版</span></span><br><span class="line"><span class="string"># 导入模块</span></span><br><span class="line"><span class="string"># 定义全局变量</span></span><br><span class="line"><span class="string"># 定义类</span></span><br><span class="line"><span class="string"># 定义函数</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">def main():</span></span><br><span class="line"><span class="string">    # ...</span></span><br><span class="line"><span class="string">    pass</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string"># 根据__name__判断是否执行下方代码</span></span><br><span class="line"><span class="string">if __name__ == "__main__"</span></span><br><span class="line"><span class="string">    main()</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Package</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">包是一个包含多个模块的特殊目录</span></span><br><span class="line"><span class="string">目录下有一个特殊的文件 __init__.py</span></span><br><span class="line"><span class="string">包名的命名方式和变量名一直，小写字母+_</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">好处</span></span><br><span class="line"><span class="string">使用import 包名 可以一次性倒入包中所有的模块</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">在__init__.py文件中用</span></span><br><span class="line"><span class="string">from . import 模块名</span></span><br><span class="line"><span class="string">制定外部文件需要倒入的模块</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 发布</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">发布模块</span></span><br><span class="line"><span class="string">三步</span></span><br><span class="line"><span class="string">1. 创建setup.py</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">发布</span></span><br><span class="line"><span class="string">固定模版：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">from distutils.core import setup</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 多值的字典参数，setup是一个函数</span></span><br><span class="line"><span class="string">setup(name="Hello",  # 包名</span></span><br><span class="line"><span class="string">      version="1.0",  # 版本</span></span><br><span class="line"><span class="string">      description="a simple example",  # 描述信息</span></span><br><span class="line"><span class="string">      long_description="简单的模块发布例子",  # 完整描述信息</span></span><br><span class="line"><span class="string">      author="FlyHugh",  # 作者</span></span><br><span class="line"><span class="string">      author_email="flyhobo@live.com",  # 作者邮箱</span></span><br><span class="line"><span class="string">      url="flymetothemars.github.io",  # 主页</span></span><br><span class="line"><span class="string">      py_modules=["hello.request",</span></span><br><span class="line"><span class="string">                  "hello.response"])  # 记录包中包中包含的所有模块</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">第二步</span></span><br><span class="line"><span class="string">构建</span></span><br><span class="line"><span class="string">python3 setup.py build</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">第三步</span></span><br><span class="line"><span class="string">python3 setup.py sdist</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">安装</span></span><br><span class="line"><span class="string">tar zxvf 解压</span></span><br><span class="line"><span class="string">sudo python3 setup.py install</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">然后打开python3运行即可</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># File</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Python 文件指针</span></span><br><span class="line"><span class="comment"># 文件指针标记从哪个位置开始读取数据，第一次打开文件时，通常文件指针会指向文件的开始位置</span></span><br><span class="line"><span class="comment"># 当执行了 read 方法后，文件指针对移动到 读取内容的末尾</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也就是说 </span></span><br><span class="line"><span class="comment"># 第一次读取了之后，文件指针移动到了文件末尾，再次调用不会读取到任何内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># f = open("文件名","访问方式")</span></span><br><span class="line"><span class="comment"># r w a r+ w+ a+ 具体见百度</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">python操作文件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">open 打开文件 返回文件对象</span></span><br><span class="line"><span class="string">read 文件内容读取到内存</span></span><br><span class="line"><span class="string">write 将内容写入文件</span></span><br><span class="line"><span class="string">close 关闭文件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">文件指针</span></span><br><span class="line"><span class="string">open()方法有两个参数 第二个参数制定的是打开的方式</span></span><br><span class="line"><span class="string">存在r w a r+ w+ a+这些方式 用str格式传入</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">readline 按行读取</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">小文件复制</span></span><br><span class="line"><span class="string">file_read = open("README")</span></span><br><span class="line"><span class="string">file_write = open("README[复件]","w")</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">text = file_read.read()</span></span><br><span class="line"><span class="string">file_write.write(text)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">file_read.close()</span></span><br><span class="line"><span class="string">file_write.close()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">复制大文件 用readline</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">倒入 import os</span></span><br><span class="line"><span class="string">rename 重命名</span></span><br><span class="line"><span class="string">remove 删除</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">listdir 目录列表</span></span><br><span class="line"><span class="string">mkdir 创建目录</span></span><br><span class="line"><span class="string">rmdir 删除目录</span></span><br><span class="line"><span class="string">getcwd 获取当前目录</span></span><br><span class="line"><span class="string">chdir 修改工作目录</span></span><br><span class="line"><span class="string">path.isdir 判断是否是文件</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">python2.x 默认ASCII编码</span></span><br><span class="line"><span class="string">    python2 使用 </span></span><br><span class="line"><span class="string">    # *-* coding:utf-8 *-*</span></span><br><span class="line"><span class="string">    来指定编码格式</span></span><br><span class="line"><span class="string">python3.x 默认使用UTF-8</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># eval 函数 -- 将字符串当成有效的表达式 来求值 并 返回计算结果</span></span><br></pre></td></tr></table></figure>

<h3 id="python包"><a href="#python包" class="headerlink" title="python包"></a>python包</h3><p>众所周知，pyhton之所以能够流行火爆起来，他的各种开箱即用的工具包是一个很大的原因，我这里会把我能接触到的各种工具包陆陆续续的填上来。</p>
<p><strong>pdf2pptx</strong></p>
<p>用来把pdf转换成pptx的一个工具，会把每次做成一个单独的pptx，我唯一注意到的一个问题是，低一点的python版本可能不支持（大概3.6）3.8是随便能够安装使用的。</p>
<p>使用的时候命令也很简单<code>pdf2pptx demo.pdf</code>即可，文件最后会存放在同目录中。</p>
<h3 id="Python随机随到的一些问题，那你妈逼随机就这么容易随到的啊"><a href="#Python随机随到的一些问题，那你妈逼随机就这么容易随到的啊" class="headerlink" title="Python随机随到的一些问题，那你妈逼随机就这么容易随到的啊"></a>Python随机随到的一些问题，那你妈逼随机就这么容易随到的啊</h3><h4 id="anaconda代理问题"><a href="#anaconda代理问题" class="headerlink" title="anaconda代理问题"></a>anaconda代理问题</h4><p>设置代理的方法：找到位置在path-for-install目录下<code>.condarc</code>文件,添加Http和Https的代理，这里默认本地cfw</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">proxy_servers:</span><br><span class="line">  http: http://127.0.0.1:7890</span><br><span class="line">  https: http://127.0.0.1:7890</span><br></pre></td></tr></table></figure>

<p>如果有密码的话</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">proxy_servers:</span><br><span class="line">    http: http://user:password@xxxx:8080</span><br><span class="line">    https: https://user:password@xxxx:8080</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anaconda 并不能被Clash4Windows在Tun模式下代理，虽然不知道原因(后续知道了会在这补上)，anaconda只能在配置了proxy之后才能被代理流量</span><br></pre></td></tr></table></figure>

<h4 id="python和Clash4windows的冲突问题"><a href="#python和Clash4windows的冲突问题" class="headerlink" title="python和Clash4windows的冲突问题"></a>python和Clash4windows的冲突问题</h4><p>现象: 和pip有关的几乎一切指令都会报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by &apos;ProxyError(&apos;Cannot connect to proxy.&apos;, OSError(0, &apos;Error&apos;))&apos;: /simple</span><br><span class="line">/gitpython/</span><br><span class="line">WARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by &apos;ProxyError(&apos;Cannot connect to proxy.&apos;, OSError(0, &apos;Error&apos;))&apos;: /simple</span><br><span class="line">/gitpython/</span><br></pre></td></tr></table></figure>

<p>ts：</p>
<p>遇到这种问题那肯定是直接debug走起，首先用文本搜索到抛这个错的函数，然后在嫌疑语句上都打上断，我们就能找到罪魁祸首：</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272251191.png" alt="image-20220727225126154"></p>
<p>同时发现windwos中原生的python环境并没有这个问题，于是和venv外没问题的老版pip一比较，很容易就能发现不对劲：选中的那两行在老版是不存在的</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272255356.png" alt="image-20220727225518321"></p>
<p>有了这个额外信息，我们很容易就能找到这个 <a href="https://github.com/pypa/pip/issues/9190" target="_blank" rel="noopener">Support for web proxies is broken in pip 20.3 · Issue #9190 · pypa/pip (github.com)</a> 来说明问题，2016年底，curl加入了这个把https协议前缀另加解释与定义的联盟：<a href="https://daniel.haxx.se/blog/2016/11/26/https-proxy-with-curl/" target="_blank" rel="noopener">HTTPS proxy with curl | daniel.haxx.se</a>，而urllib3显然也跟上了这个脚步：</p>
<p>因为前缀设置了 <code>tls_in_tls_required</code> 之后，urllib3会企图把这个代理服务器看作一个套了tls的http CONNECT代理。<br>但是问题是，我并没有设置 <code>https://</code> 前缀的代理服务器，这个行为是什么神奇的情况呢？<br>继续向下追，找到如何获取代理的：</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272257907.png" alt="image-20220727225732878"></p>
<p>确实，env里面没有proxy，那按照windows的习俗找找注册表也情有可原对吧？<br>这个函数的内部实现是这样：</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272258043.png" alt="image-20220727225820001"></p>
<p>看红框的行为是不是好像很眼熟？IE的代理设置似乎就是这样的？</p>
<p>不，并不是一样的，因为IE的代理设置把HTTPS（在<code>zh-MS</code>方言里叫安全）代理定义为支持 <code>CONNECT</code> 动词的HTTP代理，尽管很久以来人们都是这样用的，但是当它前面出现一个协议前缀的时候就不一样了。</p>
<p>因为clash for windows打开系统代理的代理配置看起来并没有写明了protocol：</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272304641.png" alt="image-20220727230459589"></p>
<p>所以首先，<strong>我们的py会根据IE时代的约定俗成把这样一个没有指明protocol的proxy url自动补全三种协议</strong>，<strong>然后再按照约定俗成的行为为https请求使用https_proxy</strong>，<strong>最后在一个http代理上试图开tls</strong>。</p>
<p>这个配置在IE时代行为会是正常的，在现代的库中行为也是正常的，但是对于这样一个混杂了两种行为的库，模糊不清就成了问题。<br>上面的截图并不是urllib3的，而是 属于py自己的标准库urllib的，也算是urllib3开发人员的思想和urllib的历史遗留实现冲突了吧。</p>
<p>似乎此问题在新版Python中的报错信息会变成 <code>There was a problem confirming the ssl certificate: HTTPSConnection Pool(host=&#39;pypi.org&#39;, port=443): Max retries exceeded with url: /simple/plotly/ (Caused by SSLError(SSLEOFError(8, &#39;EOF  occurred in violation of protocol (_ssl.c:1123)&#39;)))</code> 或者类似的错误。</p>
<p>在后续的版本更新中，CFW解决了Specify Protocol解决了部分此问题，但是解决的并不是很好，启用Specify Protocol会导致只设置http代理，https无代理。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272315756.png" alt="image-20220727231553719"></p>
<p>可以看到如果只是单纯地把注册表项的内容由 <code>127.0.0.1:7890</code>改为<code>http://127.0.0.1:7890</code>的话，urllib只会返回一个只有一个key也就是<code>http</code>的代理dict。<br>这时候从pip的请求调用链往上找，可以看到负责决定使用这个dict中那个代理的代码是 <code>requests/utils.py</code>的<code>select_proxy</code>函数：</p>
<p>因为红框中的部分的限制，当你请求<code>https://pypi.org</code>的时候，只有key为<code>https</code>/<code>https://pypi.org</code>/<code>all</code>/<code>all://pypi.org</code>的代理会被使用，上面那个<code>http</code>的代理自然也就不会被使用。<br>BTW，因为这个代码是requests库的，这也就意味着在Windows平台上Clash for Windows的系统代理不会影响到大部分py应用的http请求。<br>而正确的做法是什么呢？让我们在IE中设置上代理，然后看一看它给出的行为：</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272318518.png" alt="image-20220727231825488"></p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202207272318059.png" alt="image-20220727231841031"></p>
<p>同时，因为urllib中还存在代理的类型推测代码，所以正确的设置应该是：<br><code>http=http://127.0.0.1:7890;https=http://127.0.0.1:7891</code></p>
<h4 id="python和解释性语言"><a href="#python和解释性语言" class="headerlink" title="python和解释性语言"></a>python和解释性语言</h4><p><a href="https://blog.csdn.net/balabalamerobert/article/details/1649490" target="_blank" rel="noopener">https://blog.csdn.net/balabalamerobert/article/details/1649490</a></p>
<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><h3 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h3><p>诞生时间：javascript 诞生于 1995年</p>
<p>诞生目的：处理服务器端语言负责的一些输入验证操作</p>
<p>javascript组成部分：ECMAScript（核心） DOM (文档对象模型) BOM（浏览器对象模型）</p>
<h4 id="简介-amp-基本概念"><a href="#简介-amp-基本概念" class="headerlink" title="简介 &amp; 基本概念"></a>简介 &amp; 基本概念</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;元素</span><br><span class="line">属性(参数)：</span><br><span class="line">async：可选。表示应该立即下载脚本，但不妨碍页面中的其他操作。只对外部文件有效</span><br><span class="line">charset：可选。通过src属性指定代码的字符集。大部分浏览器都会忽略他的值，很少有人用</span><br><span class="line">defer:可选。表示脚本可以延迟到文档完全被解析和显示之后再执行。只对外部脚本有效</span><br><span class="line">language:已废弃。原来用于表示编写代码的脚本语言</span><br><span class="line">src:可选。表示包含要执行的外部文件</span><br><span class="line">type:可选。可以看成是language的替代属性 虽然text/javascript 和 text/ecmascript都不</span><br><span class="line">推荐使用，但大部分开发者依然使用。默认值为text/javascript</span><br><span class="line"></span><br><span class="line">注意事项</span><br><span class="line">在使用&lt;script&gt;嵌入javascript代码时，不要在代码中任何地方出现&lt;/script&gt;字符串</span><br><span class="line">如果要使用要通过转义字符&quot;/&quot; 可以解决</span><br><span class="line"></span><br><span class="line">&lt;noscript&gt;元素</span><br><span class="line">触发条件</span><br><span class="line">浏览器不支持脚本</span><br><span class="line">浏览器支持脚本，但脚本被禁用</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">语法</span><br><span class="line">ECMAScript的语法大量借鉴了C及其他类C语言的语法</span><br><span class="line"></span><br><span class="line">严格区分大小写</span><br><span class="line">标识符</span><br><span class="line">第一个字符必须是一个字母、下划线或一个美元符号</span><br><span class="line">其他字符可以是字母、下划线、美元符号或数字</span><br><span class="line"></span><br><span class="line">数据类型</span><br><span class="line">undefined 只有一个值就是undefined。在使用变量但未对其加以初始化时，</span><br><span class="line">这个变量的值就是undefined</span><br><span class="line"></span><br><span class="line">null 从逻辑角度来看，null值表示一个空对象指针，这也是typeof操作符</span><br><span class="line">检测null时会返回Object的原因，如果定义的变量将用于保存对象，那么最好</span><br><span class="line">将该变量初始化为null而不是其他值</span><br><span class="line"></span><br><span class="line">boolean</span><br><span class="line">number</span><br><span class="line">string</span><br><span class="line">object</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// typeof 操作符</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>]</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a: <span class="string">'bbb'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">undefined</span>) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">null</span>) <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">true</span>) <span class="comment">// boolean</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="number">0</span>) <span class="comment">// number</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="string">'aaa'</span>) <span class="comment">// string</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> arr) <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> obj) <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> func) <span class="comment">// function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'____________________________'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 很明显typeof不能判断 null array object</span></span><br><span class="line"><span class="comment">* 常用判断方法 使用下面的判断方法可以详细的判断种类</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">type</span>(<span class="params">any</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(any).slice(<span class="number">8</span>, <span class="number">-1</span>).toLocaleLowerCase()</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(type(<span class="literal">undefined</span>)) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(type(<span class="literal">null</span>)) <span class="comment">// null</span></span><br><span class="line"><span class="built_in">console</span>.log(type(<span class="literal">true</span>)) <span class="comment">// boolean</span></span><br><span class="line"><span class="built_in">console</span>.log(type(<span class="number">0</span>)) <span class="comment">// number</span></span><br><span class="line"><span class="built_in">console</span>.log(type(<span class="string">'aaa'</span>)) <span class="comment">// string</span></span><br><span class="line"><span class="built_in">console</span>.log(type(arr)) <span class="comment">// array</span></span><br><span class="line"><span class="built_in">console</span>.log(type(obj)) <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(type(func)) <span class="comment">// function</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* object的通用属性和方法</span><br><span class="line">* construct:保存着用于创建当前对象的函数</span><br><span class="line">* hasOwnProperty(propertyName):用于检查给定属性在当前对象实例中（而不是</span><br><span class="line">* 在实例的原型中）是否存在。其中作为参数的属性名（propertyName）必须以字</span><br><span class="line">* 符串形式指定</span><br><span class="line">* isPrototypeOf(object):用于检查传入的对象是否是传入对象的原型</span><br><span class="line">* propertyIsEnumerable(propertyName):用于检查给定的属性是否能够使用for-in</span><br><span class="line">* 语句来枚举</span><br><span class="line">* toLocaleString(): 返回对象字符串表示，改字符串与执行环境的地区对应</span><br><span class="line">* toString() 返回对象字符串表示</span><br><span class="line">* valueOf():返回对象字符串、数值或布尔表示。通常与toString()方法的返回值相同</span><br><span class="line">* */</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本类型和引用类型的值</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 基本类型值：简单的数据段（undefined null Boolean number String）</span></span><br><span class="line"><span class="comment">* 引用类型值：由多个值构成的对象（object array function）</span></span><br><span class="line"><span class="comment">* 引用类型的值是保存在内存中的对象。与其他语言不同，javascript不容许</span></span><br><span class="line"><span class="comment">* 直接访问内存中的位置，也就是说不能直接操作对象的内存空间。在操作对象</span></span><br><span class="line"><span class="comment">* 时，实际上是在操作对象的引用而不是实际的对象。为此，引用类型的值是</span></span><br><span class="line"><span class="comment">* 按引用访问的。</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 复制变量的值</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 复制基本类型的值是相互独立的互不影响</span></span><br><span class="line"><span class="comment">* 复制引用类型的值实际上是复制一个指针，复制结束后，实际上是引用的</span></span><br><span class="line"><span class="comment">* 同一个对象。因此改变其中一个变量就会影响另一个变量</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 传递参数</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 所有函数的参数都是按值传递的。也就是说，把函数外部的值复制给函数</span></span><br><span class="line"><span class="comment">* 内部的参数，就和把值从一个变量复制到另一个变量一样。基本类型值的</span></span><br><span class="line"><span class="comment">* 传递如同基本类型变量的复制一样，而引用类型也是一样</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 基本类型的值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTen</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    num += <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">return</span> num</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">var</span> result = addTen(count);</span><br><span class="line"><span class="comment">// 没有改变外部的count</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(count, result)<span class="comment">//20 30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引用类型的值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    obj.name = <span class="string">'testName'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;&#125;</span><br><span class="line">setName(person)</span><br><span class="line"><span class="built_in">console</span>.log(person.name) <span class="comment">// testName</span></span><br><span class="line"><span class="comment">// 修改了外部的person</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 证明为按值传递 整个过程有点子复杂，和我以前使用的java完全不同，person2传入函数setName2之后，obj和person2同时指向同一个堆内存位置--&gt;person2的位置，首先修改了name属性，重新指定obj之后，obj和person2指向的位置不再相同，这个时候修改obj并不会修改person2的属性，所以最终属性定格在了testName，这里面有个思维误区就是obj等于person2，并不相等。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName2</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    obj.name = <span class="string">'testName'</span></span><br><span class="line">    obj = &#123;&#125;</span><br><span class="line">    obj.name = <span class="string">'changeName'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person2 = &#123;&#125;</span><br><span class="line">setName2(person2)</span><br><span class="line"><span class="built_in">console</span>.log(person2.name) <span class="comment">// testName</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检测类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*基本类型 typeof （undefined string boolean）</span></span><br><span class="line"><span class="comment">*引用类型 可以根据原型链或调用对象的toString()方法来判断</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">"Nicholas"</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> i = <span class="number">22</span>;</span><br><span class="line"><span class="keyword">var</span> u;</span><br><span class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>]</span><br><span class="line"><span class="keyword">var</span> n = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// typeof</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> s); <span class="comment">//string</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> i); <span class="comment">//number</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b); <span class="comment">//boolean</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> u); <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> n); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> o); <span class="comment">//object</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// instanceof</span></span><br><span class="line"><span class="built_in">console</span>.log(a <span class="keyword">instanceof</span> <span class="built_in">Array</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(a <span class="keyword">instanceof</span> <span class="built_in">Object</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="变量-amp-作用-amp-内存问题"><a href="#变量-amp-作用-amp-内存问题" class="headerlink" title="变量 &amp; 作用 &amp; 内存问题"></a>变量 &amp; 作用 &amp; 内存问题</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 执行环境及作用域</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 执行环境（execution context，简称环境）</span></span><br><span class="line"><span class="comment">* 执行环境定义了变量或函数有权访问的其他数据，决定了他们</span></span><br><span class="line"><span class="comment">* 各自的行为。每个执行环境都有一个与之关联的变量对象，环</span></span><br><span class="line"><span class="comment">* 境中定义的所有变量和函数都保存在这个对象中。但我们不能</span></span><br><span class="line"><span class="comment">* 访问它，解析器会在后台调用它</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 延长作用域链</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*  虽然执行环境的类型只有两种-全局和局部，但还是有其他方法来延长作用域链。</span></span><br><span class="line"><span class="comment">*  这么说是因为有些语句可以在作用域链的前端临时增加一个变量对象，该变量对</span></span><br><span class="line"><span class="comment">*  象会在代码执行后移除。有两种情况下会发生这种现象。</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* try-catch 语句的catch块</span></span><br><span class="line"><span class="comment">* width语句</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 这两个语句都会在作用域链的前端添加一个变量对象。对width语句来说，会将指定</span></span><br><span class="line"><span class="comment">* 的对象添加到作用域链中。对catch语句来说，会创建一个新的变量对象，其中包含</span></span><br><span class="line"><span class="comment">* 的是被抛出的错误对象的声明</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有块级作用域（es6后不是这样了）</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* javascript 没有块级作用域经常会导致理解上的困惑。在其他类C的语言中，由花括</span></span><br><span class="line"><span class="comment">* 号封闭的代码块都有自己的作用域，因而支持根据条件来定义变量</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> color = <span class="string">'blue'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(color) <span class="comment">// blue</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 很明显花括号没有自己的作用域</span></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> color2 = <span class="string">'blue'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//console.log(color2) // Error color2 is not define</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'for var'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i) <span class="comment">//for 也没有自己的作用域</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; i &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'for let'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//console.log(j) // Error j is not define</span></span><br><span class="line"><span class="comment">// 用let定义的变量在花括号内有自己的作用域,而var的没有</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明变量</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 用var声明的变量会自动被添加到最近的环境中。在函数内部，最近的</span></span><br><span class="line"><span class="comment">* 环境就是函数的局部环境，如果初始化变量没有使用var声明，该变量</span></span><br><span class="line"><span class="comment">* 会自动被添加到全局环境</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 在编写javaScript代码的过程中，不申明而直接初始化变量是一个常见</span></span><br><span class="line"><span class="comment">* 的错误做法，因为这样可能会导致意外。在严格模式下未经声明的变量</span></span><br><span class="line"><span class="comment">* 会导致错误</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查询标识符</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 在某个环境中为了读取或写入而引用一个标识符时，必须通过搜索来确定该</span></span><br><span class="line"><span class="comment">* 标识符实际代表什么。搜索过程从作用域链的前端开始，向上逐级查询与给</span></span><br><span class="line"><span class="comment">* 定名字匹配的标识符。如果在局部环境中找到了该标识符，搜索过程停止，</span></span><br><span class="line"><span class="comment">* 变量就绪。如果在局部标识符中没有找到该变量名，则继续沿作用域链向上</span></span><br><span class="line"><span class="comment">* 搜索。搜索过程将一直追溯到全局环境的变量对象。如果在全局变量环境中</span></span><br><span class="line"><span class="comment">* 也没有找到这个标识符，则意味着该变量尚未声明。</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> color3 = <span class="string">'blue'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getColor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> color3</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getColor()) <span class="comment">//blue</span></span><br><span class="line"><span class="comment">// 局部环境中没有color3 的标识符，则在他的上级环境中寻找（也就是全局环境）</span></span><br><span class="line"><span class="comment">// 返回了全局环境中的color3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> color4 = <span class="string">'blue'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getColor2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> color4 = <span class="string">'red'</span></span><br><span class="line">    <span class="keyword">return</span> color4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getColor2()) <span class="comment">// red</span></span><br><span class="line"><span class="comment">// 直接返回了局部环境的color4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*  注意 变量查询也不是没有代价的。很明显，访问局部变量要比访问全局更快，因为</span></span><br><span class="line"><span class="comment">*  不用向上搜索作用域链。</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 垃圾收集</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*  标记清除（最常用） （标记变量的不同状态，去除无用变量）</span></span><br><span class="line"><span class="comment">*  引用计数（计算变量引用次数，引用次数为0，清除该变量）</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理内存</span></span><br><span class="line"><span class="comment">// 由于安全考虑浏览器可分配内存比桌面应用内存要少，为了性能，执行环境只保存</span></span><br><span class="line"><span class="comment">// 必要数据。一旦数据不在用就将值设为null(一般用于全局环境)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// object 类型</span></span><br><span class="line"><span class="comment">// 第一种创建方式</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">person.name = <span class="string">'tom'</span></span><br><span class="line">person.age = <span class="number">29</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种</span></span><br><span class="line"><span class="keyword">var</span> person2 = &#123;</span><br><span class="line">    name: <span class="string">'tom'</span>,</span><br><span class="line">    age: <span class="number">29</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取</span></span><br><span class="line"><span class="built_in">console</span>.log(person2[<span class="string">'name'</span>])</span><br><span class="line"><span class="built_in">console</span>.log(person2.name)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Array</span></span><br><span class="line"><span class="comment">// 创建</span></span><br><span class="line"><span class="keyword">var</span> color = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">var</span> color2 = [<span class="string">'red'</span>, <span class="string">'blue'</span>, <span class="string">'green'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检测数组 instanceof isArray()</span></span><br><span class="line"><span class="built_in">console</span>.log(color <span class="keyword">instanceof</span> <span class="built_in">Array</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.isArray(color)) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 转换方法</span></span><br><span class="line"><span class="built_in">console</span>.log(color2.toString()) <span class="comment">// red,blue,green</span></span><br><span class="line"><span class="built_in">console</span>.log(color2.toLocaleString()) <span class="comment">// red,blue,green</span></span><br><span class="line"><span class="built_in">console</span>.log(color2.valueOf()) <span class="comment">//['red','blue','green']</span></span><br><span class="line"><span class="built_in">console</span>.log(color2) <span class="comment">//['red','blue','green']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// toString 和 toLocaleString</span></span><br><span class="line"><span class="keyword">var</span> person3 = &#123;</span><br><span class="line">    toLocaleString: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'toLocaleString3'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    toString: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'toString3'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person4 = &#123;</span><br><span class="line">    toLocaleString: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'toLocaleString4'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    toString: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'toString4'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person5 = [person3, person4]</span><br><span class="line"><span class="built_in">console</span>.log(person5)</span><br><span class="line"><span class="built_in">console</span>.log(person5.toString()) <span class="comment">//toString3,toString4</span></span><br><span class="line"><span class="built_in">console</span>.log(person5.toLocaleString()) <span class="comment">//toLocaleString3,toLocaleString4</span></span><br><span class="line"><span class="comment">// 分别调用了数组元素的toString 和toLocaleString</span></span><br></pre></td></tr></table></figure>

<p>toString和toLocalString还有另外一个valueOf的区别有点细，详细参考这个<a href="https://www.cnblogs.com/zhangyinhua/p/9480867.html#:~:text=toString()%EF%BC%9A%E6%8A%8ADate%20%E5%AF%B9%E8%B1%A1,%E6%A0%B9%E6%8D%AE%E6%9C%AC%E5%9C%B0%E8%A7%84%E5%88%99%E6%A0%BC%E5%BC%8F%E5%8C%96%E3%80%82" target="_blank" rel="noopener">网页</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 栈方法（push() 和 pop()）</span></span><br><span class="line"><span class="keyword">var</span> colors = []</span><br><span class="line"><span class="keyword">var</span> count = colors.push(<span class="string">'red'</span>, <span class="string">'green'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(count) <span class="comment">// 2</span></span><br><span class="line">count = colors.push(<span class="string">'black'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> item = colors.pop()</span><br><span class="line"><span class="built_in">console</span>.log(item) <span class="comment">// black</span></span><br><span class="line"><span class="built_in">console</span>.log(colors.length) <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 队列方法（push() shift()） shift() 方法用于把数组的第一个元素从其中删除，并返回第一个元素的值。 注意： 此方法改变数组的长度！ 提示: 移除数组末尾的元素可以使用pop() 方法。</span></span><br><span class="line"><span class="keyword">var</span> colors2 = []</span><br><span class="line"><span class="keyword">var</span> count2 = colors2.push(<span class="string">'red'</span>, <span class="string">'green'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(count2) <span class="comment">//2</span></span><br><span class="line"></span><br><span class="line">count2 = colors2.push(<span class="string">'black'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(count2) <span class="comment">//3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> item2 = colors.shift()</span><br><span class="line"><span class="built_in">console</span>.log(item2) <span class="comment">//red</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重排序方法</span></span><br><span class="line"><span class="keyword">var</span> values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="built_in">console</span>.log(values.reverse()) <span class="comment">// [ 5, 4, 3, 2, 1 ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> values2 = [<span class="number">2</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line"><span class="built_in">console</span>.log(values2.sort(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x - y</span><br><span class="line">&#125;)) <span class="comment">// [ 1, 2, 3, 4, 5, 6 ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// splice (删除 插入 替换)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 位置方法（indexOf()和lastIndexOf()）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//迭代方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* every(): 对数组中的每一项运行给定函数，如果该函数每一项都返回true，则返回true</span></span><br><span class="line"><span class="comment">* filter(): 对数组中的每一项运行给定函数，返回该函数会返回true的项组成的数组</span></span><br><span class="line"><span class="comment">* forEach():对数组中的每一项运行给定函数，这个方法没有返回值</span></span><br><span class="line"><span class="comment">* map():对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组</span></span><br><span class="line"><span class="comment">* some():对数组中的每一项运行给定函数，如果该函数对任一项返回true，则返回true</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 归并方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* reduce()</span></span><br><span class="line"><span class="comment">* reduceRight()</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">var</span> values3 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">var</span> sum = values3.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">prev, cur</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> prev + cur</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(sum) <span class="comment">//10</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Date 类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Date 比较大小</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Data 的 toString() 和 valueOf() 不同浏览器返回不同</span></span><br><span class="line"><span class="comment">* Data类型的valueOf()方法不返回字符串，而是返回日期的毫秒表示，</span></span><br><span class="line"><span class="comment">* 因此，可以方便比较日期值</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> date1 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2018</span>, <span class="number">6</span>, <span class="number">9</span>)</span><br><span class="line"><span class="keyword">var</span> date2 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2018</span>, <span class="number">6</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(date1 &gt; date2) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(date1 &lt; date2) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 这为比较日期提供了极大的方便</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期格式化方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* toDateString() 以特定于实现的格式显示星期几、月、日和年</span></span><br><span class="line"><span class="comment">* toTimeString()                    ...时、分、秒和时区</span></span><br><span class="line"><span class="comment">* toLocaleDateString() 以特定于地区的格式显示星期几、月、日和年</span></span><br><span class="line"><span class="comment">* toLocaleTimeString() 以特定于实现的格式显示时、分、秒</span></span><br><span class="line"><span class="comment">* toUTSString() 以特定实现的格式显示时、分、秒</span></span><br><span class="line"><span class="comment">* toLocaleString()和toString()方法一样不同浏览器显示不同不能使用</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期、时间组件方法</span></span><br><span class="line"><span class="comment">// &#123;Year Month（0-11） Date（1-31） Day(星期) Hours（0-23） Minutes（0-59） Seconds Milliseconds&#125;</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* getTime() 返回日期的毫秒数；与valueOf()方法返回的值相同</span></span><br><span class="line"><span class="comment">* setTime(毫秒) 以毫秒设置日期，会改变整个日期</span></span><br><span class="line"><span class="comment">* getFullYear() 取得4位数的年份（2018而非仅07）</span></span><br><span class="line"><span class="comment">* getUTCFullYear</span></span><br><span class="line"><span class="comment">* ... 其他类似</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// RegExp</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 表达式 var expression = / pattern /flags(pattern 模式 正则表达式 flag 标志)</span></span><br><span class="line"><span class="comment">// g：global 全局模式 应用于所有字符串，而非匹配的第一项就停止</span></span><br><span class="line"><span class="comment">// i:表示不区分大小写</span></span><br><span class="line"><span class="comment">// m:表示多行模式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// RegExp 实例属性</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* global： 布尔值，表示是否设置了g标志</span></span><br><span class="line"><span class="comment">* ignoreCase: 布尔值，表示是否设置了i标志</span></span><br><span class="line"><span class="comment">* lastIndex:整数，表示开始搜索下一个匹配项的字符位置，从0算起</span></span><br><span class="line"><span class="comment">* multiline：布尔值，表示是否设置了m标志</span></span><br><span class="line"><span class="comment">* source：正则表达式的字符串表示</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//RegExp 实例方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* exec() 返回第一个匹配项的数组</span></span><br><span class="line"><span class="comment">* text() 返回布尔值</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Function 类型</span></span><br><span class="line"><span class="comment">// 创建</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*  function sum (num1,num2)&#123; return num1 + num2 &#125; （函数声明式）</span></span><br><span class="line"><span class="comment">*  var sum = function (num1,num2)&#123;return num1 + num2&#125; （函数表达式）</span></span><br><span class="line"><span class="comment">*  var sum = new Function("num1","num2","return num1 + num2")(不推荐)</span></span><br><span class="line"><span class="comment">*  函数是对象，函数名是指针</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum2</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sum2(<span class="number">10</span>, <span class="number">10</span>)) <span class="comment">//20</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> autoHerSum = sum2</span><br><span class="line"><span class="built_in">console</span>.log(autoHerSum(<span class="number">10</span>, <span class="number">10</span>)) <span class="comment">//20</span></span><br><span class="line"></span><br><span class="line">sum2 = <span class="literal">null</span></span><br><span class="line"><span class="built_in">console</span>.log(autoHerSum(<span class="number">10</span>, <span class="number">10</span>)) <span class="comment">// 20</span></span><br><span class="line"><span class="comment">// 函数名是指针</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 也可以同时使用函数声明和函数表达式 var sum = function sum() &#123;&#125;</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为值的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callSomeFunction</span>(<span class="params">someFunction, someArgument</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> someFunction(someArgument)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add10</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num + <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = callSomeFunction(add10, <span class="number">10</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result) <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getGreeting</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello,"</span> + name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result2 = callSomeFunction(getGreeting, <span class="string">'Nicholas'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result2) <span class="comment">// Hello,Nicholas</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 从一个函数内返回另一个函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createComparisonFunction</span>(<span class="params">propertyName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">object1, object2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value1 = object1[propertyName]</span><br><span class="line">        <span class="keyword">var</span> value2 = object2[propertyName]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (value1 &lt; value2) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value1 &gt; value2) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CreateObject</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里相当于重写了toString方法</span></span><br><span class="line">CreateObject.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&#123;name:<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>,age:<span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>&#125;`</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> object1 = <span class="keyword">new</span> CreateObject(<span class="string">'Zachary'</span>, <span class="number">28</span>)</span><br><span class="line"><span class="keyword">var</span> object2 = <span class="keyword">new</span> CreateObject(<span class="string">'Nicholas'</span>, <span class="number">29</span>)</span><br><span class="line"><span class="keyword">var</span> data = [object1, object2]</span><br><span class="line"><span class="comment">// 这里引用到了上面的createComparisonFunction，其实很像是把函数式编程分开写了，仅此而已</span></span><br><span class="line">data.sort(createComparisonFunction(<span class="string">'name'</span>))</span><br><span class="line"><span class="built_in">console</span>.log(data.toString())</span><br><span class="line">data.sort(createComparisonFunction(<span class="string">'age'</span>))</span><br><span class="line"><span class="built_in">console</span>.log(data.toString())</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数内部属性</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 函数内部，有两个特殊的对象：arguments 和 this。</span></span><br><span class="line"><span class="comment">* arguments(类数组对象)：保存函数参数</span></span><br><span class="line"><span class="comment">* 该对象还有一个名叫callee的属性，改属性是一个指针，指向拥有这个arguments</span></span><br><span class="line"><span class="comment">* 对象的函数</span></span><br><span class="line"><span class="comment">* this:函数执行的环境对象</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// arguments.callee</span></span><br><span class="line"><span class="comment">// 经典的阶乘函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num * factorial(num - <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(factorial(<span class="number">10</span>)) <span class="comment">// 3628800</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这样写有点不好 就是函数名和函数体耦合在了一起</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial2</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num * <span class="built_in">arguments</span>.callee(num - <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(factorial2(<span class="number">10</span>))</span><br><span class="line"><span class="comment">// 将函数名解耦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// this</span></span><br><span class="line"><span class="keyword">var</span> color5 = <span class="string">'red'</span></span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    color5: <span class="string">'blue'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayColor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.color5)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sayColor() <span class="comment">// red</span></span><br><span class="line">o.sayColor = sayColor</span><br><span class="line">o.sayColor() <span class="comment">// blue</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 注意：函数名仅仅是一个包含指针的变量而已。因此，即使是在不同的</span></span><br><span class="line"><span class="comment">* 环境中执行，全局的sayColor与o.sayColor指向的仍然是同一个函数</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数属性和方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* length:表示函数希望接收的命名参数的个数</span></span><br><span class="line"><span class="comment">* prototype</span></span><br><span class="line"><span class="comment">* prototype上的属性是不可被枚举的（for-in-无法发现）</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// call 与 apply</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum4</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// apply</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callSum1</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sum4.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>) <span class="comment">// arguments（类数组）</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callSum2</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sum4.apply(<span class="keyword">this</span>, [num1, num2]) <span class="comment">// 数组</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(callSum1(<span class="number">10</span>, <span class="number">10</span>)) <span class="comment">// 20</span></span><br><span class="line"><span class="built_in">console</span>.log(callSum2(<span class="number">10</span>, <span class="number">10</span>)) <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// call</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callSum3</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sum4.call(<span class="keyword">this</span>, num1, num2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(callSum3(<span class="number">10</span>, <span class="number">10</span>)) <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// call 和 apply作用一样，只是参数的形式不一样</span></span><br></pre></td></tr></table></figure>

<h5 id="js的连续赋值"><a href="#js的连续赋值" class="headerlink" title="js的连续赋值"></a>js的连续赋值</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">n</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line">a.x = a = &#123;<span class="attr">n</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a.x); <span class="comment">//undefined </span></span><br><span class="line"><span class="built_in">console</span>.log(b.x) <span class="comment">//Object &#123;n: 2&#125;</span></span><br></pre></td></tr></table></figure>

<p>首先是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var a = &#123;n:1&#125;; </span><br><span class="line">var b = a;</span><br></pre></td></tr></table></figure>

<p>在这里a指向了一个对象{n:1}（我们姑且称它为对象A），</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160538009.png" alt="image-20220816053812942"></p>
<p>b指向了a所指向的对象，也就是说，在这时候a和b都是指向对象A的,</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160538657.png" alt="image-20220816053832601"></p>
<p>接着继续看下一行非常重要的代码：<code>a.x = a = {n: 2}</code>，这句话也是关键所在，根据js引擎语法解析，会先去<strong>从左到右寻找有没有未声明的变量</strong>，如果有就把该变量提升至作用域顶部并声明该变量。那么恭喜js引擎他找到a.x这个属性没有声明，那么他会在{n: 1}这个内存区声明一个x属性等待赋值！</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160539058.png" alt="image-20220816053909000"></p>
<p>接着按照从左到右的寻找变量顺序运行，<code>a = {n: 2};</code>，运行以后a的指向变成了一个新地址。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160539164.png" alt="image-20220816053942097"></p>
<p>ok，接下来是最关键的一步，解析变量/变量名是从左往右的，但是运行的时候实际顺序是从右往左的，这个时候原先的a.x已经改变了表达方式，如图上的红圈，这个部分是a.x，而不是这个栈内存中的a指针所指向的地方，js里面很多东西讲的都是值本身，而非指针，所以最后的结果也并不难以理解了。</p>
<h4 id="引用类型"><a href="#引用类型" class="headerlink" title="引用类型"></a>引用类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本的包装类型，特殊的引用类型（Boolean、Number、String）</span></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="string">'some text'</span>;</span><br><span class="line"><span class="keyword">var</span> s2 = s1.substring(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(s1, s2) <span class="comment">// some text me text</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 想象成</span></span><br><span class="line"><span class="keyword">var</span> s3 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'some text'</span>)</span><br><span class="line"><span class="keyword">var</span> s4 = s1.substring(<span class="number">2</span>)</span><br><span class="line">s3 = <span class="literal">null</span></span><br><span class="line"><span class="built_in">console</span>.log(s3, s4) <span class="comment">// null 'me text' </span></span><br><span class="line"><span class="comment">// 引用类型和基本包装类型的主要区别就是对象的生存期。使用new操作符创建</span></span><br><span class="line"><span class="comment">// 的引用类型的实例，在执行流离开当前作用域之前一直都保存在内存中。而自</span></span><br><span class="line"><span class="comment">// 动创建的基本包装类型的对象，则只存在于一行代码的执行瞬间，然后立即销</span></span><br><span class="line"><span class="comment">// 毁。这意味着我们不能在运行时为基本类型值添加属性和方法 eg</span></span><br><span class="line"><span class="keyword">var</span> s5 = <span class="string">'some text'</span>;</span><br><span class="line">s5.color = <span class="string">'red'</span></span><br><span class="line"><span class="built_in">console</span>.log(s5.color) <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Object 构造函数也会像工厂方法一样，根据传入值的类型放回相应基本包装实例</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="string">'some text'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(obj <span class="keyword">instanceof</span> <span class="built_in">String</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Boolean 类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Boolean 类型与布尔值对应的引用类型。要创建Boolean对象，就可以像下面这样</span></span><br><span class="line"><span class="comment">* 调用Boolean构造函数并传入true或false</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> BooleanObject = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">var</span> falseObject = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="built_in">console</span>.log(falseObject)<span class="comment">//boolean对象 Boolean &#123;false&#125; 打印出来是[Boolean: false]</span></span><br><span class="line"><span class="keyword">var</span> result = falseObject &amp;&amp; <span class="literal">true</span> <span class="comment">// 对象会转换为true</span></span><br><span class="line"><span class="built_in">console</span>.log(result) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> falseValue = <span class="literal">false</span></span><br><span class="line">result = falseValue &amp;&amp; <span class="literal">true</span></span><br><span class="line"><span class="built_in">console</span>.log(result) <span class="comment">// false</span></span><br><span class="line"><span class="comment">// Boolean对象容易造成误解</span></span><br><span class="line"><span class="comment">// 理解基本类型的布尔值和Boolean对象的区别非常重要，建议永远不要使用Boolean对象</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Number类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Number是与数字值对应的引用类型。要创建Number对象，可以在调用Number构造函数时向</span></span><br><span class="line"><span class="comment">* 中传递对应的数值</span></span><br><span class="line"><span class="comment">* 与Boolean类型一样，Number类型也重写了valueOf()、toLocaleString()和toString()</span></span><br><span class="line"><span class="comment">* 重写后的valueOf()方法返回对象表示基本类型的数值，另外两个方法返回字符串形式的</span></span><br><span class="line"><span class="comment">* 数值</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// Number 的方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* toFixed() 指定的小数返回数值的字符串表示</span></span><br><span class="line"><span class="comment">* toExponent() 返回指数表示法（e表示法）</span></span><br><span class="line"><span class="comment">* toPrecision() 参数表示数值的所有数字的位数（不包括指数部分）</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// String类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* String类型是字符串对象的包装类型</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 字符串方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* charAt() 以单字符字符串的形式放回给定位置的那个字符 可以用str[1]</span></span><br><span class="line"><span class="comment">* 代替</span></span><br><span class="line"><span class="comment">* charCodeAt() 以单字符字符串的形式放回给定位置的那个字符的字符编码</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串操作方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* concat 拼接字符串可用+代替</span></span><br><span class="line"><span class="comment">* slice()</span></span><br><span class="line"><span class="comment">* substr()</span></span><br><span class="line"><span class="comment">* substring()</span></span><br><span class="line"><span class="comment">* 效果类似参数不同</span></span><br><span class="line"><span class="comment">* slice substring 第一第二各参数分别表示起始和结束位置</span></span><br><span class="line"><span class="comment">* substr 第二各参数表示返回的字符个数</span></span><br><span class="line"><span class="comment">* slice substr substring 都不会改变原字符串</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 字符串位置方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* indexOf(从开头向结尾搜索放回-1或字符位置)</span></span><br><span class="line"><span class="comment">* lastIndexOf（从结尾向开头搜索返回-1或字符位置）</span></span><br><span class="line"><span class="comment">* 第二各参数可以表示从哪个位置搜索</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// trim() 创建字符串副本，删除前后所有空格</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 大小写转换</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* toLowerCase() 转小写</span></span><br><span class="line"><span class="comment">* toLocaleLowerCase() 根据本地语言转小写</span></span><br><span class="line"><span class="comment">* toUpperCase() 转大写</span></span><br><span class="line"><span class="comment">* toLocaleUpperCase() 根据本地语言转大写</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串的模式匹配方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* match() 返回数组 与调用RegExp对象的exec()方法并传递本例中的字符串</span></span><br><span class="line"><span class="comment">* 作为参数的到的结果一样</span></span><br><span class="line"><span class="comment">* search() 返回字符串中的第一个匹配项的索引；如果没有找到匹配项则返回</span></span><br><span class="line"><span class="comment">* -1否则返回位置，search方法始终是从字符串的开头向后查找</span></span><br><span class="line"><span class="comment">* replace() 替换 根据正则表达式替换字符串，如果要全局替换要在正则表达式</span></span><br><span class="line"><span class="comment">* 中加入g标志</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* . 在[.]中匹配.字符即\.在此之外匹配所有元素</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 特殊字符序列</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* $$  $</span></span><br><span class="line"><span class="comment">* $&amp;  匹配整个模式的子字符串。与RegExp.lastMatch的值相同</span></span><br><span class="line"><span class="comment">* $'  匹配的子字符串之前的子字符串。与RegExp.leftContext的值相同</span></span><br><span class="line"><span class="comment">* $`  匹配的子字符串之后的子字符串。RegExp.rightContext的值相同</span></span><br><span class="line"><span class="comment">* $n  匹配第n个捕获的子字符串，其中n等于0-9。如果正则表达式中没有</span></span><br><span class="line"><span class="comment">* 定义捕获组，则使用空字符串</span></span><br><span class="line"><span class="comment">* $nn 匹配第nn个捕获的子字符串，其中n等于01-99。</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> text = <span class="string">'cat,bat,sat,fat'</span></span><br><span class="line">result = text.replace(<span class="regexp">/(.at)/g</span>, <span class="string">'word($`)'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br><span class="line"></span><br><span class="line"><span class="comment">// replace 可以通过第二各参数进行更精细的操作</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">htmlEscape</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> text.replace(<span class="regexp">/[&lt;&gt;"&amp;]/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params">match, pos, originalText</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (match) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"&lt;"</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"&amp;lt"</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">"&gt;"</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"&amp;gt"</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">"&amp;"</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"&amp;amp"</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">"\""</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"&amp;quot"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(htmlEscape(<span class="string">'&lt;p class="greeting"&gt;hello world!&lt;/p&gt;'</span>))</span><br><span class="line"><span class="comment">// &amp;ltp class=&amp;quotgreeting&amp;quot&amp;gthello world!&amp;lt/p&amp;gt</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// split() 基于指定分隔符将一个字符串分割成多个子字符串，并将结果</span></span><br><span class="line"><span class="comment">// 放到一个数组中 ，可接受第二个参数指定数组的大小</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> colorText = <span class="string">"red,blue,green,yellow"</span></span><br><span class="line"><span class="built_in">console</span>.log(colorText.split(<span class="string">','</span>)) <span class="comment">// ["red","blue","green","yellow"]</span></span><br><span class="line"><span class="built_in">console</span>.log(colorText.split(<span class="string">','</span>, <span class="number">2</span>)) <span class="comment">// ["red","blue"]</span></span><br><span class="line"><span class="built_in">console</span>.log(colorText.split(<span class="regexp">/[^\,]+/</span>)) <span class="comment">// ["", ",", ",", ",", ""]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// localeCompare() 方法 比较两个字符串返回下列值中的一个</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 如果子字符串在字母表中应该排在子字符串之前，则返回一个负数（大多数情况</span></span><br><span class="line"><span class="comment">* 是-1，具体值要视情况而定）</span></span><br><span class="line"><span class="comment">* 如果子字符串等于子字符串，则返回0</span></span><br><span class="line"><span class="comment">* 如果字符创在字母表中应该排在子字符串之后，则返回一个正数（大多数情况是</span></span><br><span class="line"><span class="comment">* 1，具体视情况而定）</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">var</span> stringValue = <span class="string">'yellow'</span></span><br><span class="line"><span class="built_in">console</span>.log(stringValue.localeCompare(<span class="string">'brick'</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(stringValue.localeCompare(<span class="string">'yellow'</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(stringValue.localeCompare(<span class="string">'zoo'</span>)) <span class="comment">//-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// fromCharCode() //接收一或多个字符编码，然后将他们换成一个字符串。从本质</span></span><br><span class="line"><span class="comment">// 上看这个方法与charCodeAt()执行的是相反的操作</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Global对象</span></span><br><span class="line"><span class="comment">// URL编码方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* encodeURL()  主要用于整个url</span></span><br><span class="line"><span class="comment">* encodeURLComponent() 对url中的一部分进行转码</span></span><br><span class="line"><span class="comment">* 将url转换为浏览器可识别的字符串</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 一般来说，我们使用encodeURLComponent()方法要比使用encodeURL要多，因为常见</span></span><br><span class="line"><span class="comment">* 是处理url的一部分</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 相对的</span></span><br><span class="line"><span class="comment">* decodeURL() 和decodeURLComponent() 是对上面的两种方法进行解码</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// eval()</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 能够解释代码字符串的能力非常强大，但也非常危险。因此使用eval()时必须极为谨慎，</span></span><br><span class="line"><span class="comment">* 特别是在用他执行用户输入数据的情况下。否则可能会有恶意用户输入威胁你的站点或</span></span><br><span class="line"><span class="comment">* 应用程序安全的代码（即所谓的代码注入）</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Math 对象</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Math.E         自然对数的底数</span></span><br><span class="line"><span class="comment">* Math.LN10      10的自然对数</span></span><br><span class="line"><span class="comment">* Math.LN2       2的自然对数</span></span><br><span class="line"><span class="comment">* Math.LOG2E     以2为底e的对数</span></span><br><span class="line"><span class="comment">* Math.LOG10E    以10为底e的对数</span></span><br><span class="line"><span class="comment">* Math.PI        PI的值</span></span><br><span class="line"><span class="comment">* Math.SQRT1_2   1/2的平方根</span></span><br><span class="line"><span class="comment">* Math.SQRT2     2的平方根</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 最大值与最小值</span></span><br><span class="line"><span class="comment">// min() 和 max() 方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 舍入方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Math.ceil() 向上舍入  25.9 -&gt; 26 25.5-&gt; 26 25.1 -&gt;26</span></span><br><span class="line"><span class="comment">* Math.floor() 向下舍入 25.9 -&gt; 25 25.5 -&gt;25 25.1 -&gt;25</span></span><br><span class="line"><span class="comment">* Math,round() 四舍五入</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// random() 方法 返回[0,1)之间的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 取[min,max]之间的值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectFrom</span>(<span class="params">min, max</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> choices = max - min + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * choices + min)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(selectFrom(<span class="number">2</span>, <span class="number">10</span>))<span class="comment">// [2,10]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Math.abs(num)  绝对值</span></span><br><span class="line"><span class="comment">* Math.exp(num)  Math.E的num次幂</span></span><br><span class="line"><span class="comment">* Math.log(num)  num的自然对数</span></span><br><span class="line"><span class="comment">* Math.log(num,power) num 的power次幂</span></span><br><span class="line"><span class="comment">* math.sqrt(num) num的平方根</span></span><br><span class="line"><span class="comment">* Math.acos(x)  x的反余弦值</span></span><br><span class="line"><span class="comment">* Math.asin(x)  x的反正弦</span></span><br><span class="line"><span class="comment">* Math.atan(x)  x的反正切</span></span><br><span class="line"><span class="comment">* Math.atan2(y,x)  y/x的反正切</span></span><br><span class="line"><span class="comment">* Math.cos(x)  x的余弦</span></span><br><span class="line"><span class="comment">* Math.sin(x)  x的正弦</span></span><br><span class="line"><span class="comment">* Math.tan(x)  x的正切</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure>

<h4 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h4><p>虽然说在JavaScript编程语言中，<strong>函数是第一公民</strong>，但是JavaScript不仅支持函数式编程，也支持面向对象编程。JavaScript对象设计成了一组属性的无序集合，由key和value组成，key为一个标识符名称，而value可以是任意类型的值，当函数作为对象的属性值时，这个函数就可以称之为对象的方法。</p>
<h5 id="1-JavaScript创建对象的方式"><a href="#1-JavaScript创建对象的方式" class="headerlink" title="1.JavaScript创建对象的方式"></a>1.JavaScript创建对象的方式</h5><blockquote>
<p>一般地，常用于创建对象的方式有两种，早期经常使用Object类，通过new关键字来创建一个对象，有点类似于Java中创建对象，后来为了方便就直接使用对象字面量的方式来创建对象了，用法更为简洁。</p>
</blockquote>
<ul>
<li><p>使用<code>Object</code>类创建对象；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>() <span class="comment">// 创建一个空对象</span></span><br><span class="line"><span class="comment">// 往对象中添加属性</span></span><br><span class="line">obj.name = <span class="string">'curry'</span></span><br><span class="line">obj.age = <span class="number">30</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用对象字面量创建对象；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接往&#123;&#125;添加键值对</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'curry'</span>,</span><br><span class="line">  age: <span class="number">30</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="2-对象属性操作的控制"><a href="#2-对象属性操作的控制" class="headerlink" title="2.对象属性操作的控制"></a>2.对象属性操作的控制</h5><blockquote>
<p>对象创建出来后，如何对该对象进行操作控制呢？这里涉及到一个很重要的方法：Object.defineProperty()。</p>
</blockquote>
<h6 id="2-1-Object-defineProperty"><a href="#2-1-Object-defineProperty" class="headerlink" title="2.1.Object.defineProperty()"></a>2.1.Object.defineProperty()</h6><blockquote>
<p>该方法可以在对象上定义一个新的属性，也可修 改对象现有属性，并将该对象返回。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.defineProperty(obj, prop, descriptor)</span><br></pre></td></tr></table></figure>

<p>接收三个参数：</p>
<ul>
<li>obj：指定操作的对象；</li>
<li>prop：指定需要定义或修改的属性名称；</li>
<li>description：定义或修改的属性描述符；</li>
</ul>
<h6 id="2-2-属性描述符的分类"><a href="#2-2-属性描述符的分类" class="headerlink" title="2.2.属性描述符的分类"></a>2.2.属性描述符的分类</h6><blockquote>
<p>什么是属性描述符？顾名思义就是对对象中的属性进行描述，简单来说就是给对象某个属性指定一些规则。属性描述符主要分为<strong>数据属性描述符</strong>和<strong>存取属性描述符</strong>两种类型。</p>
</blockquote>
<p>对于属性描述符中的属性是否两者都可以设置呢？其实数据和存取属性描述符两者是有区别，下面的表格统计了两者可用和不可用的属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">configurable</th>
<th align="left">enumerable</th>
<th align="left">value</th>
<th align="left">writable</th>
<th align="left">get</th>
<th align="left">set</th>
</tr>
</thead>
<tbody><tr>
<td align="left">数据属性描述符</td>
<td align="left">可以</td>
<td align="left">可以</td>
<td align="left">可以</td>
<td align="left">可以</td>
<td align="left">不可以</td>
<td align="left">不可以</td>
</tr>
<tr>
<td align="left">存取属性描述符</td>
<td align="left">可以</td>
<td align="left">可以</td>
<td align="left">不可以</td>
<td align="left">不可以</td>
<td align="left">可以</td>
<td align="left">可以</td>
</tr>
</tbody></table>
<p>那么为什么有些属性可以用，有些属性又不能用呢？因为数据属性描述符和存取属性描述符所担任的角色不一样，下面就来详细介绍一下，它们两者的区别。</p>
<h6 id="2-3-数据属性描述符"><a href="#2-3-数据属性描述符" class="headerlink" title="2.3.数据属性描述符"></a>2.3.数据属性描述符</h6><blockquote>
<p>从上面的表格可以知道，数据属性描述符可以使用configurable、enumerable、value、writable。而这就是数据属性描述符的四个特性。</p>
</blockquote>
<ul>
<li><strong>Configurable</strong>：表示是否可以通过delete删除对象属性，是否可以修改它的特性，或者是否可以将它修改为存取属性描述符。当通过<code>new Object()</code>或者字面量的方式创建对象时，其中的属性的<code>configurable</code>默认为<code>true</code>，当通过属性描述符定义一个属性时，其属性的<code>configurable</code>默认为<code>false</code>。</li>
<li><strong>Enumerable</strong>：表示是否可以通过for-in或者Object.keys()返回该属性。当通过<code>new Object()</code>或者字面量的方式创建对象时，其中的属性的<code>enumerable</code>默认为<code>true</code>，当通过属性描述符定义一个属性时，其属性的<code>enumerable</code>默认为<code>false</code>。</li>
<li><strong>Writable</strong>：表示是否可以修改属性的值。当通过<code>new Object()</code>或者字面量的方式创建对象时，其中的属性的<code>writable</code>性描述符定义一个属性时，其属性的<code>writable</code>默认为<code>false</code>。</li>
<li><strong>Value</strong>：属性的value值，读取属性时会返回该值，修改属性时会对其进行修改。（默认：undefined）</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'curry'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">'age'</span>, &#123;</span><br><span class="line">  configurable: <span class="literal">false</span>, <span class="comment">// age属性是否可以删除，默认false</span></span><br><span class="line">  enumerable: <span class="literal">false</span>, <span class="comment">// age属性是否可以枚举，默认false</span></span><br><span class="line">  writable: <span class="literal">false</span>, <span class="comment">// age属性是否可以写入（修改），默认false</span></span><br><span class="line">  value: <span class="number">30</span> <span class="comment">// age属性的值，默认undefined</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当configurable为false，age属性是不可被删除的</span></span><br><span class="line"><span class="keyword">delete</span> obj.age</span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123; name: 'curry', age: 30 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当writable为false，age属性的值是不可被修改的</span></span><br><span class="line">obj.age = <span class="number">18</span></span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123; name: 'curry', age: 30 &#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果将enumerable修改为false，age属性是不可以被遍历出来的</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key) <span class="comment">// name</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="2-4-存取属性描述符"><a href="#2-4-存取属性描述符" class="headerlink" title="2.4.存取属性描述符"></a>2.4.存取属性描述符</h6><blockquote>
<p>存取属性描述符可以使用configurable、enumerable、get、set。在获取对象某个属性值时，可以通过get来拦截，在设置对象某个属性值时，可以通过set来拦截。configurable和enumerable的用法和特性跟数据属性描述符一样。</p>
</blockquote>
<ul>
<li><strong>Get</strong>：获取属性时会执行的函数。（默认undefined）</li>
<li><strong>Set</strong>：设置属性时会执行的函数。（默认undefined）</li>
</ul>
<p>get和set的使用场景：</p>
<ul>
<li><p>隐藏某一个私有属性，不希望直接被外界使用和赋值。如下代码<code>_age</code>表示不想直接被外界使用，外界就可以通过使用<code>age</code>的set和get来访问设置<code>_age</code>了。</p>
</li>
<li><p>如果希望截获某一个属性它访问和设置值的过程。（Vue2的响应式原理就在这）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'curry'</span>,</span><br><span class="line">  _age: <span class="number">30</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：这里的this是指向obj对象的</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">'age'</span>, &#123;</span><br><span class="line">  configurable: <span class="literal">true</span>,</span><br><span class="line">  enumerable: <span class="literal">true</span>,</span><br><span class="line">  <span class="keyword">get</span>: function() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'age属性被访问了'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._age</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span>: function(newValue) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'age属性被设置了'</span>)</span><br><span class="line">    <span class="keyword">this</span>._age = newValue</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">obj.age <span class="comment">// age属性被访问了</span></span><br><span class="line">obj.age = <span class="number">18</span> <span class="comment">// age属性被设置了</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h6 id="2-5-同时给多个属性定义属性描述符"><a href="#2-5-同时给多个属性定义属性描述符" class="headerlink" title="2.5.同时给多个属性定义属性描述符"></a>2.5.同时给多个属性定义属性描述符</h6><blockquote>
<p>上面使用<code>Object.defineProperty()</code>方法都是给单个属性进行定义描述符，想要一次性定义多个属性，那么就可以使用<code>Object.defineProperties()</code>方法了。写法如下：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.defineProperties(obj, &#123;</span><br><span class="line">  name: &#123;</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    writable: <span class="literal">true</span>,</span><br><span class="line">    value: <span class="string">'curry'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  age: &#123;</span><br><span class="line">    configurable: <span class="literal">false</span>,</span><br><span class="line">    enumerable: <span class="literal">false</span>,</span><br><span class="line">    <span class="keyword">get</span>: function() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>._age</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>: function(newValue) &#123;</span><br><span class="line">      <span class="keyword">this</span>._age = newValue</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="3-Object中常用的方法"><a href="#3-Object中常用的方法" class="headerlink" title="3.Object中常用的方法"></a>3.Object中常用的方法</h5><blockquote>
<p>上面介绍了Object中<code>defineProperty</code>和<code>defineProperties</code>两个方法。其实Object中还有很多方法，下面介绍一些常用的。</p>
</blockquote>
<ul>
<li><p>获取对象的属性描述符：</p>
<ul>
<li>获取单个属性：<code>Object.getOwnPropertyDescriptor</code>；</li>
<li>获取所有属性：<code>Object.getOwnPropertyDescriptors</code>；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'curry'</span>,</span><br><span class="line">  age: <span class="number">30</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">'age'</span>)) <span class="comment">// &#123; value: 30, writable: true, enumerable: true, configurable: true &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptors(obj))</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  &#123;</span></span><br><span class="line"><span class="comment">    name: &#123;</span></span><br><span class="line"><span class="comment">      value: 'curry',</span></span><br><span class="line"><span class="comment">      writable: true,</span></span><br><span class="line"><span class="comment">      enumerable: true,</span></span><br><span class="line"><span class="comment">      configurable: true</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    age: &#123; value: 30, writable: true, enumerable: true, configurable: true &#125;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Object.preventExtensions()</code>：禁止对象扩展新属性，给一个对象添加新的属性会失败（在严格模式下会报错）。</p>
</li>
<li><p><code>Object.seal()</code>：将对象密封起来，不允许配置和删除属性。（实际还是调用<code>preventExtensions</code>，并且将现有属性的<code>configurable</code>设置为<code>false</code>）</p>
</li>
<li><p><code>Object.freeze()</code>：将对象冻结起来，不允许修改对象现有属性。（实际上是调用seal，并且将现有属性的<code>writable</code>设置为<code>false</code>）</p>
</li>
</ul>
<h5 id="4-JavaScript创建多个对象"><a href="#4-JavaScript创建多个对象" class="headerlink" title="4.JavaScript创建多个对象"></a>4.JavaScript创建多个对象</h5><blockquote>
<p>上面提到的创建对象的方式仅适用于创建单个对象适用，如果有多个对象比较类似，那么一个个创建必然是很麻烦的，如何批量创建对象呢？JavaScript也给我们提供了一些方案。</p>
</blockquote>
<h6 id="4-1-方案一：工厂函数"><a href="#4-1-方案一：工厂函数" class="headerlink" title="4.1.方案一：工厂函数"></a>4.1.方案一：工厂函数</h6><blockquote>
<p>如果我们不想在创建对象时做重复的工作，那么就可以定义一个函数为我们去做这些重复性的工作，我们只需要将属性对应的值传入函数即可。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createObj</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 创建一个空对象</span></span><br><span class="line">  <span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置对应属性值</span></span><br><span class="line">  obj.name = name</span><br><span class="line">  obj.age = age</span><br><span class="line">  <span class="comment">// 公共方法共用</span></span><br><span class="line">  obj.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">$&#123;<span class="keyword">this</span>.namename&#125;</span>, I'm <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old.`</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 将对象返回</span></span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = createObj(<span class="string">'curry'</span>, <span class="number">30</span>)</span><br><span class="line"><span class="keyword">const</span> obj2 = createObj(<span class="string">'kobe'</span>, <span class="number">24</span>)</span><br><span class="line"><span class="built_in">console</span>.log(obj1) <span class="comment">// &#123; name: 'curry', age: 30, sayHello: [Function (anonymous)] &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2) <span class="comment">// &#123; name: 'kobe', age: 24, sayHello: [Function (anonymous)] &#125;</span></span><br><span class="line">obj1.sayHello() <span class="comment">// My name is undefined, I'm 30 years old.</span></span><br><span class="line">obj2.sayHello() <span class="comment">// My name is undefined, I'm 24 years old.</span></span><br></pre></td></tr></table></figure>

<p><strong>缺点</strong>：创建出来的对象全是通过字面量创建的，获取不到对象真实的类型。</p>
<h6 id="4-2-方案二：构造函数"><a href="#4-2-方案二：构造函数" class="headerlink" title="4.2.方案二：构造函数"></a>4.2.方案二：构造函数</h6><p><strong>（1）什么是构造函数？</strong></p>
<ul>
<li>构造函数也称之为构造器（constructor），通常是我们在创建对象时会调用的函数；</li>
<li>在其他面向对象的编程语言里面，构造函数是存在于类中的一个方法，称之为构造方法；</li>
<li>如果一个普通的函数被使用<strong>new操作符来调用</strong>了，那么这个函数就称之为是一个构造函数；</li>
<li>一般规定构造函数的函数名首字母大写；</li>
</ul>
<p><strong>（2）new操作符调用函数的作用</strong></p>
<blockquote>
<p>当一个函数被new操作符调用了，默认会进行如下几部操作：</p>
</blockquote>
<ul>
<li>在内存中创建一个<strong>新的对象</strong>（空对象）；</li>
<li>这个对象内部的**[[prototype]]属性<strong>会被赋值为该</strong>构造函数的prototype属性**；</li>
<li>构造函数内部的this，会<strong>指向创建出来的新对象</strong>；</li>
<li>执行函数的<strong>内部代码</strong>（函数体代码）；</li>
<li>如果构造函数没有返回<strong>对象</strong>，则默认返回创建出来的新对象。</li>
</ul>
<p><strong>（3）构造函数创建对象的过程</strong></p>
<ul>
<li>通过构造函数创建的对象就真实的类型了，如下所示的Person类型；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">this</span>.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, I'm <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old.`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> Person(<span class="string">'curry'</span>, <span class="number">30</span>)</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> Person(<span class="string">'kobe'</span>, <span class="number">24</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p1) <span class="comment">// Person &#123; name: 'curry', age: 30, sayHello: [Function (anonymous)] &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(p2) <span class="comment">// Person &#123; name: 'kobe', age: 24, sayHello: [Function (anonymous)] &#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>缺点</strong>：在每次使用new创建新对象时，会重新给每个对象创建新的属性，包括对象中方法，实际上，对象中的方法是可以共用的，消耗了不必要的内存。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(p1.sayHello === p2.sayHello) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h6 id="4-3-方案三：原型-构造函数"><a href="#4-3-方案三：原型-构造函数" class="headerlink" title="4.3.方案三：原型+构造函数"></a>4.3.方案三：原型+构造函数</h6><blockquote>
<p>在了解该方案之前，需要先简单的认识一下何为原型。</p>
</blockquote>
<p><strong>（1）对象的原型</strong></p>
<blockquote>
<p>JavaScript中每个对象都有一个特殊的内置属性[[prototype]]（我们称之为<strong>隐式原型</strong>），这个特殊的属性指向另外一个对象。那么这个属性有什么用呢?</p>
</blockquote>
<ul>
<li>前面介绍了，当我们通过对象的key来获取对应的value时，会触发对象的get操作；</li>
<li>首先，get操作会先查看该对象自身是否有对应的属性，如果有就找到并返回其值；</li>
<li>如果在对象自身没有找到该属性就会去对象的[[prototype]]这个内置属性中查找；</li>
</ul>
<p>那么对象的[[prototype]]属性怎么获取呢？主要有两种方法：</p>
<ul>
<li>通过对象的<code>__proto__</code>属性访问；</li>
<li>通过<code>Object.getPrototypeOf()</code>方法获取；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'curry'</span>,</span><br><span class="line">  age: <span class="number">30</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj.__proto__)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getPrototypeOf(obj))</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208161155310.png" alt="img"></p>
<p><strong>（2）函数的原型</strong></p>
<blockquote>
<p>所有的函数都有一个prototype属性，并且只有函数才有这个属性。前面提到了new操作符是如何在内存中创建一个对象，并给我们返回创建出来的对象，其中第二步<strong>这个对象内部的[[prototype]]属性会被赋值为该构造函数的prototype属性</strong>。将代码与图结合，来看一下具体的过程。</p>
</blockquote>
<p>示例代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function Person(name, age) &#123;</span><br><span class="line">  this.name = name</span><br><span class="line">  this.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const p1 = new Person(&apos;curry&apos;, 30)</span><br><span class="line">const p2 = new Person(&apos;kobe&apos;, 24)</span><br><span class="line">// 验证：对象(p1\p2)内部的[[prototype]]属性(__proto__)会被赋值为该构造函数(Person)的prototype属性；</span><br><span class="line">console.log(p1.__proto__ === Person.prototype) // true</span><br><span class="line">console.log(p2.__proto__ === Person.prototype) // true</span><br></pre></td></tr></table></figure>

<p>内存表现：</p>
<ul>
<li>p1和p2的原型都指向Person函数的prototype原型；</li>
<li>其中还有一个constructor属性，默认原型上都会有这个属性，并且指向当前的函数对象；</li>
</ul>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208161156642.png" alt="img"></p>
<p><strong>（3）结合对象和函数的原型，创建对象</strong></p>
<blockquote>
<p>先简单的总结一下：</p>
</blockquote>
<ul>
<li>前面使用构造函数创建对象的缺点是对象中的方法不能共用；</li>
<li>对象的属性可以通过[[prototype]]隐式原型进行查找；</li>
<li>构造函数创建出来的对象[[prototype]]与构造函数prototype指向同一个对象（同一个地址空间）；</li>
<li>那么我们可以将普通的属性放在构造函数的内部，将方法放在构造函数的原型上，当查找方法时，就都会去到构造函数的原型上，从而实现方法共用；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, I'm <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old.`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> Person(<span class="string">'curry'</span>, <span class="number">30</span>)</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> Person(<span class="string">'kobe'</span>, <span class="number">24</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p1.sayHello === p2.sayHello) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h6 id="4-4-其他"><a href="#4-4-其他" class="headerlink" title="4.4.其他"></a>4.4.其他</h6><p>创建对象的模式还有许许多多，包括不限于<code>动态原型模式</code>、<code>寄生构造函数模式</code>、<code>稳妥构造函数模式</code>、``</p>
<h4 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h4><p>原型模式是一种设计模式，那么为什么要在JavaScript这章里面单独拿出来讲呢，因为js可以归纳为是一门基于原型的面向对象语言。基于原型这个概念是深入进js的基因的，所以在这里单独开一章。</p>
<p>简单地说，<em>JavaScript 是基于原型的语言</em>。当我们调用一个对象的属性时，如果对象没有该属性，JavaScript 解释器就会从对象的原型对象上去找该属性，如果原型上也没有该属性，那就去找原型的原型，直到最后返回null为止，null没有原型。这种属性查找的方式被称为原型链（prototype chain）。</p>
<h5 id="JavaScript原型-amp-原型链"><a href="#JavaScript原型-amp-原型链" class="headerlink" title="JavaScript原型 &amp; 原型链"></a>JavaScript原型 &amp; 原型链</h5><p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160424300.png" alt="preview"></p>
<p>首先来一个总纲，总纲里面包括了原型/原型链的所有内容，然后我们把图拆解。</p>
<ul>
<li>想要弄清楚原型和原型链，这几个属性必须要搞清楚，<code>__proto__</code>、<code>prototype</code>、 <code>constructor</code>。</li>
<li>其次你要知道js中对象和函数的关系，函数其实是对象的一种。</li>
<li>最后你要知道函数、构造函数的区别，任何函数都可以作为构造函数，但是并不能将任意函数叫做构造函数，只有当一个函数通过new关键字调用的时候才可以成为构造函数。如：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Parent = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义一个函数，那它只是一个普通的函数，下面我们让这个函数变得不普通</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Parent();</span><br><span class="line"><span class="comment">//这时这个Parent就不是普通的函数了，它现在是一个构造函数。因为通过new关键字调用了它</span></span><br><span class="line"><span class="comment">//创建了一个Parent构造函数的实例 p1</span></span><br></pre></td></tr></table></figure>

<p>我们再引出一个概念，开始说过了要想清楚原型就要先搞清楚这三个属性，<code>__proto__</code>、<code>prototype</code>、 <code>constructor</code>。</p>
<ul>
<li>我们记住两点</li>
</ul>
<p>1.<code>__proto__</code>、 <code>constructor</code>属性是对象所独有的；<br>2.<code>prototype</code>属性是函数独有的；<br>3.上面说过js中函数也是对象的一种，那么函数同样也有属性<code>__proto__</code>、 <code>constructor</code>；</p>
<p>下面开始进入正题，我将上面的一张图拆分成3张图，分别讲解对应的3个属性。</p>
<h6 id="1-prototype属性"><a href="#1-prototype属性" class="headerlink" title="1.prototype属性"></a>1.prototype属性</h6><p>为了方便举例，我们在这模拟一个场景，父类比作师父，子类比作徒弟。师父收徒弟，<br>徒弟还可以收徒弟。徒弟可以得到师父传授的武功，然后徒弟再传给自己的徒弟。<br>师父想要传授给徒弟们的武功就放到“prototype”这个琅琊福地中。徒弟徒孙们就去这里学习武功。</p>
<p>prototype属性可以看成是一块特殊的存储空间，存储了供“徒弟”、“徒孙”们使用的方法和属性。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160428119.png" alt="preview"></p>
<p>它是函数独有的属性，从图中可以看到它从一个函数指向另一个对象，代表这个对象是这个函数的原型对象，这个对象也是当前函数所创建的实例的原型对象。<br><code>prototype</code>设计之初就是为了实现继承，让由特定函数创建的所有实例共享属性和方法，也可以说是让某一个构造函数实例化的所有对象可以找到公共的方法和属性。有了<code>prototype</code>我们不需要为每一个实例创建重复的属性方法，而是将属性方法创建在构造函数的原型对象上（prototype）。那些不需要共享的才创建在构造函数中。<br>继续引用上面的代码，当我们想为通过Parent实例化的所有实例添加一个共享的属性时，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Parent.prototype.name = <span class="string">"我是原型属性，所有实例都可以读取到我"</span>;</span><br></pre></td></tr></table></figure>

<p>这就是原型属性，当然你也可以添加原型方法。那问题来了，<code>p1</code>怎么知道他的原型对象上有这个方法呢，往下看↓↓↓</p>
<h6 id="2-proto属性"><a href="#2-proto属性" class="headerlink" title="2.proto属性"></a>2.proto属性</h6><p>__proto__属性相当于通往prototype（“琅琊福地”）唯一的路（指针）<br>让“徒弟”、“徒孙” 们找到自己“师父”、“师父的师父” 提供给自己的方法和属性</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160429727.png" alt="preview"></p>
<p><code>__proto__</code>属性是对象（包括函数）独有的。从图中可以看到<code>__proto__</code>属性是从一个对象指向另一个对象，即从一个对象指向该对象的原型对象（也可以理解为父对象）。显然它的含义就是告诉我们一个对象的原型对象是谁。<br>prototype篇章我们说到，<code>Parent.prototype</code>上添加的属性和方法叫做原型属性和原型方法，该构造函数的实例都可以访问调用。那这个构造函数的原型对象上的属性和方法，怎么能和构造函数的实例联系在一起呢，就是通过<code>__proto__</code>属性。每个对象都有<code>__proto__</code>属性，该属性指向的就是该对象的原型对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p1.__proto__ === Parent.prototype; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><code>__proto__</code>通常称为隐式原型，<code>prototype</code>通常称为显式原型，那我们可以说一个对象的隐式原型指向了该对象的构造函数的显式原型。那么我们在显式原型上定义的属性方法，通过隐式原型传递给了构造函数的实例。这样一来实例就能很容易的访问到构造函数原型上的方法和属性了。<br>我们之前也说过<code>__proto__</code>属性是对象（包括函数）独有的，那么<code>Parent.prototype</code>也是对象，那它有隐式原型么？又指向谁？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Parent.prototype.__proto__ === <span class="built_in">Object</span>.prototype; <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p>可以看到，构造函数的原型对象上的隐式原型对象指向了Object的原型对象。那么Parent的原型对象就继承了Object的原型对象。由此我们可以验证一个结论，万物继承自Object.prototype。这也就是为什么我们可以实例化一个对象，并且可以调用该对象上没有的属性和方法了。如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//我们并没有在Parent中定义任何方法属性，但是我们可以调用</span></span><br><span class="line">p1.toString();<span class="comment">//hasOwnProperty 等等的一些方法</span></span><br></pre></td></tr></table></figure>

<p>我们可以调用很多我们没有定义的方法，这些方法是哪来的呢？现在引出原型链的概念，当我们调用<code>p1.toString()</code>的时候，先在<code>p1</code>对象本身寻找，没有找到则通过<code>p1.__proto__</code>找到了原型对象<code>Parent.prototype</code>，也没有找到，又通过<code>Parent.prototype.__proto__</code>找到了上一层原型对象Object.prototype。在这一层找到了toString方法。返回该方法供<code>p1</code>使用。<br>当然如果找到Object.prototype上也没找到，就在<code>Object.prototype.__proto__</code>中寻找，但是<code>Object.prototype.__proto__ === null</code>所以就返回undefined。这就是为什么当访问对象中一个不存在的属性时，返回undefined了。</p>
<h6 id="3-constructor属性"><a href="#3-constructor属性" class="headerlink" title="3.constructor属性"></a>3.constructor属性</h6><p>constructor属性是让“徒弟”、“徒孙” 们知道是谁创造了自己，这里可不是“师父”啊<br>而是自己的父母，父母创造了自己，父母又是由上一辈人创造的，……追溯到头就是Function() 【女娲】。</p>
<hr>
<p>补丁：上面的说法严格来讲并不正确，明显在逻辑上有一些不通顺的地方，那是因为：constructor属性本质上只有prototype对象才有，也就是说<code>构造函数.prototype.contructor === 该构造函数</code>，实例对象之所以会有是只是通过<code>_proto</code>继承来自其构造函数的原型对象。</p>
<p>所以p1 =&gt; Parent() =&gt; Function()这里的contructor属性应该用虚线表示，注明来自继承得来。</p>
<p>可以通过</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p1.hasOwnProperty(<span class="string">'constructor'</span>) <span class="comment">// false</span></span><br><span class="line">Parent.prototype.hasOwnProperty(<span class="string">'constructor'</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>得到验证。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208160431060.png" alt="preview"></p>
<p>constructor是对象才有的属性，从图中看到它是从一个对象指向一个函数的。指向的函数就是该对象的构造函数。每个对象都有构造函数，好比我们上面的代码<code>p1</code>就是一个对象，那<code>p1</code>的构造函数是谁呢？我们打印一下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(p1.constructor); <span class="comment">// ƒ Parent()&#123;&#125;</span></span><br></pre></td></tr></table></figure>

<p>通过输出结果看到，很显然是Parent函数。我们有说过函数也是对象，那Parent函数是不是也有构造函数呢？显然是有的。再次打印下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(Parent.constructor); <span class="comment">// ƒ Function() &#123; [native code] &#125;</span></span><br></pre></td></tr></table></figure>

<p>通过输出看到Parent函数的构造函数是Function()，这点也不奇怪，因为我们每次定义函数其实都是调用了new Function()，下面两种效果是一样的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn1 = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'msg'</span>,<span class="string">'alert(msg)'</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">msg</span>)</span>&#123;</span><br><span class="line">    alert(msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么我们再回来看下，再次打印Function.constructor</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span>.constructor); <span class="comment">// ƒ Function() &#123; [native code] &#125;</span></span><br></pre></td></tr></table></figure>

<p>可以看到Function函数的构造函数就是本身了，那我们也就可以说Function是所有函数的根构造函数。<br>到这里我们已经对constructor属性有了一个初步的认识，它的作用是从一个对象指向一个函数，这个函数就是该对象的构造函数。通过栗子我们可以看到，<code>p1</code>的<code>constructor</code>属性指向了<code>Parent</code>，那么<code>Parent</code>就是<code>p1</code>的构造函数。同样<code>Parent</code>的<code>constructor</code>属性指向了<code>Function</code>，那么<code>Function</code>就是<code>Parent</code>的构造函数，然后又验证了<code>Function</code>就是根构造函数。</p>
<p>脑筋急转弯之 存在没有原型的对象吗？使用<code>Objetct.create(null)</code>可以创建出没有原型的对象。</p>
<h6 id="4-总结"><a href="#4-总结" class="headerlink" title="4.总结"></a>4.总结</h6><p>ok，上面的比喻是为了初学者能够方便的理解原型和原型链，下面梳理一下流程。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208170956321.png" alt="img"></p>
<p>在这个过程里面，关于prototype我觉得有两个理解含义，在箭头上面的<code>prototype</code>有点类似于<code>.prototype指针</code>的意思，而<code>Person.prototype</code>毫无疑问就是常规意义上的原型对象。</p>
<h6 id="5-使用习惯"><a href="#5-使用习惯" class="headerlink" title="5.使用习惯"></a>5.使用习惯</h6><p>关于构造函数，咱们引入一些使用习惯：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">funcion A(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name; <span class="comment">// 实例基本属性 (该属性，强调私有，不共享)</span></span><br><span class="line">    <span class="keyword">this</span>.arr = [<span class="number">1</span>]; <span class="comment">// 实例引用属性 (该属性，强调私用，不共享)</span></span><br><span class="line">    <span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 实例引用属性 (该属性，强调复用，需要共享)</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'hello'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//注意：数组和方法都属于‘实例引用属性’，但是数组强调私有、不共享的。方法需要复用、共享。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//注意：在构造函数中，一般很少有数组形式的引用属性，大部分情况都是：基本属性 + 方法。</span></span><br></pre></td></tr></table></figure>

<p>原型对象的使用习惯</p>
<blockquote>
<p>原型对象的用途是为每个实例对象存储共享的方法和属性，它仅仅是一个普通对象而已。并且所有的实例是共享同一个原型对象，因此有别于实例方法或属性，原型对象仅有一份。而实例有很多份，且实例属性和方法是独立的。</p>
<p>在构造函数中：为了属性(实例基本属性)的私有性、以及方法(实例引用属性)的复用、共享。我们提倡：</p>
</blockquote>
<ul>
<li>将属性封装在构造函数中</li>
<li>将方法定义在原型对象上</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">funcion A(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name; <span class="comment">// (该属性，强调私有，不共享)</span></span><br><span class="line">&#125;</span><br><span class="line">A.prototype.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 定义在原型对象上的方法 (强调复用，需要共享)</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'hello'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不推荐的写法</span></span><br><span class="line">A.prototype = &#123;</span><br><span class="line">    say: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'hello'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不推荐的原因：（原因和上面连续赋值的例子很像）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'John'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line">Person.prototype.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello,'</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 此时可以正常调用</span></span><br><span class="line">person.say();<span class="comment">//Hello,John</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果换成另一种表达方式</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = <span class="string">'John'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line">    Person.prototype = &#123;</span><br><span class="line">        say: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Hello,'</span> + <span class="keyword">this</span>.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">	<span class="comment">// 此时无法正常调用 原因很简单，在给Person.prototype重新赋值的时候，person的_proto_并不会跟着Person.prototype一起指向新值，所以在下面调用say，是访问不到的，同样属于是原型里面的知识点。</span></span><br><span class="line">    person.say();<span class="comment">//person.say is not a function</span></span><br></pre></td></tr></table></figure>

<h5 id="JS继承"><a href="#JS继承" class="headerlink" title="JS继承"></a>JS继承</h5><blockquote>
<p>js中的继承有多种方式，大体上就是两种，一种是基于原型链覆盖的形式、一种是对象冒充也就是通过改变this指向。支持多继承，通过原型链可以一直往上找。</p>
</blockquote>
<h6 id="1-原型链继承"><a href="#1-原型链继承" class="headerlink" title="1.原型链继承"></a>1.原型链继承</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.x = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line">Parent.prototype.getX = <span class="function"><span class="keyword">function</span> <span class="title">getX</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.y = <span class="number">200</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//原型继承 Child通过原型链可以找到Parent中的私有属性和Parent.prototype中的公有属性</span></span><br><span class="line">Child.prototype = <span class="keyword">new</span> Parent;</span><br><span class="line">Child.prototype.getY = <span class="function"><span class="keyword">function</span> <span class="title">getY</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> child1 = <span class="keyword">new</span> Child;</span><br></pre></td></tr></table></figure>

<p>优点：父类方法可以复用</p>
<p>缺点：</p>
<p>1.父类所有的引用类型数据（对象，数组）会被子类共享，更改一个子类的数据，其他数据会受到影响，一直变化。</p>
<p>2.子类实例不能给父类构造函数传参</p>
<h6 id="2-构造函数继承"><a href="#2-构造函数继承" class="headerlink" title="2.构造函数继承"></a>2.构造函数继承</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'小明'</span></span><br><span class="line">    <span class="keyword">this</span>.eats = [<span class="string">'苹果'</span>]</span><br><span class="line">    <span class="keyword">this</span>.getName = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">Person.prototype.get = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Person.prototype上的方法"</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    Person.call(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stu1 = <span class="keyword">new</span> Student;</span><br><span class="line"><span class="built_in">console</span>.log(stu1.name);</span><br><span class="line"><span class="built_in">console</span>.log(stu1.eats);</span><br><span class="line">stu1.getName();</span><br><span class="line">stu1.get(); <span class="comment">// 报错 提示没有这种方法</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(stu1)</span><br></pre></td></tr></table></figure>

<p>这种情况下，在Child的构造函数中，使用<code>Parent.call(this)</code>直接调用了Parent的“构造函数”，这里是要突出这个引号，原因是其实只调用了这个函数，严格意义上并不能称之为构造函数，在JS中只有创建了实例的函数才能叫构造函数，但是在此例中并没有构造实例，也就造成了一个问题——因为并没有构造实例，并不会触发<code>Parent.prototype</code>,所以是没法调用到上面的<code>getX</code>的。</p>
<p>这种方式的优点是 父类的引用类型不会被子类共享，不会互相影响。</p>
<p>缺点是不能访问父类的原型属性（因为父类的原型属性根本没被创造出来）</p>
<h6 id="3-组合继承"><a href="#3-组合继承" class="headerlink" title="3.组合继承"></a>3.组合继承</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'小明'</span></span><br><span class="line">    <span class="keyword">this</span>.eats = [<span class="string">'苹果'</span>]</span><br><span class="line">    <span class="keyword">this</span>.getName = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">Person.prototype.get = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Person.prototype上的方法"</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    Person.call(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stu1 = <span class="keyword">new</span> Student;</span><br><span class="line"><span class="built_in">console</span>.log(stu1.name);</span><br><span class="line"><span class="built_in">console</span>.log(stu1.eats);</span><br><span class="line">stu1.getName();</span><br><span class="line">stu1.get();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(stu1)</span><br></pre></td></tr></table></figure>

<p>这种方式相当于是上面两种的合体，这种方式在第二种的前提上，真正的把父类的对象创建了，所以自然也就会调用到父类的原型对象。也能用到里面的方法。</p>
<p>但是这个里面也会有一个缺点。</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208181015479.png" alt="image-20220818101558357"></p>
<p>可以看到，只需要一份的数据，在这种继承模式下，会分别在父类和子类里面都有一份，虽然能满足需求但是性能会比较差一点。</p>
<h6 id="4-寄生组合继承"><a href="#4-寄生组合继承" class="headerlink" title="4.寄生组合继承"></a>4.寄生组合继承</h6><p>细推上面那种方式，想知道父类里面的重复数据是哪里来的，其实就是父类在创建对象的过程中，<code>Student.prototype = new Person();</code>这里把Person对象创建出来重新加载了一次。如果这个Person构造函数中没有属性的话（只有父类的原型对象有），其实是满足我们要求的。</p>
<p>考虑到这，那么有没有办法能够忽略到父类构造函数中属性的方法呢？</p>
<p>有的，使用解几何题中常见的手段——辅助线（中间函数）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'小明'</span></span><br><span class="line">    <span class="keyword">this</span>.eats = [<span class="string">'苹果'</span>]</span><br><span class="line">    <span class="keyword">this</span>.getName = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">Person.prototype.get = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Person.prototype上的方法"</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    Person.call(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Student.prototype = new Person();</span></span><br><span class="line"><span class="keyword">const</span> Fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">Fn.prototype = Person.prototype</span><br><span class="line"></span><br><span class="line">Student.prototype = <span class="keyword">new</span> Fn()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stu1 = <span class="keyword">new</span> Student;</span><br><span class="line"><span class="built_in">console</span>.log(stu1.name);</span><br><span class="line"><span class="built_in">console</span>.log(stu1.eats);</span><br><span class="line">stu1.getName();</span><br><span class="line">stu1.get();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(stu1)</span><br></pre></td></tr></table></figure>

<p>使用Fn指向Person的原型对象，然后新建一个Fn，这样就相当于构建了一个没有属性的父类，等效的。</p>
<p>理论上是比较优秀的方案。</p>
<h6 id="5-ES6自带继承"><a href="#5-ES6自带继承" class="headerlink" title="5.ES6自带继承"></a>5.ES6自带继承</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>()&#123;</span><br><span class="line">		<span class="keyword">this</span>.x=<span class="number">100</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	getX()&#123;</span><br><span class="line">		retrun <span class="keyword">this</span>.x;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>()&#123;</span><br><span class="line">		<span class="keyword">super</span>();<span class="comment">//类似于call继承super(100,200) 相当于把Parent中的constructor执行，传递了100和200</span></span><br><span class="line">		<span class="keyword">this</span>.y=<span class="number">200</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	getY()&#123;</span><br><span class="line">		retrun <span class="keyword">this</span>.y;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>是更新之后，语言自己给出的解决方案。添加了一些class extend等新概念。</p>
<h4 id="函数表达式"><a href="#函数表达式" class="headerlink" title="函数表达式"></a>函数表达式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> functionName2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数表达式: JavaScript 函数可以通过一个表达式定义,函数表达式可以存储在变量中：</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;<span class="keyword">return</span> a * b&#125;;</span><br><span class="line"><span class="comment">// 在函数表达式存储在变量后，变量也可作为一个函数使用：</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;<span class="keyword">return</span> a * b&#125;;</span><br><span class="line"><span class="keyword">var</span> z = x(<span class="number">4</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在函数表达式存储在变量后，变量也可作为一个函数使用：</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;<span class="keyword">return</span> a * b&#125;;</span><br><span class="line"><span class="keyword">var</span> z = x(<span class="number">4</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数同样可以通过内置的 JavaScript 函数构造器（Function()）定义。</span></span><br><span class="line"><span class="keyword">var</span> myFunction = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"return a * b"</span>);</span><br><span class="line"><span class="keyword">var</span> x = myFunction(<span class="number">4</span>, <span class="number">3</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 函数提升（Hoisting） 函数可以在声明之前调用 使用表达式定义函数时无法提升。</span></span><br><span class="line">myFunction(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params">y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> y * y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 自调用函数</span></span><br><span class="line"><span class="comment">函数表达式可以 "自调用"。</span></span><br><span class="line"><span class="comment">自调用表达式会自动调用。</span></span><br><span class="line"><span class="comment">如果表达式后面紧跟 () ，则会自动调用。</span></span><br><span class="line"><span class="comment">不能自调用声明的函数。</span></span><br><span class="line"><span class="comment">通过添加括号，来说明它是一个函数表达式：*/</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="string">"Hello!!"</span>;      <span class="comment">// 我将调用自己</span></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 箭头函数</span></span><br><span class="line"><span class="comment">/*(参数1, 参数2, …, 参数N) =&gt; &#123; 函数声明 &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">(参数1, 参数2, …, 参数N) =&gt; 表达式(单一)</span></span><br><span class="line"><span class="comment">相当于：(参数1, 参数2, …, 参数N) =&gt;&#123; return 表达式; &#125; */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 递归</span></span><br><span class="line"><span class="comment">// arguments.callee 指向正在执行的函数的指针</span></span><br><span class="line"><span class="comment">// 求阶乘</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num * <span class="built_in">arguments</span>.callee(num - <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 严格模式下不能访问arguments.callee 从而出错</span></span><br><span class="line"><span class="keyword">var</span> factorial2 = (<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num * f(num - <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 闭包</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 有权访问另一个函数作用域中的变量函数</span></span><br><span class="line"><span class="comment">* 由于闭包会携带包含它的函数的作用域，因此会比其他函数占用更多的内存。</span></span><br><span class="line"><span class="comment">* 过度使用闭包会导致内存占用过多</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数可以访问由函数内部定义的变量，如：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">return</span> a * a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数也可以访问函数外部定义的变量，如：</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">4</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a * a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 后面一个实例中， a 是一个 全局 变量。</span></span><br><span class="line"><span class="comment">在web页面中全局变量属于 window 对象</span></span><br><span class="line"><span class="comment">全局变量可应用于页面上的所有脚本。</span></span><br><span class="line"><span class="comment">在第一个实例中， a 是一个 局部 变量。</span></span><br><span class="line"><span class="comment">局部变量只能用于定义它函数内部。对于其他的函数或脚本代码是不可用的。</span></span><br><span class="line"><span class="comment">全局和局部变量即便名称相同，它们也是两个不同的变量。修改其中一个，不会影响另一个的值。 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 计数器困境</span></span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> counter += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">add();</span><br><span class="line">add();</span><br><span class="line">add();</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 计数器现在为 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*计数器数值在执行 add() 函数时发生变化。</span></span><br><span class="line"><span class="comment">但问题来了，页面上的任何脚本都能改变计数器，即便没有调用 add() 函数。</span></span><br><span class="line"><span class="comment">如果我在函数内声明计数器，如果没有调用函数将无法修改计数器的值：*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> counter += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">add();</span><br><span class="line">add();</span><br><span class="line">add();</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 本意是想输出 3, 但事与愿违，输出的都是 1 !</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//JavaScript 内嵌函数可以解决该问题。</span></span><br><span class="line"><span class="comment">/*所有函数都能访问全局变量。  </span></span><br><span class="line"><span class="comment">实际上，在 JavaScript 中，所有函数都能访问它们上一层的作用域。</span></span><br><span class="line"><span class="comment">JavaScript 支持嵌套函数。嵌套函数可以访问上一层的函数变量。</span></span><br><span class="line"><span class="comment">该实例中，内嵌函数 plus() 可以访问父函数的 counter 变量：*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">plus</span>(<span class="params"></span>) </span>&#123;counter += <span class="number">1</span>;&#125;</span><br><span class="line">    plus();    </span><br><span class="line">    <span class="keyword">return</span> counter; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*如果我们能在外部访问 plus() 函数，这样就能解决计数器的困境。</span></span><br><span class="line"><span class="comment">我们同样需要确保 counter = 0 只执行一次。</span></span><br><span class="line"><span class="comment">我们需要闭包。(closures)*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> add = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="keyword">return</span> counter += <span class="number">1</span>;&#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">add();</span><br><span class="line">add();</span><br><span class="line">add();</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 计数器为 3, 变量 add 指定了函数自我调用的返回字值。自我调用函数只执行一次。设置计数器为 0。并返回函数表达式。add变量可以作为一个函数使用。非常棒的部分是它可以访问函数上一层作用域的计数器。这个叫作 JavaScript 闭包。它使得函数拥有私有变量变成可能。计数器受匿名函数的作用域保护，只能通过 add 方法修改。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 关于this对象</span></span><br><span class="line"><span class="comment">// 在闭包中使用this对象也可能会导致一些问题。this对象是在运行时基于函数的执行</span></span><br><span class="line"><span class="comment">// 环境绑定的：在全局函数中，this等于window，而当函数被作为某个对象的方法调用</span></span><br><span class="line"><span class="comment">// 时，this等于那个对象。不过匿名函数的执行环境具有全局性，因此其this对象通常</span></span><br><span class="line"><span class="comment">// 指向window</span></span><br></pre></td></tr></table></figure>

<p>…</p>
<h4 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h4><p> Browser Object Model</p>
<p>BOM的解释是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BOM即浏览器对象模型。</span><br><span class="line">BOM提供了独立于内容 而与浏览器窗口进行交互的对象；</span><br><span class="line">由于BOM主要用于管理窗口与窗口之间的通讯，因此其核心对象是window；</span><br><span class="line">BOM由一系列相关的对象构成，并且每个对象都提供了很多方法与属性；</span><br><span class="line">BOM缺乏标准，JavaScript语法的标准化组织是ECMA，DOM的标准化组织是W3C，BOM最初是Netscape浏览器标准的一部分。</span><br></pre></td></tr></table></figure>

<p>使用BOM，开发者可以操控浏览器显示页面之外的部分。而它最独特的地方，就是问题最多的地方，激素它唯一一个没有相关标注的javascript实现。总体来说，BOM主要针对的是浏览器窗口和子窗口，但是通常会把任何特定于浏览器的扩展都归于在BOM的范畴内。下面是一些拓展：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">弹出新浏览器窗口的能力。</span><br><span class="line">移动、缩放和关闭浏览器窗口的详近信息。</span><br><span class="line">navigator对象，提供关于浏览器的详尽信息。</span><br><span class="line">location对象，提供浏览器加载页面的详尽信息。</span><br><span class="line">screen对象，提供关于用户屏幕分辨率的详尽信息。</span><br><span class="line">performance对象，提供浏览器内存占用、导航行为和时间统计的详尽信息。</span><br><span class="line">对cookie的支持。</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 如果页面中包含框架（frame），则每个框架都拥有自己的window对象，并且保存在frames集合中</span></span><br><span class="line"><span class="comment">* 在frames集合中，可以通过数值索引（从0开开始，从左到右，从上到下）或者框架名来访问相应</span></span><br><span class="line"><span class="comment">* 的window对象。每个window对象都有一个name属性，其中包含框架名称。</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 窗口位置（screenLeft，screenTop）</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* moveTo()接收新位置</span></span><br><span class="line"><span class="comment">* moveBy()接收的是水平和垂直方向上移动的像素数</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 窗口大小</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 不同浏览器之间的差异性</span></span><br><span class="line"><span class="comment">* IE9+，Safari和Firefox中，outerWidth，outHeight，返回浏览器窗口本身的尺寸。Opera中，这</span></span><br><span class="line"><span class="comment">* 两个属性的值表示视图容器（Opera中单个标签页对应的浏览器窗口）的大小。innerWidth和</span></span><br><span class="line"><span class="comment">* innerHeight则表示该容器中页面视图区的大小（减去边框宽度）。在Chrome中，outerWidth、</span></span><br><span class="line"><span class="comment">* outerHeight与innerWidth、innerHeight返回相同的值，即视口大小（viewport）大小而非浏览</span></span><br><span class="line"><span class="comment">* 器窗口大小</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* IE、Firefox,Safari,Opera,和Chrome中document.documentElement.clientWidth 和 document.</span></span><br><span class="line"><span class="comment">* documentElement.clientHeight中保存了页面视口信息。在ie6中，这些属性必须在标准模式下才</span></span><br><span class="line"><span class="comment">* 有效。如果是混杂模式，就必须通过document.body.clientWidth和document.body.clientHeight</span></span><br><span class="line"><span class="comment">* 取得相同信息。而对于混杂模式下的Chrome，则无论通过document.documentElement还是document。</span></span><br><span class="line"><span class="comment">* body中的clientWidth和clientHeight属性都可以获取视口的大小</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 获取页面视口大小</span></span><br><span class="line"><span class="keyword">var</span> pageWidth = <span class="built_in">window</span>.innerWidth,</span><br><span class="line">    pageHeight = <span class="built_in">window</span>.innerHeight;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> pageWidth !== <span class="string">"number"</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.compatMode === <span class="string">"CSS1Compat"</span>) &#123;<span class="comment">//是否处于标准模式</span></span><br><span class="line">        pageWidth = <span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line">        pageHeight = <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        pageWidth = <span class="built_in">document</span>.body.clientWidth;</span><br><span class="line">        pageHeight = <span class="built_in">document</span>.body.clientHeight;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 在移动端：视口信息保存在document.body.clientWidth和document.body.clientHeight中</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 调整浏览器窗口大小</span></span><br><span class="line"><span class="comment">* resizeTo() 接收浏览器窗口的新宽度和新高度</span></span><br><span class="line"><span class="comment">* resizeBy() 接收新窗口与原窗口的宽高差值</span></span><br><span class="line"><span class="comment">* moveTo() 移动位置</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 导航和打开窗口</span></span><br><span class="line"><span class="comment">// 弹出窗口 window.open()（大多数浏览器会屏蔽窗口弹框）</span></span><br><span class="line"><span class="comment">// 安全限制</span></span><br><span class="line"><span class="comment">// 弹出窗口屏蔽程序</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 间歇调用和超时调用</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 间歇调用：setInterval(function()&#123;&#125;,time)</span></span><br><span class="line"><span class="comment">* 超时调用：setTimeout(function()&#123;&#125;,time)</span></span><br><span class="line"><span class="comment">* 清除：clearInterval(intervalId) clearTimeout(timer)</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 间歇和超时调用的代码都是在全局作用域中执行的，因此函数中的this的值在非严格</span></span><br><span class="line"><span class="comment">* 模式下指向window对象，在严格模式下是undefined</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 系统对话框</span></span><br><span class="line"><span class="comment">// alert()(提示文本、确认) confirm()（提示文本、取消、确定） prompt(文本、输</span></span><br><span class="line"><span class="comment">// 入框、取消、确认)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// location 对象</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* location对象的所有属性</span></span><br><span class="line"><span class="comment">* hash  '#contents' 返回URL中的hash（#号后跟零或多个字符），如果URL中不包含散列，</span></span><br><span class="line"><span class="comment">* 则返回空字符串</span></span><br><span class="line"><span class="comment">* host  'www.wrox.com:80' 返回服务器名称和端口号（如果有）</span></span><br><span class="line"><span class="comment">* hostname  'www.wrox.com' 返回不带端口号的服务名称</span></span><br><span class="line"><span class="comment">* href  'http:/www.wrox.com' 返回当前加载页面的完整URL。而location对象的toString（）</span></span><br><span class="line"><span class="comment">* 方法也返回这个值</span></span><br><span class="line"><span class="comment">* pathname '/WileyCDA/'  返回URL中的目录和（或）文件名</span></span><br><span class="line"><span class="comment">* port  '8080'  返回URL中指定的端口号。如果URL中不包含端口号，则这个属性返回空字符串</span></span><br><span class="line"><span class="comment">* protocol  'http'  返回页面使用的协议。通常是http：或https:</span></span><br><span class="line"><span class="comment">* search  '?q=javascript'  返回URL的查询字符串。这个字符串以问号开头</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询字符串参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getQueryStringArgs</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//查询字符串并去掉开头的问号</span></span><br><span class="line">    <span class="keyword">var</span> qs = (location.search.length &gt; <span class="number">0</span> ? location.search.substring(<span class="number">1</span>) : <span class="string">""</span>),</span><br><span class="line">        <span class="comment">// 保存数据的对象</span></span><br><span class="line">        args = &#123;&#125;,</span><br><span class="line">        <span class="comment">//取得每一项</span></span><br><span class="line">        items = qs.length ? qs.split(<span class="string">"&amp;"</span>) : [],</span><br><span class="line">        item = <span class="literal">null</span>,</span><br><span class="line">        name = <span class="literal">null</span>,</span><br><span class="line">        value = <span class="literal">null</span>,</span><br><span class="line">        <span class="comment">//在for循环中使用</span></span><br><span class="line">        i = <span class="number">0</span>,</span><br><span class="line">        len = items.length;</span><br><span class="line">    <span class="comment">//逐个将每一项添加到args对象中</span></span><br><span class="line">    <span class="keyword">for</span> (; i &lt; len; i++) &#123;</span><br><span class="line">        item = items[i].split(<span class="string">"="</span>);</span><br><span class="line">        name = <span class="built_in">decodeURIComponent</span>(item[<span class="number">0</span>]);</span><br><span class="line">        value = <span class="built_in">decodeURIComponent</span>(item[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">if</span> (name.length) &#123;</span><br><span class="line">            args[name] = value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> args;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 位置操作</span></span><br><span class="line"><span class="comment">// location.assign()</span></span><br><span class="line"><span class="comment">// location.href</span></span><br><span class="line"><span class="comment">// window.location</span></span><br><span class="line"><span class="comment">// location.replace() 浏览器位置改变，但不会在历史记录中生成新记录。所以跳转后不能后退</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// navigator 用于检测浏览器类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检测插件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// screen 对象表明客户端的能力</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// history 对象</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*history.go()可以在历史记录中任意跳转</span></span><br><span class="line"><span class="comment">*history.back() 后退</span></span><br><span class="line"><span class="comment">* history.forward() 前进</span></span><br><span class="line"><span class="comment">* history.length 历史记录的数量</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure>

<h4 id="客户端检测"><a href="#客户端检测" class="headerlink" title="客户端检测"></a>客户端检测</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 能力检测</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 在实际开发中，应该讲能力检测作为确定下一步解决方案的依据，而不是用它来判断浏览器</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 怪癖检测</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户代理检测</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户代理字符串检测技术（navigator.userAgent）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> browser=&#123;</span><br><span class="line">    versions:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> u = navigator.userAgent, app = navigator.appVersion;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            trident: u.indexOf(<span class="string">'Trident'</span>) &gt; <span class="number">-1</span>, <span class="comment">//IE内核</span></span><br><span class="line">            presto: u.indexOf(<span class="string">'Presto'</span>) &gt; <span class="number">-1</span>, <span class="comment">//opera内核</span></span><br><span class="line">            webKit: u.indexOf(<span class="string">'AppleWebKit'</span>) &gt; <span class="number">-1</span>, <span class="comment">//苹果、谷歌内核</span></span><br><span class="line">            gecko: u.indexOf(<span class="string">'Gecko'</span>) &gt; <span class="number">-1</span> &amp;&amp; u.indexOf(<span class="string">'KHTML'</span>) == <span class="number">-1</span>,<span class="comment">//火狐内核</span></span><br><span class="line">            mobile: !!u.match(<span class="regexp">/AppleWebKit.*Mobile.*/</span>), <span class="comment">//是否为移动终端</span></span><br><span class="line">            ios: !!u.match(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>), <span class="comment">//ios终端</span></span><br><span class="line">            android: u.indexOf(<span class="string">'Android'</span>) &gt; <span class="number">-1</span> || u.indexOf(<span class="string">'Linux'</span>) &gt; <span class="number">-1</span>, <span class="comment">//android终端或者uc浏览器</span></span><br><span class="line">            iPhone: u.indexOf(<span class="string">'iPhone'</span>) &gt; <span class="number">-1</span> , <span class="comment">//是否为iPhone或者QQHD浏览器</span></span><br><span class="line">            iPad: u.indexOf(<span class="string">'iPad'</span>) &gt; <span class="number">-1</span>, <span class="comment">//是否iPad</span></span><br><span class="line">            webApp: u.indexOf(<span class="string">'Safari'</span>) == <span class="number">-1</span>, <span class="comment">//是否web应该程序，没有头部与底部</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;(),</span><br><span class="line">    language:(navigator.browserLanguage || navigator.language).toLowerCase()</span><br><span class="line">&#125;</span><br><span class="line">alert(<span class="built_in">JSON</span>.stringify(browser));</span><br><span class="line"><span class="keyword">if</span> (browser.versions.mobile) &#123;<span class="comment">//判断是否是移动设备打开。browser代码在下面</span></span><br><span class="line">    <span class="keyword">var</span> ua = navigator.userAgent.toLowerCase();<span class="comment">//获取判断用的对象</span></span><br><span class="line">    <span class="keyword">if</span> (ua.match(<span class="regexp">/MicroMessenger/i</span>) === <span class="string">"micromessenger"</span>) &#123;</span><br><span class="line">        <span class="comment">//在微信中打开</span></span><br><span class="line">        alert(<span class="string">"微信"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ua.match(<span class="regexp">/QQ/i</span>) === <span class="string">"qq"</span>)&#123;</span><br><span class="line">        alert(<span class="string">"qq"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (ua.match(<span class="regexp">/WeiBo/i</span>) === <span class="string">"weibo"</span>) &#123;</span><br><span class="line">        <span class="comment">//在新浪微博客户端打开</span></span><br><span class="line">        alert(<span class="string">"新浪微博客户端"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (browser.versions.ios) &#123;</span><br><span class="line">        <span class="comment">//是否在IOS浏览器打开</span></span><br><span class="line">        alert(<span class="string">"ios"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(browser.versions.android)&#123;</span><br><span class="line">        <span class="comment">//是否在安卓浏览器打开</span></span><br><span class="line">        alert(<span class="string">"安卓浏览器"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//否则就是PC浏览器打开</span></span><br><span class="line">    alert(<span class="string">"pc"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h4><p>当网页被加载时，浏览器会创建页面的文档对象模型（Document Object Model）。</p>
<p><strong>HTML DOM</strong> 模型被构造为<strong>对象</strong>的树：</p>
<p><img src="https://raw.githubusercontent.com/FlyMeToTheMars/PictureRepo/main/img/202208191115526.png" alt="image-20220819111052132"></p>
<p>通过可编程的对象模型，JavaScript 获得了足够的能力来创建动态的 HTML。</p>
<ul>
<li>JavaScript 能够改变页面中的所有 HTML 元素</li>
<li>JavaScript 能够改变页面中的所有 HTML 属性</li>
<li>JavaScript 能够改变页面中的所有 CSS 样式</li>
<li>JavaScript 能够对页面中的所有事件做出反应</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DOM（文档对象模型）</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 是针对HTML和XML文档的一个API（应用程序编程接口）。dom描绘了一个层次化的节点树，允许开发人员</span></span><br><span class="line"><span class="comment">* 添加、移除和修改页面的某一部分。dom脱胎于DHTML（动态HTML）。</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// node类型</span></span><br><span class="line"><span class="comment">// nodeType</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Node.ELEMENT_NODE (1)</span></span><br><span class="line"><span class="comment">Node.ATTRIBUTE_NODE (2)</span></span><br><span class="line"><span class="comment">Node.TEXT_NODE (3)</span></span><br><span class="line"><span class="comment">Node.CDATA_SECTION_NODE (4)</span></span><br><span class="line"><span class="comment">Node.ENTITY_REFERENCE_NODE (5)</span></span><br><span class="line"><span class="comment">Node.ENTITY_NODE (6)</span></span><br><span class="line"><span class="comment">Node.PROCESSING_INSTRUCTION_NODE (7)</span></span><br><span class="line"><span class="comment">Node.COMMENT_NODE (8)</span></span><br><span class="line"><span class="comment">Node.DOCUMENT_NODE (9)</span></span><br><span class="line"><span class="comment">Node.DOCUMENT_TYPE_NODE (10)</span></span><br><span class="line"><span class="comment">Node.DOCUMENT_FRAGMENT_NODE (11)</span></span><br><span class="line"><span class="comment">Node.NOTATION_NODE (12)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// nodeName(标签名) nodeValue（null）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// node 节点之间的关系</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* parentNode 父节点</span></span><br><span class="line"><span class="comment">* childNodes 子节点</span></span><br><span class="line"><span class="comment">* firstChild 第一个子节点</span></span><br><span class="line"><span class="comment">* lastChild  最后一个子节点</span></span><br><span class="line"><span class="comment">* nextSibling 下一个子节点</span></span><br><span class="line"><span class="comment">* previousSibling 上一个子节点</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* hasChildNodes()</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作节点</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* appendChild() 向childNodes列表的末尾添加一个节点</span></span><br><span class="line"><span class="comment">* insertBefore() 要插入的节点和作为参照的节点如果参照节点为null则和appendChild()一样</span></span><br><span class="line"><span class="comment">* replaceChild() 替换节点</span></span><br><span class="line"><span class="comment">* removeChild() 移除节点</span></span><br><span class="line"><span class="comment">* cloneNode() 复制节点</span></span><br><span class="line"><span class="comment">* normalize() 处理文档树中的文本节点</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Document</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* nodeType 9</span></span><br><span class="line"><span class="comment">* nodeName #document</span></span><br><span class="line"><span class="comment">* nodeValue null</span></span><br><span class="line"><span class="comment">* parentNode null</span></span><br><span class="line"><span class="comment">* ownerDocument null</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 文档信息</span></span><br><span class="line"><span class="comment">// 查找元素</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* document.getElementById() 通过ID</span></span><br><span class="line"><span class="comment">* document.getElementsByTagName() 通过标签名</span></span><br><span class="line"><span class="comment">* document.getElementByName() 通过name属性值</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// DOM一致性检测</span></span><br><span class="line"><span class="comment">// 文档写入</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* write()</span></span><br><span class="line"><span class="comment">* writeln()</span></span><br><span class="line"><span class="comment">* open()</span></span><br><span class="line"><span class="comment">* close()</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Element</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* nodeType:1</span></span><br><span class="line"><span class="comment">* nodeName的值为元素的标签名</span></span><br><span class="line"><span class="comment">* nodeValue null</span></span><br><span class="line"><span class="comment">* parentNode Document 或 Element</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">//  html 元素</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* id,元素文档中的唯一标识符</span></span><br><span class="line"><span class="comment">* title,有关元素的附加说明信息</span></span><br><span class="line"><span class="comment">* lang,元素内容的语言代码，很少使用</span></span><br><span class="line"><span class="comment">* dir,语言的方向，很少使用</span></span><br><span class="line"><span class="comment">* className,与元素的class特性对应，即为元素指定Css类</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 取得特性</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*getAttribute()</span></span><br><span class="line"><span class="comment">*setAttribute()</span></span><br><span class="line"><span class="comment">*removeAttribute()</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建元素</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* document.createElement()</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 元素的子节点（childNodes）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// text类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* nodeType 3</span></span><br><span class="line"><span class="comment">* nodeName #text</span></span><br><span class="line"><span class="comment">* nodeValue 节点所包含的文本</span></span><br><span class="line"><span class="comment">* parentNode Element</span></span><br><span class="line"><span class="comment">* appendData(text) 将text添加到节点末尾</span></span><br><span class="line"><span class="comment">* deleteData（offset，count）从offset指定位置删除count个字符</span></span><br><span class="line"><span class="comment">* insertData（offset,text）在offset指定的位置插入text</span></span><br><span class="line"><span class="comment">* replaceData（offset，count，text）用text替换从offset指定位置到offset+count为止处的文本</span></span><br><span class="line"><span class="comment">* splitText(offset) 从offset指定位置将当前文本节点分成两个文本节点</span></span><br><span class="line"><span class="comment">* substringData(offset,count) 提取从offset指定位置开始到offset+count为止处的字符串</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 创建文本节点</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* document.createTextNode()</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 规范化文本节点（normalize()）</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 将所有文本节点合并成一个节点，结果节点的nodeValue等于合并前每个文本节点的nodeValue值拼</span></span><br><span class="line"><span class="comment">* 起来的值</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 分割文本节点 （splitText()） 与 normalize()相反</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Comment 类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* nodeType 8</span></span><br><span class="line"><span class="comment">* nodeName #comment</span></span><br><span class="line"><span class="comment">* nodeValue 注释的内容</span></span><br><span class="line"><span class="comment">* parentNode Document或Element</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 创建 document.createComment()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// CDATASection 类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* nodeType 4</span></span><br><span class="line"><span class="comment">* nodeName #cdata-section</span></span><br><span class="line"><span class="comment">* nodeValue CDATA 区域的内容</span></span><br><span class="line"><span class="comment">* parentNode 可能是Document 或 Element</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// DocumentType类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* nodeType 10</span></span><br><span class="line"><span class="comment">* nodeName doctype的名称</span></span><br><span class="line"><span class="comment">* nodeValue null</span></span><br><span class="line"><span class="comment">* parentNode Document</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// DocumentFragment 类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* nodeType 11</span></span><br><span class="line"><span class="comment">* nodeName #document-fragment</span></span><br><span class="line"><span class="comment">* nodeValue null</span></span><br><span class="line"><span class="comment">* parentNode null</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 document.createDocumentFragment()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Attr类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* nodeType 2</span></span><br><span class="line"><span class="comment">* nodeName 特性的名称</span></span><br><span class="line"><span class="comment">* nodeValue 特性的值</span></span><br><span class="line"><span class="comment">* parentNode null</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 创建 document.createAttribute()</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 不建议直接访问特性节点。实际上，使用getAttribute(),setAttribute()和removeAttribute()</span></span><br><span class="line"><span class="comment">* 方法远比操作特性节点方便</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// DOM操作技术</span></span><br><span class="line"><span class="comment">// 动态添加脚本</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span>(<span class="params">url</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">    script.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">    script.src = url;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(script);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 动态添加代码</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScriptString</span>(<span class="params">code</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">    script.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        script.appendChild(<span class="built_in">document</span>.createTextNode(code));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ex)&#123;</span><br><span class="line">        script.text = code;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(script);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 动态添加样式表</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadStyles</span>(<span class="params">url</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> link = <span class="built_in">document</span>.createElement(<span class="string">"link"</span>);</span><br><span class="line">    link.rel = <span class="string">"stylesheet"</span>;</span><br><span class="line">    link.type = <span class="string">"text/css"</span>;</span><br><span class="line">    link.href = url;</span><br><span class="line">    <span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>];</span><br><span class="line">    head.appendChild(link);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 动态添加css</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadStyleString</span>(<span class="params">css</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> style = <span class="built_in">document</span>.createElement(<span class="string">"style"</span>);</span><br><span class="line">    style.type = <span class="string">"text/css"</span>;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        style.appendChild(<span class="built_in">document</span>.createTextNode(css));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ex)&#123;</span><br><span class="line">        style.styleSheet.cssText = css;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>];</span><br><span class="line">    head.appendChild(style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 如果专门针对IE编写代码，务必小心使用styleSheet.cssText属性。在重用同一个&lt;style&gt;元素</span></span><br><span class="line"><span class="comment">* 并再次设置这个属性时，有可能会导致浏览器奔溃。同样，将cssText属性设置为空字符串也可</span></span><br><span class="line"><span class="comment">* 能导致浏览器奔溃</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作表格</span></span><br><span class="line"><span class="comment">// 创建表格</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">html 创建</span></span><br><span class="line"><span class="comment">&lt;table border="1" width="100%"&gt;</span></span><br><span class="line"><span class="comment">    &lt;tbody&gt;</span></span><br><span class="line"><span class="comment">        &lt;tr&gt;</span></span><br><span class="line"><span class="comment">            &lt;td&gt;Cell 1,1&lt;/td&gt;</span></span><br><span class="line"><span class="comment">            &lt;td&gt;Cell 2,1&lt;/td&gt;</span></span><br><span class="line"><span class="comment">        &lt;/tr&gt;</span></span><br><span class="line"><span class="comment">        &lt;tr&gt;</span></span><br><span class="line"><span class="comment">            &lt;td&gt;Cell 1,2&lt;/td&gt;</span></span><br><span class="line"><span class="comment">            &lt;td&gt;Cell 2,2&lt;/td&gt;</span></span><br><span class="line"><span class="comment">        &lt;/tr&gt;</span></span><br><span class="line"><span class="comment">    &lt;/tbody&gt;</span></span><br><span class="line"><span class="comment">&lt;/table&gt;</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 核心dom创建</span></span><br><span class="line"><span class="comment">//创建 table</span></span><br><span class="line"><span class="keyword">var</span> table = <span class="built_in">document</span>.createElement(<span class="string">"table"</span>);</span><br><span class="line">table.border = <span class="string">'1'</span>;</span><br><span class="line">table.width = <span class="string">"100%"</span>;</span><br><span class="line"><span class="comment">//创建 tbody</span></span><br><span class="line"><span class="keyword">var</span> tbody = <span class="built_in">document</span>.createElement(<span class="string">"tbody"</span>);</span><br><span class="line">table.appendChild(tbody);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建 第一行</span></span><br><span class="line"><span class="keyword">var</span> row1 = <span class="built_in">document</span>.createElement(<span class="string">"tr"</span>);</span><br><span class="line">tbody.appendChild(row1);</span><br><span class="line"><span class="keyword">var</span> cell1_1 = <span class="built_in">document</span>.createElement(<span class="string">"td"</span>);</span><br><span class="line">cell1_1.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"Cell 1,1"</span>));</span><br><span class="line">row1.appendChild(cell1_1);</span><br><span class="line"><span class="keyword">var</span> cell2_1 = <span class="built_in">document</span>.createElement(<span class="string">"td"</span>);</span><br><span class="line">cell2_1.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"Cell 2,1"</span>));</span><br><span class="line">row1.appendChild(cell2_1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建 第二行</span></span><br><span class="line"><span class="keyword">var</span> row2 = <span class="built_in">document</span>.createElement(<span class="string">"tr"</span>);</span><br><span class="line">tbody.appendChild(row2);</span><br><span class="line"><span class="keyword">var</span> cell1_2 = <span class="built_in">document</span>.createElement(<span class="string">"td"</span>);</span><br><span class="line">cell1_2.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"Cell 1,2"</span>));</span><br><span class="line">row2.appendChild(cell1_2);</span><br><span class="line"><span class="keyword">var</span> cell2_2= <span class="built_in">document</span>.createElement(<span class="string">"td"</span>);</span><br><span class="line">cell2_2.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"Cell 2,2"</span>));</span><br><span class="line">row2.appendChild(cell2_2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//将表格添加到文档主体中</span></span><br><span class="line"><span class="built_in">document</span>.body.appendChild(table);</span><br><span class="line"></span><br><span class="line"><span class="comment">// HTMLDOM</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 为table元素添加的属性和方法</span></span><br><span class="line"><span class="comment">* caption &lt;caption&gt;元素的指针</span></span><br><span class="line"><span class="comment">* tBodies 是一个&lt;tbody&gt;元素的HTMLCollection</span></span><br><span class="line"><span class="comment">* tFoot tfoot元素指针</span></span><br><span class="line"><span class="comment">* tHead thead元素指针</span></span><br><span class="line"><span class="comment">* rows 表格中所有行的HTMLCollection</span></span><br><span class="line"><span class="comment">* createThead() 创建thead</span></span><br><span class="line"><span class="comment">* createTFoot() 创建tfoot</span></span><br><span class="line"><span class="comment">* createCaption() 创建caption</span></span><br><span class="line"><span class="comment">* deleteThead() 删除thead</span></span><br><span class="line"><span class="comment">* deleteTFoot() 删除tfood</span></span><br><span class="line"><span class="comment">* deleteRow(pos) 删除指定位置行</span></span><br><span class="line"><span class="comment">* insertRow(pos) 向rows集合中的指定位置插入一行</span></span><br><span class="line"><span class="comment">* 为tbody元素添加的属性和方法</span></span><br><span class="line"><span class="comment">* rows 保存着tbody元素中行的HTMLCollection</span></span><br><span class="line"><span class="comment">* deleteRow(pos) 删除指定行</span></span><br><span class="line"><span class="comment">* insertRow(pos) 向rows集合中的指定位置插入一行，返回对新插入的引用</span></span><br><span class="line"><span class="comment">* 为tr元素添加的属性和方法</span></span><br><span class="line"><span class="comment">* cells 保存这tr元素中单元格的HTMLCollection</span></span><br><span class="line"><span class="comment">* deleteCell(pos) ...</span></span><br><span class="line"><span class="comment">* insertCell(pos) ...</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// HTMLDOM</span></span><br><span class="line"><span class="comment">//创建 table</span></span><br><span class="line"><span class="keyword">var</span> table = <span class="built_in">document</span>.createElement(<span class="string">"table"</span>);</span><br><span class="line">table.border = <span class="number">1</span>;</span><br><span class="line">table.width = <span class="string">"100%"</span>;</span><br><span class="line"><span class="comment">//创建 tbody</span></span><br><span class="line"><span class="keyword">var</span> tbody = <span class="built_in">document</span>.createElement(<span class="string">"tbody"</span>);</span><br><span class="line">table.appendChild(tbody);</span><br><span class="line"><span class="comment">// 创建第一行</span></span><br><span class="line"></span><br><span class="line">tbody.insertRow(<span class="number">0</span>);</span><br><span class="line">tbody.rows[<span class="number">0</span>].insertCell(<span class="number">0</span>);</span><br><span class="line">tbody.rows[<span class="number">0</span>].cells[<span class="number">0</span>].appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"Cell 1,1"</span>));</span><br><span class="line">tbody.rows[<span class="number">0</span>].insertCell(<span class="number">1</span>);</span><br><span class="line">tbody.rows[<span class="number">0</span>].cells[<span class="number">1</span>].appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"Cell 2,1"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建第二行</span></span><br><span class="line">tbody.insertRow(<span class="number">1</span>);</span><br><span class="line">tbody.rows[<span class="number">1</span>].insertCell(<span class="number">0</span>);</span><br><span class="line">tbody.rows[<span class="number">1</span>].cells[<span class="number">0</span>].appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"Cell 1,2"</span>));</span><br><span class="line">tbody.rows[<span class="number">1</span>].insertCell(<span class="number">1</span>);</span><br><span class="line">tbody.rows[<span class="number">1</span>].cells[<span class="number">1</span>].appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"Cell 2,2"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//将表格添加到文档主体中</span></span><br><span class="line"><span class="built_in">document</span>.body.appendChild(table);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用NodeList</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* NodeList、NameNodeMap、HTMLCollection这3个都是动态的；换句话来说，每当文档结构发生变化</span></span><br><span class="line"><span class="comment">* 时，他们都会得到跟新。因此，他们始终会保存这最新、最准确的信息</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 迭代NodeList</span></span><br><span class="line"><span class="keyword">var</span> divs = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"div"</span>),</span><br><span class="line">    i,</span><br><span class="line">    len,</span><br><span class="line">    div;</span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>, len=divs.length; i &lt; len; i++)&#123;</span><br><span class="line">    div = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(div);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 选择符API</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> querySelector(selector) 接收一个CSS选择符，返回与该模式匹配的第一个元素，如果没有找到匹</span></span><br><span class="line"><span class="comment"> 配元素，返回null</span></span><br><span class="line"><span class="comment"> querySelectorAll(selector) 接收一个CSS选择符，返回一个NodeList的实例，没有匹配NodeList就</span></span><br><span class="line"><span class="comment"> 是空的</span></span><br><span class="line"><span class="comment"> matchesSelector(selector) 接收一个CSS选择符，如果调用元素与选择符匹配则返回true否则返回</span></span><br><span class="line"><span class="comment"> false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 元素遍历</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 对于元素间的空格，IE9以及之前版本不会返回文本节点，而其他所有浏览器都会返回文本节点。这</span></span><br><span class="line"><span class="comment">* 样就导致了使用childNodes和firstChild等属性时的行为不一致。</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* childElementCount 返回子元素（不包括文本节点和注释）的个数</span></span><br><span class="line"><span class="comment">* firstElementChild 指向第一个子元素：firstChild 元素版</span></span><br><span class="line"><span class="comment">* lastElementChild 指向最后一个子元素；lastChild 元素版</span></span><br><span class="line"><span class="comment">* previousElementSibling 前一个同辈元素 previousSibling 元素版</span></span><br><span class="line"><span class="comment">* nextElementSibling 后一个同辈元素 nextSibling 元素版</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// HTML5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 与类相关的扩充</span></span><br><span class="line"><span class="comment">// 通过class名获取NodeList</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* getElementsByClassName() 接收一个参数，包含一个或多个类名的字符串，返回带有指定类的所有</span></span><br><span class="line"><span class="comment">* 元素的NodeList。传入多个类名时，类名的先后不重要</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// classList</span></span><br><span class="line"><span class="comment">// 在没有classList之前</span></span><br><span class="line"><span class="comment">//删除"user"</span></span><br><span class="line"><span class="comment">//首先 取得类名字符串并拆分成数组</span></span><br><span class="line"><span class="keyword">var</span> classNames = div.className.split(<span class="regexp">/\s+/</span>);</span><br><span class="line"><span class="comment">//找到要删的类名</span></span><br><span class="line"><span class="keyword">var</span> pos = <span class="number">-1</span>,</span><br><span class="line">    i,</span><br><span class="line">    len;</span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>, len=classNames.length; i &lt; len; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (classNames[i] === <span class="string">"user"</span>)&#123;</span><br><span class="line">        pos = i;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//删除类名</span></span><br><span class="line">classNames.splice(i,<span class="number">1</span>);</span><br><span class="line"><span class="comment">//把剩下的类名拼成字符串并重新设置</span></span><br><span class="line">div.className = classNames.join(<span class="string">" "</span>);</span><br><span class="line"><span class="comment">// 使用classList</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* add(value) 将指定字符串添加到列表中。如果已存在就不添加了</span></span><br><span class="line"><span class="comment">* contains(value) 是否存在给定的值 返回 true或false</span></span><br><span class="line"><span class="comment">* remove(value) 从列表中删除给定的字符串</span></span><br><span class="line"><span class="comment">* toggle(value) 如果列表中已存在给定的值，删除它；不存在添加它</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line">div.classList.remove(<span class="string">"disabled"</span>);</span><br><span class="line">div.classList.add(<span class="string">"current"</span>);</span><br><span class="line">div.classList.toggle(<span class="string">"user"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 焦点管理</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* document.activeElement</span></span><br><span class="line"><span class="comment">* focus()</span></span><br><span class="line"><span class="comment">* document.hsaFocus()</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// HTMLDocument的变化</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* readyState 属性 loading 正在加载文档 complete 已加载完毕文档</span></span><br><span class="line"><span class="comment">* compatMode 兼容模式 CSS1Compat 标准模式 BackCompat 混杂模式</span></span><br><span class="line"><span class="comment">* head 属性</span></span><br><span class="line"><span class="comment">* charset 字符集属性</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义数据属性</span></span><br><span class="line"><span class="comment">// &lt;div id="myDiv" data-appId="12345" data-myname="Nicholas"&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>);</span><br><span class="line"><span class="comment">//获取自定义属性的值</span></span><br><span class="line"><span class="keyword">var</span> appId = div.dataset.appId;</span><br><span class="line"><span class="keyword">var</span> myName = div.dataset.myname;</span><br><span class="line"><span class="comment">//设置值</span></span><br><span class="line">div.dataset.appId = <span class="number">23456</span>;</span><br><span class="line">div.dataset.myname = <span class="string">"Michael"</span>;</span><br><span class="line"><span class="comment">//是否存在mynamez值</span></span><br><span class="line"><span class="keyword">if</span> (div.dataset.myname)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Hello, "</span> + div.dataset.myname);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入标记</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* innerHTML</span></span><br><span class="line"><span class="comment">* outerHtml</span></span><br><span class="line"><span class="comment">* insertAdjacentHTML 接收两各参数 插入位置和HTML文本 第一个参数必须是下面参数之一</span></span><br><span class="line"><span class="comment">*   beforebegin 在元素之前插入一个紧邻的同辈元素</span></span><br><span class="line"><span class="comment">*   afterbegin 在当前元素之下插入一个新的子元素或在第一个子元素之前再插入新的子元素</span></span><br><span class="line"><span class="comment">*   beforeend  在当前元素之下插入一个新的子元素或在第一个子元素之后再插入新的子元素</span></span><br><span class="line"><span class="comment">*   afterend 在当前元素之后插入一个紧邻的同辈元素</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// scrollIntoView() true</span></span><br><span class="line"><span class="comment">// document.forms[0].scrollIntoView();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 文档模式</span></span><br><span class="line"><span class="comment">// &lt;meta http-equiv="X-UA-Compatible" content="IE=IEVersion"&gt;</span></span><br><span class="line"><span class="comment">// IEVersion 可以是 任意IE版本浏览器如7,8,9</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 强制IE用某种模式渲染</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// children 属性</span></span><br><span class="line"><span class="comment">// contains() 方法 判断一个节点是否包含另一个节点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入文本</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* innerText</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* innerText和textContent返回的内容并不完全一样。innerText会忽略行内样式和脚本，</span></span><br><span class="line"><span class="comment">* 而textContent则会像返回其他文本一样返回行内的样式和脚本代码。</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* outerText 属性 作用范围扩大到了调用它的节点，其他和innerText一样</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 滚动</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* scrollIntoViewIfNeeded(alignCenter)  （Safari，chrome）</span></span><br><span class="line"><span class="comment">* scrollByLines(lineCount) （Safari，chrome）</span></span><br><span class="line"><span class="comment">* scrollByPages(pageCount) （Safari，chrome）</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dom 变化</span></span><br><span class="line"><span class="comment">// 访问元素的样式</span></span><br><span class="line"><span class="comment">// style</span></span><br><span class="line"><span class="comment">// dom 2 添加的属性和方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* cssText 访问style特性中的css代码</span></span><br><span class="line"><span class="comment">* length css属性个数</span></span><br><span class="line"><span class="comment">* parentRule 表示CSS信息的CSSRule对象</span></span><br><span class="line"><span class="comment">* getPropertyCSSValue(propertyName) 返回包含给定属性的CSSValue对象</span></span><br><span class="line"><span class="comment">* getPropertyPriority(propertyName) 如果给定了！important返回important 否则返回空字符串</span></span><br><span class="line"><span class="comment">* getPropertyValue(propertyName) 给定属性的字符串值</span></span><br><span class="line"><span class="comment">* item(index) 返回给定位置的CSS属性名称</span></span><br><span class="line"><span class="comment">* removeProperty(propertyName) 从样式中删除给定属性</span></span><br><span class="line"><span class="comment">*  setProperty(propertyName,value,priority) 将给定属性设置为相应的值，并加上优先级标志</span></span><br><span class="line"><span class="comment">*  （important 或一个空字符串）</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// getComputedStyle() 获取style和从css中设置的样式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作样式表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 元素大小</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 偏移量</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* offsetHeight()(边框、内边距、内容)</span></span><br><span class="line"><span class="comment">* offsetWidth()</span></span><br><span class="line"><span class="comment">* offsetLeft()</span></span><br><span class="line"><span class="comment">* offsetTop()</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 所有这些偏移量属性都是只读的，而且每次访问都要重新计算。因此尽量避免重复访问这些值</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户区大小</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* clientWidth(内容+内边距)</span></span><br><span class="line"><span class="comment">* clientHeight</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getViewport</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.compatMode === <span class="string">"BackCompat"</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            width: <span class="built_in">document</span>.body.clientWidth,</span><br><span class="line">            height: <span class="built_in">document</span>.body.clientHeight</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            width: <span class="built_in">document</span>.documentElement.clientWidth,</span><br><span class="line">            height: <span class="built_in">document</span>.documentElement.clientHeight</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 与偏移量相似，客户区打小也是只读的，每次访问要重新计算</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 滚动大小（包含滚动内容的元素大小）隐藏部分也包含在内</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* scrollHeight()</span></span><br><span class="line"><span class="comment">* scrollWidth()</span></span><br><span class="line"><span class="comment">* scrollLeft() 改变滚动位置</span></span><br><span class="line"><span class="comment">* scrollTop()</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 文档总高度</span></span><br><span class="line"><span class="keyword">var</span> docHeight = <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.scrollHeight,</span><br><span class="line">    <span class="built_in">document</span>.documentElement.clientHeight);</span><br><span class="line"><span class="keyword">var</span> docWidth = <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.scrollWidth,</span><br><span class="line">    <span class="built_in">document</span>.documentElement.clientWidth);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取元素大小（跨浏览器）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBoundingClientRect</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> scrollTop = <span class="built_in">document</span>.documentElement.scrollTop;</span><br><span class="line">    <span class="keyword">var</span> scrollLeft = <span class="built_in">document</span>.documentElement.scrollLeft;</span><br><span class="line">    <span class="keyword">if</span> (element.getBoundingClientRect) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">arguments</span>.callee.offset != <span class="string">"number"</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> temp = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">            temp.style.cssText = <span class="string">"position:absolute;left:0;top:0;"</span>;</span><br><span class="line">            <span class="built_in">document</span>.body.appendChild(temp);</span><br><span class="line">            <span class="built_in">arguments</span>.callee.offset = -temp.getBoundingClientRect().top - scrollTop;</span><br><span class="line">            <span class="built_in">document</span>.body.removeChild(temp);</span><br><span class="line">            temp = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> rect = element.getBoundingClientRect();</span><br><span class="line">        <span class="keyword">var</span> offset = <span class="built_in">arguments</span>.callee.offset;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            left: rect.left + offset,</span><br><span class="line">            right: rect.right + offset,</span><br><span class="line">            top: rect.top + offset,</span><br><span class="line">            bottom: rect.bottom + offset</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> actualLeft = getElementLeft(element);</span><br><span class="line">        <span class="keyword">var</span> actualTop = getElementTop(element);</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            left: actualLeft - scrollLeft,</span><br><span class="line">            right: actualLeft + element.offsetWidth - scrollLeft,</span><br><span class="line">            top: actualTop - scrollTop,</span><br><span class="line">            bottom: actualTop + element.offsetHeight - scrollTop</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历</span></span><br><span class="line"><span class="comment">// document.createNodeIterator()</span></span><br><span class="line"><span class="comment">// NodeIterator</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* root 想作为搜索起点的树中的节点</span></span><br><span class="line"><span class="comment">* whatToShow:表示要访问哪些节点的数字代码</span></span><br><span class="line"><span class="comment">* filter:是一个NodeFilter对象，或者表示应该接受还是拒绝特定节点的函数</span></span><br><span class="line"><span class="comment">* entityReferenceExpansion：布尔值是否要扩展实体引用</span></span><br><span class="line"><span class="comment">* whatToShow：参数是一个位掩码 常量类容定义在NodeFilter中</span></span><br><span class="line"><span class="comment">*   NodeFilter.SHOW_ALL 所有节点</span></span><br><span class="line"><span class="comment">*   NodeFilter.SHOW_ELEMENT 元素节点</span></span><br><span class="line"><span class="comment">*   NodeFilter.SHOW_ATTRIBUTE 特性节点 dom不能使用</span></span><br><span class="line"><span class="comment">*   NodeFilter.SHOW_TEXT 文本节点</span></span><br><span class="line"><span class="comment">*   NodeFilter.SHOW_COMMENT 注释节点</span></span><br><span class="line"><span class="comment">*   NodeFilter.SHOW_DOCUMENT 文档节点</span></span><br><span class="line"><span class="comment">*   NodeFilter.SHOW_DOCUMENT_TYPE 文档类型节点</span></span><br><span class="line"><span class="comment">*   nextNode()</span></span><br><span class="line"><span class="comment">*   previousNode()</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">// 插入测试dom</span></span><br><span class="line"><span class="keyword">var</span> html = <span class="string">`</span></span><br><span class="line"><span class="string">&lt;div id="div1"&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;&lt;b&gt;Hello&lt;/b&gt; world!&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;ul&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;List item 1&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;List item 2&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;List item 3&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = html</span><br><span class="line"><span class="comment">/*var root = document</span></span><br><span class="line"><span class="comment">var filter = &#123;</span></span><br><span class="line"><span class="comment">    acceptNode: function(node)&#123;</span></span><br><span class="line"><span class="comment">        return node.tagName.toLowerCase() === "p" ?</span></span><br><span class="line"><span class="comment">            NodeFilter.FILTER_ACCEPT :</span></span><br><span class="line"><span class="comment">                NodeFilter.FILTER_SKIP;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">var iterator = document.createNodeIterator(root, NodeFilter.SHOW_ELEMENT,</span></span><br><span class="line"><span class="comment">    filter, false);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">console.log(iterator.nextNode())</span></span><br><span class="line"><span class="comment">console.log(iterator.previousNode())*/</span></span><br><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">'div1'</span>)</span><br><span class="line"><span class="keyword">var</span> iterator = <span class="built_in">document</span>.createNodeIterator(div, NodeFilter.SHOW_ELEMENT, <span class="literal">null</span>, <span class="literal">false</span>)</span><br><span class="line"><span class="keyword">var</span> node = iterator.nextNode()</span><br><span class="line"><span class="keyword">while</span> (node !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(node.tagName)</span><br><span class="line">    node = iterator.nextNode()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TreeWalker</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* parentNode()</span></span><br><span class="line"><span class="comment">* firstChild()</span></span><br><span class="line"><span class="comment">* lastChild()</span></span><br><span class="line"><span class="comment">* nextSibling()</span></span><br><span class="line"><span class="comment">* previousSibling()</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> div2 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span><br><span class="line"><span class="keyword">var</span> walker = <span class="built_in">document</span>.createTreeWalker(div2, NodeFilter.SHOW_ELEMENT,</span><br><span class="line">    <span class="literal">null</span>, <span class="literal">false</span>);</span><br><span class="line">walker.firstChild(); <span class="comment">// 到p</span></span><br><span class="line">walker.nextSibling(); <span class="comment">// 到ul</span></span><br><span class="line"><span class="keyword">var</span> node2 = walker.firstChild(); <span class="comment">// 第一个li</span></span><br><span class="line"><span class="keyword">while</span> (node2 !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(node2.tagName); <span class="comment">//输出标签名</span></span><br><span class="line">    node2 = walker.nextSibling();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// dom中的范围</span></span><br><span class="line"><span class="comment">// 检测 是否支持dom2</span></span><br><span class="line"><span class="keyword">var</span> supportsRange = <span class="built_in">document</span>.implementation.hasFeature(<span class="string">"Range"</span>, <span class="string">"2.0"</span>);</span><br><span class="line"><span class="keyword">var</span> alsoSupportsRange = (<span class="keyword">typeof</span> <span class="built_in">document</span>.createRange === <span class="string">"function"</span>);</span><br><span class="line"><span class="comment">// 创建</span></span><br><span class="line"><span class="comment">// var range = document.createRange();</span></span><br><span class="line"><span class="comment">// 方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* startContainer 包含范围的起点</span></span><br><span class="line"><span class="comment">* startOffset 范围在startContainer中起点的偏移量</span></span><br><span class="line"><span class="comment">* endContainer 包含范围终点的节点</span></span><br><span class="line"><span class="comment">* endOffset 范围在endContainer中终点的偏移量</span></span><br><span class="line"><span class="comment">* commonAncestorContainer startContainer、endContainer共同祖先在文档树中位置最深的那个</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用都没范围实现简单选择</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* selectNode() 整个节点</span></span><br><span class="line"><span class="comment">* selectNodeContents() 节点的子节点</span></span><br><span class="line"><span class="comment">* 接收一个dom节点，用节点中的信息填充范围</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">var</span> range1 = <span class="built_in">document</span>.createRange(),</span><br><span class="line">range2 = <span class="built_in">document</span>.createRange();</span><br><span class="line">range1.selectNode(div2)</span><br><span class="line">range2.selectNodeContents(div2)</span><br><span class="line"><span class="built_in">console</span>.log(range1,range2)</span><br><span class="line"><span class="comment">// 方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* setStartBefore(refNode)</span></span><br><span class="line"><span class="comment">* setStartAfter(refNode)</span></span><br><span class="line"><span class="comment">* setEndBefore(refNode)</span></span><br><span class="line"><span class="comment">* setEndAfter(refNode)</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用dom范围实现复杂选择</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*  setStart()</span></span><br><span class="line"><span class="comment">*  setEnd()</span></span><br><span class="line"><span class="comment">*  接收节点和偏移量值，setStart节点变成startContainer 偏移量变成startOffset  setEnd类似</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作DOM范围中的内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* deleteContents() 删除</span></span><br><span class="line"><span class="comment">* extractContents() 删除并返回删除值</span></span><br><span class="line"><span class="comment">* cloneContents() 创建对象复本</span></span><br><span class="line"><span class="comment">* insertNode() 插入</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 折叠DOM范围</span></span><br><span class="line"><span class="comment">//  collapse()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较DOM范围</span></span><br><span class="line"><span class="comment">// compareBoundaryPoints()</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*  Range.START_TO_START(0)</span></span><br><span class="line"><span class="comment">*  Range.START_TO_END(1)</span></span><br><span class="line"><span class="comment">*  Range.END_TO_END(2)</span></span><br><span class="line"><span class="comment">*  Range.END_TO_START(3)</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 复制DOM范围</span></span><br><span class="line"><span class="comment">//  cloneRange()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 清除DOM范围</span></span><br><span class="line"><span class="comment">// detach()</span></span><br></pre></td></tr></table></figure>

<h3 id="javascript-资料"><a href="#javascript-资料" class="headerlink" title="javascript 资料"></a>javascript 资料</h3><p>现代JavaScript教程 <a href="https://zh.javascript.info/" target="_blank" rel="noopener">https://zh.javascript.info/</a></p>
<h2 id="VScode"><a href="#VScode" class="headerlink" title="VScode"></a>VScode</h2><h3 id="javascript"><a href="#javascript" class="headerlink" title="javascript"></a>javascript</h3><p>windows</p>
<p>快捷键：</p>
<p>多行注释/取消：<code>shift + alt + a</code></p>
<p>单行注释/取消：<code>ctrl + /</code></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/PICKS/" rel="tag"># PICKS</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/06/22/Dawn-Dew-light-Collected-at-Dusk-4-Basic-Knowledge/" rel="prev" title="Dawn Dew-light Collected at Dusk 4 Basic Knowledge">
      <i class="fa fa-chevron-left"></i> Dawn Dew-light Collected at Dusk 4 Basic Knowledge
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC80Mzk4NC8yMDUyMA=="></div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#更友好的创建对象方式"><span class="nav-number">1.</span> <span class="nav-text">更友好的创建对象方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#下面代码是否线程安全"><span class="nav-number">2.</span> <span class="nav-text">下面代码是否线程安全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#volatile利用了什么协议来实现可见性"><span class="nav-number">3.</span> <span class="nav-text">volatile利用了什么协议来实现可见性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-Trainsient-关键字"><span class="nav-number">4.</span> <span class="nav-text">Java Trainsient 关键字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多线程中Random的使用"><span class="nav-number">5.</span> <span class="nav-text">多线程中Random的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么阿里禁止使用Executor创建线程池"><span class="nav-number">6.</span> <span class="nav-text">为什么阿里禁止使用Executor创建线程池</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#阿里开发手册上不推荐（禁止）使用Double的根本原因"><span class="nav-number">7.</span> <span class="nav-text">阿里开发手册上不推荐（禁止）使用Double的根本原因</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mac-清理maven仓库的脚本"><span class="nav-number">8.</span> <span class="nav-text">mac 清理maven仓库的脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#idea目录较多，文件名较长产生的错误"><span class="nav-number">9.</span> <span class="nav-text">idea目录较多，文件名较长产生的错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Log4J-指定屏蔽某些特定报警信息"><span class="nav-number">10.</span> <span class="nav-text">Log4J 指定屏蔽某些特定报警信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flink-Source并行度为1的意义"><span class="nav-number">11.</span> <span class="nav-text">Flink Source并行度为1的意义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JB套件的一个实用功能"><span class="nav-number">12.</span> <span class="nav-text">JB套件的一个实用功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#zk使用的分布式协议并不是paxos"><span class="nav-number">13.</span> <span class="nav-text">zk使用的分布式协议并不是paxos</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么说NULL是计算机科学中最大的错误，至少值十亿美金"><span class="nav-number">14.</span> <span class="nav-text">为什么说NULL是计算机科学中最大的错误，至少值十亿美金</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-NULL-颠覆类型"><span class="nav-number">14.1.</span> <span class="nav-text">1. NULL 颠覆类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-NULL-是凌乱的"><span class="nav-number">14.2.</span> <span class="nav-text">2. NULL 是凌乱的</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-NULL-是一个特例"><span class="nav-number">14.3.</span> <span class="nav-text">3. NULL 是一个特例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-NULL-使-API-变得糟糕"><span class="nav-number">14.4.</span> <span class="nav-text">4.NULL 使 API 变得糟糕</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-NULL-使错误的语言决策更加恶化"><span class="nav-number">14.5.</span> <span class="nav-text">5.NULL 使错误的语言决策更加恶化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-NULL-难以调试"><span class="nav-number">14.6.</span> <span class="nav-text">6.NULL 难以调试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-NULL不可组合"><span class="nav-number">14.7.</span> <span class="nav-text">7.NULL不可组合</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IDEA-maven修改pom文件，导致jdk版本重置问题"><span class="nav-number">15.</span> <span class="nav-text">IDEA maven修改pom文件，导致jdk版本重置问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MAVEN的scope"><span class="nav-number">16.</span> <span class="nav-text">MAVEN的scope</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EXCEL一点小技巧"><span class="nav-number">17.</span> <span class="nav-text">EXCEL一点小技巧</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flink-On-Zeppelin上传Jar包的位置"><span class="nav-number">18.</span> <span class="nav-text">Flink On Zeppelin上传Jar包的位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flink系列深度好文，等待细读"><span class="nav-number">19.</span> <span class="nav-text">Flink系列深度好文，等待细读</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FastJson直接解析"><span class="nav-number">20.</span> <span class="nav-text">FastJson直接解析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FastJson很多坑-准备放弃"><span class="nav-number">21.</span> <span class="nav-text">FastJson很多坑 准备放弃</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置框架无法访问的问题"><span class="nav-number">22.</span> <span class="nav-text">配置框架无法访问的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解决GitHub提交历史头像不显示问题-以及首页没有绿色方块的问题"><span class="nav-number">23.</span> <span class="nav-text">解决GitHub提交历史头像不显示问题,以及首页没有绿色方块的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解决anaconda无法连接的问题"><span class="nav-number">24.</span> <span class="nav-text">解决anaconda无法连接的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#排查挖矿程序中会用到的一些追踪某个进程的命令"><span class="nav-number">25.</span> <span class="nav-text">排查挖矿程序中会用到的一些追踪某个进程的命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Kerberos缺点"><span class="nav-number">26.</span> <span class="nav-text">Kerberos缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mac无法运行-sh文件的解决办法"><span class="nav-number">27.</span> <span class="nav-text">mac无法运行.sh文件的解决办法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解决git下载速度慢的终极方法"><span class="nav-number">28.</span> <span class="nav-text">解决git下载速度慢的终极方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Maven代理配置"><span class="nav-number">29.</span> <span class="nav-text">Maven代理配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#npm更换源"><span class="nav-number">30.</span> <span class="nav-text">npm更换源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HDFS的某个错误"><span class="nav-number">31.</span> <span class="nav-text">HDFS的某个错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IDEA-MAVEN停止加载"><span class="nav-number">32.</span> <span class="nav-text">IDEA MAVEN停止加载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#窗口触发的一些问题"><span class="nav-number">33.</span> <span class="nav-text">窗口触发的一些问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flink-SQL中的爆炸函数"><span class="nav-number">34.</span> <span class="nav-text">Flink SQL中的爆炸函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flink-UI在Yarn下"><span class="nav-number">35.</span> <span class="nav-text">Flink UI在Yarn下</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flink的时区问题"><span class="nav-number">36.</span> <span class="nav-text">Flink的时区问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flink的心跳需求问题"><span class="nav-number">37.</span> <span class="nav-text">Flink的心跳需求问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flink避免重复劳动的一些方法"><span class="nav-number">38.</span> <span class="nav-text">Flink避免重复劳动的一些方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flink配置参数"><span class="nav-number">39.</span> <span class="nav-text">Flink配置参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flink-GlobalWindow"><span class="nav-number">40.</span> <span class="nav-text">Flink GlobalWindow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何排查Kafka消息的异常"><span class="nav-number">41.</span> <span class="nav-text">如何排查Kafka消息的异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL的迁移"><span class="nav-number">42.</span> <span class="nav-text">MySQL的迁移</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#远程调试Flink"><span class="nav-number">43.</span> <span class="nav-text">远程调试Flink</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Log4J-和-slf4j联合使用"><span class="nav-number">44.</span> <span class="nav-text">Log4J 和 slf4j联合使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Log4J2的使用"><span class="nav-number">45.</span> <span class="nav-text">Log4J2的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Log4J2和Log4J1的比较"><span class="nav-number">45.1.</span> <span class="nav-text">Log4J2和Log4J1的比较</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#配置文件"><span class="nav-number">45.1.1.</span> <span class="nav-text">配置文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#依赖"><span class="nav-number">45.1.2.</span> <span class="nav-text">依赖</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#配置文件-1"><span class="nav-number">45.1.3.</span> <span class="nav-text">配置文件</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#调用"><span class="nav-number">45.2.</span> <span class="nav-text">调用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spark-On-Yarn-结束任务的方式"><span class="nav-number">46.</span> <span class="nav-text">Spark On Yarn 结束任务的方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CharSequence"><span class="nav-number">47.</span> <span class="nav-text">CharSequence</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#并发编程，创建多少个线程合适"><span class="nav-number">48.</span> <span class="nav-text">并发编程，创建多少个线程合适</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Google-AutoValue"><span class="nav-number">49.</span> <span class="nav-text">Google AutoValue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Idea-注释模板设置"><span class="nav-number">50.</span> <span class="nav-text">Idea 注释模板设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python中使用-join-替代-处理字符串"><span class="nav-number">51.</span> <span class="nav-text">Python中使用.join()替代+处理字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存储图片"><span class="nav-number">52.</span> <span class="nav-text">存储图片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#java的一些包的解释"><span class="nav-number">53.</span> <span class="nav-text">java的一些包的解释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IDEA2020-显示内存大小"><span class="nav-number">54.</span> <span class="nav-text">IDEA2020 显示内存大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java程序结束前运行的代码"><span class="nav-number">55.</span> <span class="nav-text">Java程序结束前运行的代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java8-try-…catch"><span class="nav-number">56.</span> <span class="nav-text">Java8 try()…catch()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#idea中设置maven的jvm参数"><span class="nav-number">57.</span> <span class="nav-text">idea中设置maven的jvm参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#命令行中设置maven的jvm参数"><span class="nav-number">58.</span> <span class="nav-text">命令行中设置maven的jvm参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String-SubString"><span class="nav-number">59.</span> <span class="nav-text">String SubString</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#通用的空间-地理空间ASL许可的开源Java库"><span class="nav-number">60.</span> <span class="nav-text">通用的空间/地理空间ASL许可的开源Java库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IntegerCache"><span class="nav-number">61.</span> <span class="nav-text">IntegerCache</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#书单推荐"><span class="nav-number">62.</span> <span class="nav-text">书单推荐</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#反射API"><span class="nav-number">63.</span> <span class="nav-text">反射API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#最详细的Anaconda安装步骤和注意点"><span class="nav-number">64.</span> <span class="nav-text">最详细的Anaconda安装步骤和注意点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CUDA-Driver版本选型"><span class="nav-number">65.</span> <span class="nav-text">CUDA Driver版本选型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CuDNN版本"><span class="nav-number">66.</span> <span class="nav-text">CuDNN版本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Maven-阿里云插件仓库配置"><span class="nav-number">67.</span> <span class="nav-text">Maven 阿里云插件仓库配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IDEA配置仓库最好用HTTPS"><span class="nav-number">68.</span> <span class="nav-text">IDEA配置仓库最好用HTTPS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring"><span class="nav-number">69.</span> <span class="nav-text">Spring</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-IOC"><span class="nav-number">69.1.</span> <span class="nav-text">1.IOC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-context上下文和bean"><span class="nav-number">69.2.</span> <span class="nav-text">2.context上下文和bean</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-AOP"><span class="nav-number">69.3.</span> <span class="nav-text">3.AOP</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java加载properties的六种方式"><span class="nav-number">70.</span> <span class="nav-text">Java加载properties的六种方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GPS第三方工具"><span class="nav-number">71.</span> <span class="nav-text">GPS第三方工具</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#GIS基本概念"><span class="nav-number">71.1.</span> <span class="nav-text">GIS基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#几何对象"><span class="nav-number">71.1.1.</span> <span class="nav-text">几何对象</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WKB格式"><span class="nav-number">71.2.</span> <span class="nav-text">WKB格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JTS"><span class="nav-number">71.3.</span> <span class="nav-text">JTS</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#简介"><span class="nav-number">71.3.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#操作"><span class="nav-number">71.3.2.</span> <span class="nav-text">操作</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#火星坐标系"><span class="nav-number">71.4.</span> <span class="nav-text">火星坐标系</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PrototBuf"><span class="nav-number">72.</span> <span class="nav-text">PrototBuf</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IDEA莫名其妙每次自动生成变量都有final修饰符"><span class="nav-number">73.</span> <span class="nav-text">IDEA莫名其妙每次自动生成变量都有final修饰符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FlinkKafka兼容性"><span class="nav-number">74.</span> <span class="nav-text">FlinkKafka兼容性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关于数据仓库数据中台数据湖的一部分图片"><span class="nav-number">75.</span> <span class="nav-text">关于数据仓库数据中台数据湖的一部分图片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mac版本的终端要走Proxy除了梯子还需要一个设置"><span class="nav-number">76.</span> <span class="nav-text">Mac版本的终端要走Proxy除了梯子还需要一个设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#无状态-和-有状态-的区别"><span class="nav-number">77.</span> <span class="nav-text">无状态 和 有状态 的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-Command"><span class="nav-number">78.</span> <span class="nav-text">Linux Command</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#most-more-less"><span class="nav-number">78.1.</span> <span class="nav-text">most + more + less</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#linux通过进程号查看运行文件目录"><span class="nav-number">78.2.</span> <span class="nav-text">linux通过进程号查看运行文件目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CentOS查看版本"><span class="nav-number">78.3.</span> <span class="nav-text">CentOS查看版本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文件目录大小常见的命令"><span class="nav-number">78.4.</span> <span class="nav-text">文件目录大小常见的命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux生僻命令"><span class="nav-number">78.5.</span> <span class="nav-text">Linux生僻命令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Win10网络问题汇总"><span class="nav-number">79.</span> <span class="nav-text">Win10网络问题汇总</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#win10图形化查看端口占用工具"><span class="nav-number">79.1.</span> <span class="nav-text">win10图形化查看端口占用工具</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#重置win10网络命令"><span class="nav-number">79.2.</span> <span class="nav-text">重置win10网络命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#win10远程窗口大小不可调的问题"><span class="nav-number">79.3.</span> <span class="nav-text">win10远程窗口大小不可调的问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#给win10商店设置代理"><span class="nav-number">79.4.</span> <span class="nav-text">给win10商店设置代理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#关于SSTap转发UDP的问题"><span class="nav-number">79.5.</span> <span class="nav-text">关于SSTap转发UDP的问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#win10-访问墙外世界的最终办法："><span class="nav-number">79.6.</span> <span class="nav-text">win10 访问墙外世界的最终办法：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Win下Chrome无法访问新浪外链地址"><span class="nav-number">79.7.</span> <span class="nav-text">Win下Chrome无法访问新浪外链地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#云服务器通过转发windows的3389端口，实现远程对PC的访问"><span class="nav-number">79.8.</span> <span class="nav-text">云服务器通过转发windows的3389端口，实现远程对PC的访问</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BT下载-扔掉迅雷"><span class="nav-number">80.</span> <span class="nav-text">BT下载 扔掉迅雷</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络知识"><span class="nav-number">81.</span> <span class="nav-text">网络知识</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP-IP"><span class="nav-number">81.1.</span> <span class="nav-text">TCP/IP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RPC"><span class="nav-number">81.2.</span> <span class="nav-text">RPC</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Maven问题汇总"><span class="nav-number">82.</span> <span class="nav-text">Maven问题汇总</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Maven手动添加Jar包之后没有加载"><span class="nav-number">82.1.</span> <span class="nav-text">Maven手动添加Jar包之后没有加载</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Active-使用遇到的坑"><span class="nav-number">83.</span> <span class="nav-text">Active 使用遇到的坑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis持久化"><span class="nav-number">84.</span> <span class="nav-text">Redis持久化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LinkedList等队列size"><span class="nav-number">85.</span> <span class="nav-text">LinkedList等队列size()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开源协议"><span class="nav-number">86.</span> <span class="nav-text">开源协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flink问题汇总"><span class="nav-number">87.</span> <span class="nav-text">Flink问题汇总</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Flink使用滑动窗口出现的一个问题"><span class="nav-number">87.1.</span> <span class="nav-text">Flink使用滑动窗口出现的一个问题</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Flink数据写入了HDFS，Hive没有识别"><span class="nav-number">87.1.1.</span> <span class="nav-text">Flink数据写入了HDFS，Hive没有识别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Flink-1-12-0编译密码："><span class="nav-number">87.1.2.</span> <span class="nav-text">Flink-1.12.0编译密码：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#时空数据结构简介"><span class="nav-number">88.</span> <span class="nav-text">时空数据结构简介</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#RTree"><span class="nav-number">88.1.</span> <span class="nav-text">RTree</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Quad-Trees"><span class="nav-number">88.2.</span> <span class="nav-text">Quad-Trees</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#K-D-Trees"><span class="nav-number">88.3.</span> <span class="nav-text">K-D Trees</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Space-Filling-Curve"><span class="nav-number">88.4.</span> <span class="nav-text">Space Filling Curve</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#R树的操作"><span class="nav-number">88.4.1.</span> <span class="nav-text">R树的操作</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#搜索"><span class="nav-number">88.4.1.1.</span> <span class="nav-text">搜索</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#插入"><span class="nav-number">88.4.1.2.</span> <span class="nav-text">插入</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#删除"><span class="nav-number">88.4.1.3.</span> <span class="nav-text">删除</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#优化"><span class="nav-number">88.4.1.4.</span> <span class="nav-text">优化</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Base4BigData-Version-1"><span class="nav-number">89.</span> <span class="nav-text">Base4BigData(Version.1)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#MapReduce"><span class="nav-number">89.1.</span> <span class="nav-text">MapReduce</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#架构"><span class="nav-number">89.1.1.</span> <span class="nav-text">架构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#MapReduce核心计算阶段"><span class="nav-number">89.1.2.</span> <span class="nav-text">MapReduce核心计算阶段</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#MapReduce为什么慢？"><span class="nav-number">89.1.3.</span> <span class="nav-text">MapReduce为什么慢？</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Spark"><span class="nav-number">89.2.</span> <span class="nav-text">Spark</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#组件角色"><span class="nav-number">89.2.1.</span> <span class="nav-text">组件角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#架构-1"><span class="nav-number">89.2.2.</span> <span class="nav-text">架构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#工作原理"><span class="nav-number">89.2.3.</span> <span class="nav-text">工作原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Spark-为什么比MapReduce快"><span class="nav-number">89.2.4.</span> <span class="nav-text">Spark 为什么比MapReduce快</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Spark-Streaming"><span class="nav-number">89.3.</span> <span class="nav-text">Spark Streaming</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#工作模型"><span class="nav-number">89.3.1.</span> <span class="nav-text">工作模型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DStreams（Discretized-Streams）"><span class="nav-number">89.3.2.</span> <span class="nav-text">DStreams（Discretized Streams）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#为什么要用Spark-Streaming呢？"><span class="nav-number">89.3.3.</span> <span class="nav-text">为什么要用Spark Streaming呢？</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Storm"><span class="nav-number">89.4.</span> <span class="nav-text">Storm</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Storm架构"><span class="nav-number">89.4.1.</span> <span class="nav-text">Storm架构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Storm工作流程"><span class="nav-number">89.4.2.</span> <span class="nav-text">Storm工作流程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Storm-Vs-Spark-Streaming"><span class="nav-number">89.4.3.</span> <span class="nav-text">Storm Vs Spark Streaming</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Flink"><span class="nav-number">89.5.</span> <span class="nav-text">Flink</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#架构-2"><span class="nav-number">89.5.1.</span> <span class="nav-text">架构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Flink的优势"><span class="nav-number">89.5.2.</span> <span class="nav-text">Flink的优势</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Flink-VS-Storm-VS-Spark-Streaming"><span class="nav-number">89.6.</span> <span class="nav-text">Flink VS Storm VS Spark Streaming</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tool"><span class="nav-number">90.</span> <span class="nav-text">Tool</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JS-amp-Tool-amp-Other"><span class="nav-number"></span> <span class="nav-text">JS &amp; Tool &amp; Other</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#VSCODE"><span class="nav-number"></span> <span class="nav-text">VSCODE</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Anaconda-Navigator-amp-Pyhton-amp-脚本语言-amp-Others"><span class="nav-number"></span> <span class="nav-text">Anaconda Navigator &amp; Pyhton &amp; 脚本语言 &amp; Others</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Anaconda-Navigator-介绍-背景"><span class="nav-number"></span> <span class="nav-text">Anaconda Navigator 介绍 / 背景</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#conda-anaconda-anaconda-navigator-pip-virtualenv区别"><span class="nav-number">1.</span> <span class="nav-text">conda anaconda anaconda-navigator pip virtualenv区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#conda基础操作"><span class="nav-number">2.</span> <span class="nav-text">conda基础操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#conda参数"><span class="nav-number">2.1.</span> <span class="nav-text">conda参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#conda-install-和-pip-install-的区别"><span class="nav-number">2.2.</span> <span class="nav-text">conda install 和 pip install 的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#conda更新"><span class="nav-number">2.3.</span> <span class="nav-text">conda更新</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Jupyter-Book"><span class="nav-number"></span> <span class="nav-text">Jupyter Book</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用技巧"><span class="nav-number">1.</span> <span class="nav-text">使用技巧</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python"><span class="nav-number"></span> <span class="nav-text">Python</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#python基础"><span class="nav-number">1.</span> <span class="nav-text">python基础</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#python包"><span class="nav-number">2.</span> <span class="nav-text">python包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python随机随到的一些问题，那你妈逼随机就这么容易随到的啊"><span class="nav-number">3.</span> <span class="nav-text">Python随机随到的一些问题，那你妈逼随机就这么容易随到的啊</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#anaconda代理问题"><span class="nav-number">3.1.</span> <span class="nav-text">anaconda代理问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#python和Clash4windows的冲突问题"><span class="nav-number">3.2.</span> <span class="nav-text">python和Clash4windows的冲突问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#python和解释性语言"><span class="nav-number">3.3.</span> <span class="nav-text">python和解释性语言</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScript"><span class="nav-number"></span> <span class="nav-text">JavaScript</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基础"><span class="nav-number">1.</span> <span class="nav-text">基础</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#简介-amp-基本概念"><span class="nav-number">1.1.</span> <span class="nav-text">简介 &amp; 基本概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#变量-amp-作用-amp-内存问题"><span class="nav-number">1.2.</span> <span class="nav-text">变量 &amp; 作用 &amp; 内存问题</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#js的连续赋值"><span class="nav-number">1.2.1.</span> <span class="nav-text">js的连续赋值</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#引用类型"><span class="nav-number">1.3.</span> <span class="nav-text">引用类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#面向对象"><span class="nav-number">1.4.</span> <span class="nav-text">面向对象</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-JavaScript创建对象的方式"><span class="nav-number">1.4.1.</span> <span class="nav-text">1.JavaScript创建对象的方式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-对象属性操作的控制"><span class="nav-number">1.4.2.</span> <span class="nav-text">2.对象属性操作的控制</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-Object-defineProperty"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">2.1.Object.defineProperty()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-2-属性描述符的分类"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">2.2.属性描述符的分类</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-3-数据属性描述符"><span class="nav-number">1.4.2.3.</span> <span class="nav-text">2.3.数据属性描述符</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-4-存取属性描述符"><span class="nav-number">1.4.2.4.</span> <span class="nav-text">2.4.存取属性描述符</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-5-同时给多个属性定义属性描述符"><span class="nav-number">1.4.2.5.</span> <span class="nav-text">2.5.同时给多个属性定义属性描述符</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-Object中常用的方法"><span class="nav-number">1.4.3.</span> <span class="nav-text">3.Object中常用的方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-JavaScript创建多个对象"><span class="nav-number">1.4.4.</span> <span class="nav-text">4.JavaScript创建多个对象</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#4-1-方案一：工厂函数"><span class="nav-number">1.4.4.1.</span> <span class="nav-text">4.1.方案一：工厂函数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-2-方案二：构造函数"><span class="nav-number">1.4.4.2.</span> <span class="nav-text">4.2.方案二：构造函数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-3-方案三：原型-构造函数"><span class="nav-number">1.4.4.3.</span> <span class="nav-text">4.3.方案三：原型+构造函数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-4-其他"><span class="nav-number">1.4.4.4.</span> <span class="nav-text">4.4.其他</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原型模式"><span class="nav-number">1.5.</span> <span class="nav-text">原型模式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#JavaScript原型-amp-原型链"><span class="nav-number">1.5.1.</span> <span class="nav-text">JavaScript原型 &amp; 原型链</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-prototype属性"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">1.prototype属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-proto属性"><span class="nav-number">1.5.1.2.</span> <span class="nav-text">2.proto属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-constructor属性"><span class="nav-number">1.5.1.3.</span> <span class="nav-text">3.constructor属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-总结"><span class="nav-number">1.5.1.4.</span> <span class="nav-text">4.总结</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-使用习惯"><span class="nav-number">1.5.1.5.</span> <span class="nav-text">5.使用习惯</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#JS继承"><span class="nav-number">1.5.2.</span> <span class="nav-text">JS继承</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-原型链继承"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">1.原型链继承</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-构造函数继承"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">2.构造函数继承</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-组合继承"><span class="nav-number">1.5.2.3.</span> <span class="nav-text">3.组合继承</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-寄生组合继承"><span class="nav-number">1.5.2.4.</span> <span class="nav-text">4.寄生组合继承</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-ES6自带继承"><span class="nav-number">1.5.2.5.</span> <span class="nav-text">5.ES6自带继承</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#函数表达式"><span class="nav-number">1.6.</span> <span class="nav-text">函数表达式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#BOM"><span class="nav-number">1.7.</span> <span class="nav-text">BOM</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#客户端检测"><span class="nav-number">1.8.</span> <span class="nav-text">客户端检测</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DOM"><span class="nav-number">1.9.</span> <span class="nav-text">DOM</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#javascript-资料"><span class="nav-number">2.</span> <span class="nav-text">javascript 资料</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#VScode"><span class="nav-number"></span> <span class="nav-text">VScode</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#javascript"><span class="nav-number">1.</span> <span class="nav-text">javascript</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Fly Hugh"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Fly Hugh</p>
  <div class="site-description" itemprop="description">WE CHOOSE TO  GO TO THE MARS</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">71</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/FlyMeToTheMars" title="GitHub → https://github.com/FlyMeToTheMars" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/flyhobo@live.com" title="E-Mail → flyhobo@live.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/3200892914" title="Weibo → https://weibo.com/u/3200892914" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/Fly__HoBo" title="Twitter → https://twitter.com/Fly__HoBo" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fly Hugh</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

<script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script>

</body>
</html>
